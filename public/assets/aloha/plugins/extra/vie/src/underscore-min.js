// Underscore.js 1.1.4
// (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=r.slice,o=r.unshift,u=i.toString,a=i.hasOwnProperty,f=r.forEach,l=r.map,c=r.reduce,h=r.reduceRight,p=r.filter,d=r.every,v=r.some,m=r.indexOf,g=r.lastIndexOf;i=Array.isArray;var y=Object.keys,b=function(e){return new T(e)};typeof module!="undefined"&&module.exports?(module.exports=b,b._=b):e._=b,b.VERSION="1.1.4";var w=b.each=b.forEach=function(e,t,r){if(e!=null)if(f&&e.forEach===f)e.forEach(t,r);else if(b.isNumber(e.length)){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)break}else for(i in e)if(a.call(e,i)&&t.call(r,e[i],i,e)===n)break};b.map=function(e,t,n){var r=[];return e==null?r:l&&e.map===l?e.map(t,n):(w(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},b.reduce=b.foldl=b.inject=function(e,t,n,r){var i=n!==void 0;e==null&&(e=[]);if(c&&e.reduce===c)return r&&(t=b.bind(t,r)),i?e.reduce(t,n):e.reduce(t);w(e,function(e,s,o){!i&&s===0?(n=e,i=!0):n=t.call(r,n,e,s,o)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},b.reduceRight=b.foldr=function(e,t,n,r){return e==null&&(e=[]),h&&e.reduceRight===h?(r&&(t=b.bind(t,r)),n!==void 0?e.reduceRight(t,n):e.reduceRight(t)):(e=(b.isArray(e)?e.slice():b.toArray(e)).reverse(),b.reduce(e,t,n,r))},b.find=b.detect=function(e,t,n){var r;return E(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},b.filter=b.select=function(e,t,n){var r=[];return e==null?r:p&&e.filter===p?e.filter(t,n):(w(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},b.reject=function(e,t,n){var r=[];return e==null?r:(w(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},b.every=b.all=function(e,t,r){t=t||b.identity;var i=!0;return e==null?i:d&&e.every===d?e.every(t,r):(w(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),i)};var E=b.some=b.any=function(e,t,r){t=t||b.identity;var i=!1;return e==null?i:v&&e.some===v?e.some(t,r):(w(e,function(e,s,o){if(i=t.call(r,e,s,o))return n}),i)};b.include=b.contains=function(e,t){var n=!1;return e==null?n:m&&e.indexOf===m?e.indexOf(t)!=-1:(E(e,function(e){if(n=e===t)return!0}),n)},b.invoke=function(e,t){var n=s.call(arguments,2);return b.map(e,function(e){return(t?e[t]:e).apply(e,n)})},b.pluck=function(e,t){return b.map(e,function(e){return e[t]})},b.max=function(e,t,n){if(!t&&b.isArray(e))return Math.max.apply(Math,e);var r={computed:-Infinity};return w(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},b.min=function(e,t,n){if(!t&&b.isArray(e))return Math.min.apply(Math,e);var r={computed:Infinity};return w(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},b.sortBy=function(e,t,n){return b.pluck(b.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},b.sortedIndex=function(e,t,n){n=n||b.identity;for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},b.toArray=function(e){return e?e.toArray?e.toArray():b.isArray(e)?e:b.isArguments(e)?s.call(e):b.values(e):[]},b.size=function(e){return b.toArray(e).length},b.first=b.head=function(e,t,n){return t&&!n?s.call(e,0,t):e[0]},b.rest=b.tail=function(e,t,n){return s.call(e,b.isUndefined(t)||n?1:t)},b.last=function(e){return e[e.length-1]},b.compact=function(e){return b.filter(e,function(e){return!!e})},b.flatten=function(e){return b.reduce(e,function(e,t){return b.isArray(t)?e.concat(b.flatten(t)):(e[e.length]=t,e)},[])},b.without=function(e){var t=s.call(arguments,1);return b.filter(e,function(e){return!b.include(t,e)})},b.uniq=b.unique=function(e,t){return b.reduce(e,function(e,n,r){if(0==r||(t===!0?b.last(e)!=n:!b.include(e,n)))e[e.length]=n;return e},[])},b.intersect=function(e){var t=s.call(arguments,1);return b.filter(b.uniq(e),function(e){return b.every(t,function(t){return b.indexOf(t,e)>=0})})},b.zip=function(){for(var e=s.call(arguments),t=b.max(b.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=b.pluck(e,""+r);return n},b.indexOf=function(e,t,n){if(e==null)return-1;if(n)return n=b.sortedIndex(e,t),e[n]===t?n:-1;if(m&&e.indexOf===m)return e.indexOf(t);n=0;for(var r=e.length;n<r;n++)if(e[n]===t)return n;return-1},b.lastIndexOf=function(e,t){if(e==null)return-1;if(g&&e.lastIndexOf===g)return e.lastIndexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1},b.range=function(e,t,n){var r=s.call(arguments),i=r.length<=1;e=i?0:r[0],t=i?r[0]:r[1],n=r[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0;for(var o=Array(r);i<r;)o[i++]=e,e+=n;return o},b.bind=function(e,t){var n=s.call(arguments,2);return function(){return e.apply(t||{},n.concat(s.call(arguments)))}},b.bindAll=function(e){var t=s.call(arguments,1);return t.length==0&&(t=b.functions(e)),w(t,function(t){e[t]=b.bind(e[t],e)}),e},b.memoize=function(e,t){var n={};return t=t||b.identity,function(){var r=t.apply(this,arguments);return r in n?n[r]:n[r]=e.apply(this,arguments)}},b.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},b.defer=function(e){return b.delay.apply(b,[e,1].concat(s.call(arguments,1)))};var S=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}};b.throttle=function(e,t){return S(e,t,!1)},b.debounce=function(e,t){return S(e,t,!0)},b.wrap=function(e,t){return function(){var n=[e].concat(s.call(arguments));return t.apply(this,n)}},b.compose=function(){var e=s.call(arguments);return function(){for(var t=s.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},b.keys=y||function(e){if(b.isArray(e))return b.range(0,e.length);var t=[],n;for(n in e)a.call(e,n)&&(t[t.length]=n);return t},b.values=function(e){return b.map(e,b.identity)},b.functions=b.methods=function(e){return b.filter(b.keys(e),function(t){return b.isFunction(e[t])}).sort()},b.extend=function(e){return w(s.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},b.clone=function(e){return b.isArray(e)?e.slice():b.extend({},e)},b.tap=function(e,t){return t(e),e},b.isEqual=function(e,t){if(e===t)return!0;var n=typeof e;if(n!=typeof t)return!1;if(e==t)return!0;if(!e&&t||e&&!t)return!1;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual)return e.isEqual(t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isNaN(e)&&b.isNaN(t))return!1;if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline;if(n!=="object")return!1;if(e.length&&e.length!==t.length)return!1;n=b.keys(e);var r=b.keys(t);if(n.length!=r.length)return!1;for(var i in e)if(!(i in t)||!b.isEqual(e[i],t[i]))return!1;return!0},b.isEmpty=function(e){if(b.isArray(e)||b.isString(e))return e.length===0;for(var t in e)if(a.call(e,t))return!1;return!0},b.isElement=function(e){return!!e&&e.nodeType==1},b.isArray=i||function(e){return u.call(e)==="[object Array]"},b.isArguments=function(e){return!!e&&!!a.call(e,"callee")},b.isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},b.isString=function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},b.isNumber=function(e){return!!(e===0||e&&e.toExponential&&e.toFixed)},b.isNaN=function(e){return e!==e},b.isBoolean=function(e){return e===!0||e===!1},b.isDate=function(e){return!!(e&&e.getTimezoneOffset&&e.setUTCFullYear)},b.isRegExp=function(e){return!(!(e&&e.test&&e.exec)||!e.ignoreCase&&e.ignoreCase!==!1)},b.isNull=function(e){return e===null},b.isUndefined=function(e){return e===void 0},b.noConflict=function(){return e._=t,this},b.identity=function(e){return e},b.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},b.mixin=function(e){w(b.functions(e),function(t){C(t,b[t]=e[t])})};var x=0;b.uniqueId=function(e){var t=x++;return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},b.template=function(e,t){var n=b.templateSettings;return n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",n=new Function("obj",n),t?n(t):n};var T=function(e){this._wrapped=e};b.prototype=T.prototype;var N=function(e,t){return t?b(e).chain():e},C=function(e,t){T.prototype[e]=function(){var e=s.call(arguments);return o.call(e,this._wrapped),N(t.apply(b,e),this._chain)}};b.mixin(b),w(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){return t.apply(this._wrapped,arguments),N(this._wrapped,this._chain)}}),w(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return N(t.apply(this._wrapped,arguments),this._chain)}}),T.prototype.chain=function(){return this._chain=!0,this},T.prototype.value=function(){return this._wrapped}})();