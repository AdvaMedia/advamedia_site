define(["aloha/jquery"],function($){$.toJSON=function(e){if(typeof JSON=="object"&&JSON.stringify)return JSON.stringify(e);var t=typeof e;if(e===null)return"null";if(t=="undefined")return undefined;if(t=="number"||t=="boolean")return e+"";if(t=="string")return $.quoteString(e);if(t=="object"){if(typeof e.toJSON=="function")return $.toJSON(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1;n<10&&(n="0"+n);var r=e.getUTCDate();r<10&&(r="0"+r);var i=e.getUTCFullYear(),s=e.getUTCHours();s<10&&(s="0"+s);var o=e.getUTCMinutes();o<10&&(o="0"+o);var u=e.getUTCSeconds();u<10&&(u="0"+u);var a=e.getUTCMilliseconds();return a<100&&(a="0"+a),a<10&&(a="0"+a),'"'+i+"-"+n+"-"+r+"T"+s+":"+o+":"+u+"."+a+'Z"'}if(e.constructor===Array){var f=[];for(var l=0;l<e.length;l++)f.push($.toJSON(e[l])||"null");return"["+f.join(",")+"]"}var c=[];for(var h in e){var p,t=typeof h;if(t=="number")p='"'+h+'"';else{if(t!="string")continue;p=$.quoteString(h)}if(typeof e[h]=="function")continue;var d=$.toJSON(e[h]);c.push(p+":"+d)}return"{"+c.join(", ")+"}"}},$.evalJSON=function(src){return typeof JSON=="object"&&JSON.parse?JSON.parse(src):eval("("+src+")")},$.secureEvalJSON=function(src){if(typeof JSON=="object"&&JSON.parse)return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(e){return e.match(_escapeable)?'"'+e.replace(_escapeable,function(e){var t=_meta[e];return typeof t=="string"?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,_meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}});