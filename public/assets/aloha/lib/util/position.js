/*!
 * This file is part of Aloha Editor
 * Author & Copyright (c) 2010 Gentics Software GmbH, aloha@gentics.com
 * Licensed unter the terms of http://www.aloha-editor.com/license.html
 */
// Start Closure
// Ensure GENTICS Namespace
GENTICS=window.GENTICS||{},GENTICS.Utils=GENTICS.Utils||{},define(["aloha/jquery"],function(a){var b=a,c=window.GENTICS,d=window.Class,e=window.console;c.Utils.Position={},c.Utils.Position.w=a(window),c.Utils.Position.Scroll={top:0,left:0,isScrolling:!1},c.Utils.Position.ScrollCorrection={top:100,left:50},c.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0},c.Utils.Position.mouseStopCallbacks=[],c.Utils.Position.mouseMoveCallbacks=[],c.Utils.Position.update=function(){var a=this.w.scrollTop(),b=this.w.scrollLeft(),c;if(this.Scroll.isScrolling)this.Scroll.top==a&&this.Scroll.left==b&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=a||this.Scroll.left!=b)this.Scroll.isScrolling=!0;this.Scroll.top=a,this.Scroll.left=b;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){this.Mouse.isMoving=!1;if(!this.Mouse.triggeredMouseStop){this.Mouse.triggeredMouseStop=!0;for(c=0;c<this.mouseStopCallbacks.length;c++)this.mouseStopCallbacks[c].call()}}else{this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1;for(c=0;c<this.mouseMoveCallbacks.length;c++)this.mouseMoveCallbacks[c].call()}this.Mouse.oldX=this.Mouse.x,this.Mouse.oldY=this.Mouse.y},c.Utils.Position.addMouseStopCallback=function(a){return this.mouseStopCallbacks.push(a),this.mouseStopCallbacks.length-1},c.Utils.Position.addMouseMoveCallback=function(a){return this.mouseMoveCallbacks.push(a),this.mouseMoveCallbacks.length-1},a(function(){setInterval(function(){c.Utils.Position.update()},500)}),a("html").mousemove(function(a){c.Utils.Position.Mouse.x=a.pageX,c.Utils.Position.Mouse.y=a.pageY})});