/*!
 * This file is part of Aloha Editor
 * Author & Copyright (c) 2010 Gentics Software GmbH, aloha@gentics.com
 * Licensed unter the terms of http://www.aloha-editor.com/license.html
 */
// Start Closure
// Ensure GENTICS Namespace
GENTICS=window.GENTICS||{},GENTICS.Utils=GENTICS.Utils||{},define(["aloha/jquery"],function(e){var t=e,n=window.GENTICS,r=window.Class,i=window.console;n.Utils.Position={},n.Utils.Position.w=e(window),n.Utils.Position.Scroll={top:0,left:0,isScrolling:!1},n.Utils.Position.ScrollCorrection={top:100,left:50},n.Utils.Position.Mouse={x:0,y:0,oldX:0,oldY:0,isMoving:!1,triggeredMouseStop:!0},n.Utils.Position.mouseStopCallbacks=[],n.Utils.Position.mouseMoveCallbacks=[],n.Utils.Position.update=function(){var e=this.w.scrollTop(),t=this.w.scrollLeft(),n;if(this.Scroll.isScrolling)this.Scroll.top==e&&this.Scroll.left==t&&(this.Scroll.isScrolling=!1);else if(this.Scroll.top!=e||this.Scroll.left!=t)this.Scroll.isScrolling=!0;this.Scroll.top=e,this.Scroll.left=t;if(this.Mouse.x==this.Mouse.oldX&&this.Mouse.y==this.Mouse.oldY){this.Mouse.isMoving=!1;if(!this.Mouse.triggeredMouseStop){this.Mouse.triggeredMouseStop=!0;for(n=0;n<this.mouseStopCallbacks.length;n++)this.mouseStopCallbacks[n].call()}}else{this.Mouse.isMoving=!0,this.Mouse.triggeredMouseStop=!1;for(n=0;n<this.mouseMoveCallbacks.length;n++)this.mouseMoveCallbacks[n].call()}this.Mouse.oldX=this.Mouse.x,this.Mouse.oldY=this.Mouse.y},n.Utils.Position.addMouseStopCallback=function(e){return this.mouseStopCallbacks.push(e),this.mouseStopCallbacks.length-1},n.Utils.Position.addMouseMoveCallback=function(e){return this.mouseMoveCallbacks.push(e),this.mouseMoveCallbacks.length-1},e(function(){setInterval(function(){n.Utils.Position.update()},500)}),e("html").mousemove(function(e){n.Utils.Position.Mouse.x=e.pageX,n.Utils.Position.Mouse.y=e.pageY})});