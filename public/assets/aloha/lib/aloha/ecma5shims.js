/**
 * ecma5schims.js - Shim for ECMA5 compatibility
 * (http://en.wikipedia.org/wiki/Shim_%28computing%29)
 *
 * A shim library that implements common functions that are missing on some
 * environments in order to complete ECMA5 compatibility across all major
 * browsers.
 *
 * TODO: This code needs to be refactored so as to conform to Aloha coding
 *       standards.  It is also severly lacking in documentation.  Please take
 *       note of: https://github.com/alohaeditor/Aloha-Editor/wiki/Commit-Checklist .
 */
define([],function(){var a={bind:function(a){var b=this.obj||this,c=Function.prototype.bind,d=Array.prototype.slice.call(arguments,1);return c?c.apply(b,arguments):function(){return b.apply(a,arguments.length===0?d:d.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var a=this.obj||this,b=String.prototype.trim;return b?b.call(a):a.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(a,b){var c=this.obj||this,d=Array.prototype.indexOf;if(d)return d.call(c,a,b);b===undefined&&(b=0),b<0&&(b+=c.length),b<0&&(b=0);for(var e=c.length;b<e;b++)if(b in c&&c[b]===a)return b;return-1},forEach:function(a,b){var c=this.obj||this,d=Array.prototype.forEach;if(d)return d.call(c,a,b);for(var e=0,f=c.length;e<f;e++)e in c&&a.call(b,c[e],e,c)},map:function(a,c,d){var e=this.obj||this,f=Array.prototype.map,g=typeof arguments[arguments.length-1]=="boolean"?Array.prototype.pop.call(arguments):!1,h=[];if(f)h=f.call(e,a,c);else{var i=new Array(e.length);for(var j=0,k=e.length;j<k;j++)j in e&&(i[j]=a.call(c,e[j],j,e));h=i}return g?b(h):h},filter:function(a,c,d){var e=this.obj||this,f=Array.prototype.filter,g=typeof arguments[arguments.length-1]=="boolean"?Array.prototype.pop.call(arguments):!1,h=[];if(f)h=f.call(e,a,c);else{var i=[],j;for(var k=0,l=e.length;k<l;k++)k in e&&a.call(c,j=e[k],k,e)&&i.push(j);h=i}return g?b(h):h},every:function(a,b){var c=this.obj||this,d=Array.prototype.every;if(d)return d.call(c,a,b);for(var e=0,f=c.length;e<f;e++)if(e in c&&!a.call(b,c[e],e,c))return!1;return!0},some:function(a,b){var c=this.obj||this,d=Array.prototype.some;if(d)return d.call(c,a,b);for(var e=0,f=c.length;e<f;e++)if(e in c&&a.call(b,c[e],e,c))return!0;return!1},hasAttribute:function(a){var b=this.obj||this,c=b.hasAttribute;return c?b.hasAttribute(a):typeof b.attributes[a]!="undefined"}},b=function(b){var c=function(){};c.prototype=a;var d=new c;return d.obj=b,d};for(var c in a)b[c]=a[c];return typeof Node!="undefined"?b.Node=Node:b.Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32},b.compareDocumentPosition=function(a,b){function f(a){var b=null;if(a)do b=a;while(a=a.parentNode);return b}function g(a,b){return(a.contains(b)&&16)+(b.contains(a)&&8)+(a.sourceIndex>=0&&b.sourceIndex>=0?(a.sourceIndex<b.sourceIndex&&4)+(a.sourceIndex>b.sourceIndex&&2):1)}function h(a){return"sourceIndex"in a?a:a.parentNode.insertBefore(document.createComment(""),a)}if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b);if("contains"in document.documentElement){if(a==b)return 0;if(f(a)!=f(b))return 1;if("sourceIndex"in a&&"sourceIndex"in b)return g(a,b);if(a==document)return 20;if(b==document)return 10;var c=h(a),d=h(b),e=g(c,d);return a!=c&&c.parentNode.removeChild(c),b!=d&&d.parentNode.removeChild(d),e}throw"compareDocumentPosition nor contains is not supported by this browser."},b.getComputedStyle=function(a,b){return"getComputedStyle"in window?window.getComputedStyle(a,b):a.currentStyle?a.currentStyle:null},b});