/**
 * ecma5schims.js - Shim for ECMA5 compatibility
 * (http://en.wikipedia.org/wiki/Shim_%28computing%29)
 *
 * A shim library that implements common functions that are missing on some
 * environments in order to complete ECMA5 compatibility across all major
 * browsers.
 *
 * TODO: This code needs to be refactored so as to conform to Aloha coding
 *       standards.  It is also severly lacking in documentation.  Please take
 *       note of: https://github.com/alohaeditor/Aloha-Editor/wiki/Commit-Checklist .
 */
define([],function(){var e={bind:function(e){var t=this.obj||this,n=Function.prototype.bind,r=Array.prototype.slice.call(arguments,1);return n?n.apply(t,arguments):function(){return t.apply(e,arguments.length===0?r:r.concat(Array.prototype.slice.call(arguments)))}},trim:function(){var e=this.obj||this,t=String.prototype.trim;return t?t.call(e):e.replace(/^\s+/,"").replace(/\s+$/,"")},indexOf:function(e,t){var n=this.obj||this,r=Array.prototype.indexOf;if(r)return r.call(n,e,t);t===undefined&&(t=0),t<0&&(t+=n.length),t<0&&(t=0);for(var i=n.length;t<i;t++)if(t in n&&n[t]===e)return t;return-1},forEach:function(e,t){var n=this.obj||this,r=Array.prototype.forEach;if(r)return r.call(n,e,t);for(var i=0,s=n.length;i<s;i++)i in n&&e.call(t,n[i],i,n)},map:function(e,n,r){var i=this.obj||this,s=Array.prototype.map,o=typeof arguments[arguments.length-1]=="boolean"?Array.prototype.pop.call(arguments):!1,u=[];if(s)u=s.call(i,e,n);else{var a=new Array(i.length);for(var f=0,l=i.length;f<l;f++)f in i&&(a[f]=e.call(n,i[f],f,i));u=a}return o?t(u):u},filter:function(e,n,r){var i=this.obj||this,s=Array.prototype.filter,o=typeof arguments[arguments.length-1]=="boolean"?Array.prototype.pop.call(arguments):!1,u=[];if(s)u=s.call(i,e,n);else{var a=[],f;for(var l=0,c=i.length;l<c;l++)l in i&&e.call(n,f=i[l],l,i)&&a.push(f);u=a}return o?t(u):u},every:function(e,t){var n=this.obj||this,r=Array.prototype.every;if(r)return r.call(n,e,t);for(var i=0,s=n.length;i<s;i++)if(i in n&&!e.call(t,n[i],i,n))return!1;return!0},some:function(e,t){var n=this.obj||this,r=Array.prototype.some;if(r)return r.call(n,e,t);for(var i=0,s=n.length;i<s;i++)if(i in n&&e.call(t,n[i],i,n))return!0;return!1},hasAttribute:function(e){var t=this.obj||this,n=t.hasAttribute;return n?t.hasAttribute(e):typeof t.attributes[e]!="undefined"}},t=function(t){var n=function(){};n.prototype=e;var r=new n;return r.obj=t,r};for(var n in e)t[n]=e[n];return typeof Node!="undefined"?t.Node=Node:t.Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32},t.compareDocumentPosition=function(e,t){function s(e){var t=null;if(e)do t=e;while(e=e.parentNode);return t}function o(e,t){return(e.contains(t)&&16)+(t.contains(e)&&8)+(e.sourceIndex>=0&&t.sourceIndex>=0?(e.sourceIndex<t.sourceIndex&&4)+(e.sourceIndex>t.sourceIndex&&2):1)}function u(e){return"sourceIndex"in e?e:e.parentNode.insertBefore(document.createComment(""),e)}if("compareDocumentPosition"in document.documentElement)return e.compareDocumentPosition(t);if("contains"in document.documentElement){if(e==t)return 0;if(s(e)!=s(t))return 1;if("sourceIndex"in e&&"sourceIndex"in t)return o(e,t);if(e==document)return 20;if(t==document)return 10;var n=u(e),r=u(t),i=o(n,r);return e!=n&&n.parentNode.removeChild(n),t!=r&&r.parentNode.removeChild(r),i}throw"compareDocumentPosition nor contains is not supported by this browser."},t.getComputedStyle=function(e,t){return"getComputedStyle"in window?window.getComputedStyle(e,t):e.currentStyle?e.currentStyle:null},t});