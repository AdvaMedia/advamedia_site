/**
 * editor_plugin_src.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://tinymce.moxiecode.com/license
 * Contributing: http://tinymce.moxiecode.com/contributing
 */
(function(){var e=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(t,r){var i=this,s={},o,u;i.editor=t,t.addCommand("mceFullScreen",function(){var a,f=e.doc.documentElement;if(t.getParam("fullscreen_is_enabled")){t.getParam("fullscreen_new_window")?closeFullscreen():e.win.setTimeout(function(){tinymce.dom.Event.remove(e.win,"resize",i.resizeFunc),tinyMCE.get(t.getParam("fullscreen_editor_id")).setContent(t.getContent()),tinyMCE.remove(t),e.remove("mce_fullscreen_container"),f.style.overflow=t.getParam("fullscreen_html_overflow"),e.setStyle(e.doc.body,"overflow",t.getParam("fullscreen_overflow")),e.win.scrollTo(t.getParam("fullscreen_scrollx"),t.getParam("fullscreen_scrolly")),tinyMCE.settings=tinyMCE.oldSettings},10);return}if(t.getParam("fullscreen_new_window")){a=e.win.open(r+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{a.resizeTo(screen.availWidth,screen.availHeight)}catch(l){}}else tinyMCE.oldSettings=tinyMCE.settings,s.fullscreen_overflow=e.getStyle(e.doc.body,"overflow",1)||"auto",s.fullscreen_html_overflow=e.getStyle(f,"overflow",1),o=e.getViewPort(),s.fullscreen_scrollx=o.x,s.fullscreen_scrolly=o.y,tinymce.isOpera&&s.fullscreen_overflow=="visible"&&(s.fullscreen_overflow="auto"),tinymce.isIE&&s.fullscreen_overflow=="scroll"&&(s.fullscreen_overflow="auto"),tinymce.isIE&&(s.fullscreen_html_overflow=="visible"||s.fullscreen_html_overflow=="scroll")&&(s.fullscreen_html_overflow="auto"),s.fullscreen_overflow=="0px"&&(s.fullscreen_overflow=""),e.setStyle(e.doc.body,"overflow","hidden"),f.style.overflow="hidden",o=e.getViewPort(),e.win.scrollTo(0,0),tinymce.isIE&&(o.h-=1),tinymce.isIE6?u="absolute;top:"+o.y:u="fixed;top:0",n=e.add(e.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+u+";left:0;width:"+o.w+"px;height:"+o.h+"px;z-index:200000;"}),e.add(n,"div",{id:"mce_fullscreen"}),tinymce.each(t.settings,function(e,t){s[t]=e}),s.id="mce_fullscreen",s.width=n.clientWidth,s.height=n.clientHeight-15,s.fullscreen_is_enabled=!0,s.fullscreen_editor_id=t.id,s.theme_advanced_resizing=!1,s.save_onsavecallback=function(){t.setContent(tinyMCE.get(s.id).getContent()),t.execCommand("mceSave")},tinymce.each(t.getParam("fullscreen_settings"),function(e,t){s[t]=e}),s.theme_advanced_toolbar_location==="external"&&(s.theme_advanced_toolbar_location="top"),i.fullscreenEditor=new tinymce.Editor("mce_fullscreen",s),i.fullscreenEditor.onInit.add(function(){i.fullscreenEditor.setContent(t.getContent()),i.fullscreenEditor.focus()}),i.fullscreenEditor.render(),i.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container"),i.fullscreenElement.update(),i.resizeFunc=tinymce.dom.Event.add(e.win,"resize",function(){var e=tinymce.DOM.getViewPort(),t=i.fullscreenEditor,n,r;n=t.dom.getSize(t.getContainer().firstChild),r=t.dom.getSize(t.getContainer().getElementsByTagName("iframe")[0]),t.theme.resizeTo(e.w-n.w+r.w,e.h-n.h+r.h)})}),t.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"}),t.onNodeChange.add(function(e,t){t.setActive("fullscreen",e.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();