(function(){var e=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(t,n){function i(t){var n=[];return e(t.split(/,/),function(e){n.push({title:"advlist."+(e=="default"?"def":e.replace(/-/g,"_")),styles:{listStyleType:e=="default"?"":e}})}),n}var r=this;r.editor=t,r.numlist=t.getParam("advlist_number_styles")||i("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),r.bullist=t.getParam("advlist_bullet_styles")||i("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(r.isIE7=!0)},createControl:function(t,n){var r=this,i,s,o=r.editor;if(t=="numlist"||t=="bullist"){r[t][0].title=="advlist.def"&&(s=r[t][0]);function u(t,n){var r=!0;return e(n.styles,function(e,n){if(o.dom.getStyle(t,n)!=e)return r=!1,!1}),r}function f(){var e,n=o.dom,r=o.selection;e=n.getParent(r.getNode(),"ol,ul"),(!e||e.nodeName==(t=="bullist"?"OL":"UL")||u(e,s))&&o.execCommand(t=="bullist"?"InsertUnorderedList":"InsertOrderedList"),s&&(e=n.getParent(r.getNode(),"ol,ul"),e&&(n.setStyles(e,s.styles),e.removeAttribute("data-mce-style"))),o.focus()}return i=n.createSplitButton(t,{title:"advanced."+t+"_desc","class":"mce_"+t,onclick:function(){f()}}),i.onRenderMenu.add(function(n,i){i.onHideMenu.add(function(){r.bookmark&&(o.selection.moveToBookmark(r.bookmark),r.bookmark=0)}),i.onShowMenu.add(function(){var n=o.dom,f=n.getParent(o.selection.getNode(),"ol,ul"),l;if(f||s)l=r[t],e(i.items,function(t){var n=!0;t.setSelected(0),f&&!t.isDisabled()&&(e(l,function(e){if(e.id==t.id&&!u(f,e))return n=!1,!1}),n&&t.setSelected(1))}),f||i.items[s.id].setSelected(1);o.focus(),tinymce.isIE&&(r.bookmark=o.selection.getBookmark(1))}),i.add({id:o.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),e(r[t],function(e){if(r.isIE7&&e.styles.listStyleType=="lower-greek")return;e.id=o.dom.uniqueId(),i.add({id:e.id,title:e.title,onclick:function(){s=e,f()}})})}),i}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();