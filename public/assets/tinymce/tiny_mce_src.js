(function(e){var t=/^\s*|\s*$/g,n,r="B".replace(/A(.)|B/,"$1")==="$1",i={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function c(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(t.suffix="_src"),(f=e.src.indexOf("?"))!=-1&&(t.query=e.src.substring(f+1)),t.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),a&&t.baseURL.indexOf("://")==-1&&t.baseURL.indexOf("/")!==0&&(t.baseURL=a+t.baseURL),t.baseURL):null}var t=this,n=document,r=navigator,i=r.userAgent,s,o,u,a,f,l;t.isOpera=e.opera&&opera.buildNumber,t.isWebKit=/WebKit/.test(i),t.isIE=!t.isWebKit&&!t.isOpera&&/MSIE/gi.test(i)&&/Explorer/gi.test(r.appName),t.isIE6=t.isIE&&/MSIE [56]/.test(i),t.isIE7=t.isIE&&/MSIE [7]/.test(i),t.isIE8=t.isIE&&/MSIE [8]/.test(i),t.isIE9=t.isIE&&/MSIE [9]/.test(i),t.isGecko=!t.isWebKit&&/Gecko/.test(i),t.isMac=i.indexOf("Mac")!=-1,t.isAir=/adobeair/i.test(i),t.isIDevice=/(iPad|iPhone)/.test(i),t.isIOS5=t.isIDevice&&i.match(/AppleWebKit\/(\d*)/)[1]>=534;if(e.tinyMCEPreInit){t.suffix=tinyMCEPreInit.suffix,t.baseURL=tinyMCEPreInit.base,t.query=tinyMCEPreInit.query;return}t.suffix="",o=n.getElementsByTagName("base");for(s=0;s<o.length;s++)if(l=o[s].href)/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),a=l?l.match(/.*\//)[0]:"";o=n.getElementsByTagName("script");for(s=0;s<o.length;s++)if(c(o[s]))return;u=n.getElementsByTagName("head")[0];if(u){o=u.getElementsByTagName("script");for(s=0;s<o.length;s++)if(c(o[s]))return}return},is:function(e,t){return t?t=="array"&&e.hasOwnProperty&&e instanceof Array?!0:typeof e==t:e!==n},makeMap:function(e,t,n){var r;e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},r=e.length;while(r--)n[e[r]]={};return n},each:function(e,t,r){var i,s;if(!e)return 0;r=r||e;if(e.length!==n){for(i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&t.call(r,e[i],i,e)===!1)return 0;return 1},map:function(e,t){var n=[];return i.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return i.each(e,function(e){(!t||t(e))&&n.push(e)}),n},inArray:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},extend:function(e,t){var r,s,o=arguments;for(r=1,s=o.length;r<s;r++)t=o[r],i.each(t,function(t,r){t!==n&&(e[r]=t)});return e},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var r=this,i,s,o,u,a,f=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n);if(s[o])return;if(e[2]=="static"){s[o]=t,this.onCreate&&this.onCreate(e[2],e[3],s[o]);return}t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],f?s[o]=function(){return i[u].apply(this,arguments)}:s[o]=function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],s[o].prototype)},walk:function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),i.each(e,function(e,o){if(t.call(r,e,o,n)===!1)return!1;i.walk(e,t,n,r)}))},createNS:function(t,n){var r,i;n=n||e,t=t.split(".");for(r=0;r<t.length;r++)i=t[r],n[i]||(n[i]={}),n=n[i];return n},resolve:function(t,n){var r,i;n=n||e,t=t.split(".");for(r=0,i=t.length;r<i;r++){n=n[t[r]];if(!n)break}return n},addUnload:function(t,n){var r=this;t={func:t,scope:n||this};if(!r.unloads){function i(){var t=r.unloads,n,o;if(t){for(o in t)n=t[o],n&&n.func&&n.func.call(n.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",s),e.detachEvent("onunload",i)):e.removeEventListener&&e.removeEventListener("unload",i,!1),r.unloads=n=t=w=i=0,e.CollectGarbage&&CollectGarbage()}}function s(){var t=document;if(t.readyState=="interactive"){function n(){t.detachEvent("onstop",n),i&&i(),t=0}t&&t.attachEvent("onstop",n),e.setTimeout(function(){t&&t.detachEvent("onstop",n)},0)}}e.attachEvent?(e.attachEvent("onunload",i),e.attachEvent("onbeforeunload",s)):e.addEventListener&&e.addEventListener("unload",i,!1),r.unloads=[t]}else r.unloads.push(t);return t},removeUnload:function(e){var t=this.unloads,n=null;return i.each(t,function(r,i){if(r&&r.func==e)return t.splice(i,1),n=e,!1}),n},explode:function(e,t){return e?i.map(e.split(t||","),i.trim):e},_addVer:function(e){var t;return this.query?(t=(e.indexOf("?")==-1?"?":"&")+this.query,e.indexOf("#")==-1?e+t:e.replace("#",t+"#")):e},_replace:function(e,t,i){return r?i.replace(e,function(){var e=t,r=arguments,i;for(i=0;i<r.length-2;i++)r[i]===n?e=e.replace(new RegExp("\\$"+i,"g"),""):e=e.replace(new RegExp("\\$"+i,"g"),r[i]);return e}):i.replace(e,t)}};i._init(),e.tinymce=e.tinyMCE=i})(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){return this.listeners.unshift({cb:e,scope:t||this.scope}),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(r,i){if(e==r.cb)return n=e,t.splice(i,1),!1}),n},dispatch:function(){var e,t=arguments,n,r=this.listeners,i;for(n=0;n<r.length;n++){i=r[n],e=i.cb.apply(i.scope,t);if(e===!1)break}return e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var r=this,i,s,o,u;t=tinymce.trim(t),n=r.settings=n||{};if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){r.source=t;return}t.indexOf("/")===0&&t.indexOf("//")!==0&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w-]*:?\/\//.test(t)||(u=n.base_uri?n.base_uri.path:(new tinymce.util.URI(location.href)).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(u,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),r[e]=i});if(o=n.base_uri){r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),!r.port&&r.host=="mce_host"&&(r.port=o.port);if(!r.host||r.host=="mce_host")r.host=o.host;r.source=""}},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,n;return e==="./"?e:(e=new tinymce.util.URI(e,{base_uri:t}),e.host!="mce_host"&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol?e.getURI():(n=t.toRelPath(t.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n))},toAbsolute:function(e,t){var e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/");if(e.length>=n.length)for(s=0,o=e.length;s<o;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;s<o;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(r==1)return t;for(s=0,o=e.length-(r-1);s<o;s++)i+="../";for(s=r-1,o=n.length;s<o;s++)s!=r-1?i+="/"+n[s]:i+=n[s];return i},toAbsPath:function(t,n){var r,i=0,s=[],o,u;o=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&s.push(e)}),t=s;for(r=n.length-1,s=[];r>=0;r--){if(n[r].length==0||n[r]==".")continue;if(n[r]==".."){i++;continue}if(i>0){i--;continue}s.push(n[r])}return r=t.length-i,r<=0?u=s.reverse().join("/"):u=t.slice(0,r).join("/")+"/"+s.reverse().join("/"),u.indexOf("/")!==0&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;if(!n.source||e)t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t;return n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n=this.get(t),r;return n&&e(n.split("&"),function(e){e=e.split("="),r=r||{},r[unescape(e[0])]=unescape(e[1])}),r},setHash:function(t,n,r,i,s,o){var u="";e(n,function(e,t){u+=(u?"&":"")+escape(t)+"="+escape(e)}),this.set(t,u,r,i,s,o)},get:function(e){var t=document.cookie,n,r=e+"=",i;if(!t)return;i=t.indexOf("; "+r);if(i==-1){i=t.indexOf(r);if(i!=0)return null}else i+=2;return n=t.indexOf(";",i),n==-1&&(n=t.length),unescape(t.substring(i+r.length,n))},set:function(e,t,n,r,i,s){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+escape(r):"")+(i?"; domain="+i:"")+(s?"; secure":"")},remove:function(e,t){var n=new Date;n.setTime(n.getTime()-1e3),this.set(e,"",n,t,n)}})}(),function(){function serialize(e,t){var n,r,i;t=t||'"';if(e==null)return"null";i=typeof e;if(i=="string")return r="\bb	t\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return t==='"'&&e==="'"?e:(n=r.indexOf(i),n+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if(i=="object"){if(e.hasOwnProperty&&e instanceof Array){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+serialize(e[n],t);return r+"]"}r="{";for(n in e)e.hasOwnProperty(n)&&(r+=typeof e[n]!="function"?(r.length>1?","+t:t)+n+t+":"+serialize(e[n],t):"");return r+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function s(e){t=0;try{t=new ActiveXObject(e)}catch(n){}return t}var t,n,r=window,i=0;e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",t=r.XMLHttpRequest?new XMLHttpRequest:s("Microsoft.XMLHTTP")||s("Msxml2.XMLHTTP");if(t){t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(e.data);function o(){!e.async||t.readyState==4||i++>1e4?(e.success&&i<1e4&&t.status==200?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):r.setTimeout(o,10)}if(!e.async)return o();n=r.setTimeout(o,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(r){var i=r.error,s=r.success;r=e(this.settings,r),r.success=function(e,n){e=t.parse(e),typeof e=="undefined"&&(e={error:"JSON Parse error."}),e.error?i.call(r.error_scope||r.scope,e.error,n):s.call(r.success_scope||r.scope,e.result)},r.error=function(e,t){i&&i.call(r.error_scope||r.scope,e,t)},r.data=t.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params}),r.content_type="application/json",n.send(r)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(e){function i(t){var i=t.dom,s=t.selection;t.onKeyDown.add(function(t,o){var u,a,f,l,c;c=o.keyCode==r;if(c||o.keyCode==n){o.preventDefault(),u=s.getRng(),a=i.getParent(u.startContainer,i.isBlock),c&&(a=i.getNext(a,i.isBlock));if(a){f=a.firstChild;while(f&&f.nodeType==3&&f.nodeValue.length==0)f=f.nextSibling;f&&f.nodeName==="SPAN"&&(l=f.cloneNode(!1))}t.getDoc().execCommand(c?"ForwardDelete":"Delete",!1,null),a=i.getParent(u.startContainer,i.isBlock),e.each(i.select("span.Apple-style-span,font.Apple-style-span",a),function(e){var t=s.getBookmark();l?i.replace(l.cloneNode(!1),e,!0):i.remove(e,!0),s.moveToBookmark(t)})}})}function s(e){e.onKeyUp.add(function(e,t){var i=t.keyCode;if(i==r||i==n)if(e.dom.isEmpty(e.getBody())){e.setContent("",{format:"raw"}),e.nodeChanged();return}})}function o(e){e.dom.bind(e.getDoc(),"focusin",function(){e.selection.setRng(e.selection.getRng())})}function u(t){t.onKeyDown.add(function(t,r){if(r.keyCode===n&&t.selection.isCollapsed()&&t.selection.getRng(!0).startOffset===0){var i=t.selection.getNode(),s=i.previousSibling;s&&s.nodeName&&s.nodeName.toLowerCase()==="hr"&&(t.dom.remove(s),e.dom.Event.cancel(r))}})}function a(e){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){if(t.target.nodeName==="HTML"){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function f(e){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&e.selection.getSel().setBaseAndExtent(t,0,t,1),t.nodeName=="A"&&e.dom.hasClass(t,"mceItemAnchor")&&e.selection.select(t),e.nodeChanged()})}function l(t){var n,r;t.dom.bind(t.getDoc(),"selectionchange",function(){r&&(clearTimeout(r),r=0),r=window.setTimeout(function(){var r=t.selection.getRng();if(!n||!e.dom.RangeUtils.compareRanges(r,n))t.nodeChanged(),n=r},50)})}function c(e){document.body.setAttribute("role","application")}var t=e.VK,n=t.BACKSPACE,r=t.DELETE;e.create("tinymce.util.Quirks",{Quirks:function(t){e.isWebKit&&(i(t),s(t),o(t),f(t),e.isIDevice&&l(t)),e.isIE&&(u(t),s(t),c(t)),e.isGecko&&(u(t),a(t))}})}(tinymce),function(e){function f(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function l(e,t){var r,i,s,o={};if(e){e=e.split(","),t=t||10;for(r=0;r<e.length;r+=2)i=String.fromCharCode(parseInt(e[r],t)),n[i]||(s="&"+e[r+1]+";",o[i]=s,o[s]=i);return o}}var t,n,r,i=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,a={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};n={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},t=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?i:s,function(e){return n[e]||e})},encodeAllRaw:function(e){return(""+e).replace(o,function(e){return n[e]||e})},encodeNumeric:function(e,t){return e.replace(t?i:s,function(e){return e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":n[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,r,o){return o=o||t,e.replace(r?i:s,function(e){return n[e]||o[e]||e})},getEncodeFunc:function(r,o){function a(e,t){return e.replace(t?i:s,function(e){return n[e]||o[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,t){return u.encodeNamed(e,t,o)}var u=e.html.Entities;return o=l(o)||t,r=e.makeMap(r.replace(/\+/g,",")),r.named&&r.numeric?a:r.named?o?f:u.encodeNamed:r.numeric?u.encodeNumeric:u.encodeRaw},decode:function(e){return e.replace(u,function(e,n,i){return n?(i=parseInt(i,n.length===2?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(i&1023))):a[i]||String.fromCharCode(i)):r[e]||t[e]||f(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function c(e,t,n,r){function i(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,o=/rgb/,u,a,f={},l;e=e||{},l="\\\" \\' \\; \\: ; : ﻿".split(" ");for(a=0;a<l.length;a++)f[l[a]]="﻿"+a,f["﻿"+a]=l[a];return{toHex:function(e){return e.replace(n,c)},parse:function(t){function v(e,t){var n,r,i,s;n=o[e+"-top"+t];if(!n)return;r=o[e+"-right"+t];if(n!=r)return;i=o[e+"-bottom"+t];if(r!=i)return;s=o[e+"-left"+t];if(i!=s)return;o[e+t]=s,delete o[e+"-top"+t],delete o[e+"-right"+t],delete o[e+"-bottom"+t],delete o[e+"-left"+t]}function m(e){var t=o[e],n;if(!t||t.indexOf(" ")<0)return;t=t.split(" "),n=t.length;while(n--)if(t[n]!==t[0])return!1;return o[e]=t[0],!0}function g(e,t,n,r){if(!m(t))return;if(!m(n))return;if(!m(r))return;o[e]=o[t]+" "+o[n]+" "+o[r],delete o[t],delete o[n],delete o[r]}function y(e){return h=!0,f[e]}function b(e,t){return h&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}var o={},u,a,l,h,p=e.url_converter,d=e.url_converter_scope||this;if(t){t=t.replace(/\\[\"\';:\uFEFF]/g,y).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,y)});while(u=i.exec(t)){a=u[1].replace(s,"").toLowerCase(),l=u[2].replace(s,"");if(a&&l.length>0){if(a==="font-weight"&&l==="700")l="bold";else if(a==="color"||a==="background-color")l=l.toLowerCase();l=l.replace(n,c),l=l.replace(r,function(e,t,n,r,i,s){return i=i||s,i?(i=b(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=b(t||n||r),p&&(t=p.call(d,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}),o[a]=h?b(l,!0):l}i.lastIndex=u.index+u[0].length}v("border",""),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),g("border","border-width","border-style","border-color"),o.border==="medium none"&&delete o.border}return o},serialize:function(e,n){function o(n){var i,s,o,a;i=t.styles[n];if(i)for(s=0,o=i.length;s<o;s++)n=i[s],a=e[n],a!==u&&a.length>0&&(r+=(r.length>0?" ":"")+n+": "+a+";")}var r="",i,s;if(n&&t&&t.styles)o("*"),o(n);else for(i in e)s=e[i],s!==u&&s.length>0&&(r+=(r.length>0?" ":"")+i+": "+s+";");return r}}},function(e){function c(e,t){return e.split(t||",")}function h(e,t){function i(t){return t.replace(/[A-Z]+/g,function(t){return i(e[t])})}var n,r={};for(n in e)e.hasOwnProperty(n)&&(e[n]=i(e[n]));return i(t).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,t,n,i){n=c(n,"|"),r[t]={attributes:f(n),attributesOrder:n,children:f(i,"|",{"#comment":{}})}}),r}var t={},n,r,i,s,o={},u,a,f=e.makeMap,l=e.each;r="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",r=f(r,",",f(r.toUpperCase())),t=h({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),n=f("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),i=f("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),s=e.extend(f("td,th,iframe,video,audio,object"),i),u=f("pre,script,style,textarea"),a=f("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),e.html.Schema=function(h){function b(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function w(t){var n,r,i,s,o,u,a,l,h,p,v,g,y,w,E,S,x,T,N,C,k,L,A=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,O=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,M=/[*?+]/;if(t){t=c(t),d["@"]&&(x=d["@"].attributes,T=d["@"].attributesOrder);for(n=0,r=t.length;n<r;n++){u=A.exec(t[n]);if(u){E=u[1],p=u[2],S=u[3],h=u[4],y={},w=[],a={attributes:y,attributesOrder:w},E==="#"&&(a.paddEmpty=!0),E==="-"&&(a.removeEmpty=!0);if(x){for(C in x)y[C]=x[C];w.push.apply(w,T)}if(h){h=c(h,"|");for(i=0,s=h.length;i<s;i++){u=O.exec(h[i]);if(u){l={},g=u[1],v=u[2].replace(/::/g,":"),E=u[3],L=u[4],g==="!"&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(v),l.required=!0);if(g==="-"){delete y[v],w.splice(e.inArray(w,v),1);continue}E&&(E==="="&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:v,value:L}),l.defaultValue=L),E===":"&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:v,value:L}),l.forcedValue=L),E==="<"&&(l.validValues=f(L,"?"))),M.test(v)?(a.attributePatterns=a.attributePatterns||[],l.pattern=b(v),a.attributePatterns.push(l)):(y[v]||w.push(v),y[v]=l)}}}!x&&p=="@"&&(x=y,T=w),S&&(a.outputName=p,d[S]=a),M.test(p)?(a.pattern=b(p),m.push(a)):d[p]=a}}}}function E(e){d={},m=[],w(e),l(t,function(e,t){v[t]=e.children})}function S(e){var t=/^(~)?(.+)$/;e&&l(c(e),function(e){var n=t.exec(e),i=n[1]==="~",s=i?"span":"div",u=n[2];v[u]=v[s],o[u]=s,i||(r[u]={}),l(v,function(e,t){e[s]&&(e[u]=e[s])})})}function x(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&l(c(e),function(e){var n=t.exec(e),r,i;n&&(i=n[1],i?r=v[n[2]]:r=v[n[2]]={"#comment":{}},r=v[n[2]],l(c(n[3],"|"),function(e){i==="-"?delete r[e]:r[e]={}}))})}function T(e){var t=d[e],n;if(t)return t;n=m.length;while(n--){t=m[n];if(t.pattern.test(e))return t}}var p=this,d={},v={},m=[],g,y;h=h||{},h.verify_html===!1&&(h.valid_elements="*[*]"),h.valid_styles&&(g={},l(h.valid_styles,function(t,n){g[n]=e.explode(t)})),y=h.whitespace_elements?f(h.whitespace_elements):u,h.valid_elements?E(h.valid_elements):(l(t,function(e,t){d[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},v[t]=e.children}),l(c("strong/b,em/i"),function(e){e=c(e,"/"),d[e[1]].outputName=e[0]}),d.img.attributesDefault=[{name:"alt",value:""}],l(c("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(e){d[e].removeEmpty=!0}),l(c("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){d[e].paddEmpty=!0})),S(h.custom_elements),x(h.valid_children),w(h.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),T("span")||w("span[!data-mce-type|*]"),h.invalid_elements&&e.each(e.explode(h.invalid_elements),function(e){d[e]&&delete d[e]}),p.children=v,p.styles=g,p.getBoolAttrs=function(){return n},p.getBlockElements=function(){return r},p.getShortEndedElements=function(){return i},p.getSelfClosingElements=function(){return a},p.getNonEmptyElements=function(){return s},p.getWhiteSpaceElements=function(){return y},p.isValidChild=function(e,t){var n=v[e];return!!n&&!!n[t]},p.getElementRule=T,p.getCustomElements=function(){return o},p.addValidElements=w,p.setValidElements=E,p.addCustomElements=S,p.addValidChildren=x},e.html.Schema.boolAttrMap=n,e.html.Schema.blockElementsMap=r}(tinymce),function(e){e.html.SaxParser=function(t,n){var r=this,i=function(){};t=t||{},r.schema=n=n||new e.html.Schema,t.fix_self_closing!==!1&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(r[e]=t[e]||i)}),r.parse=function(r){function I(e){var t,n;t=f.length;while(t--)if(f[t].name===e)break;if(t>=0){for(n=f.length-1;n>=t;n--)e=f[n],e.valid&&i.end(e.name);f.length=t}}var i=this,s,o=0,u,a,f=[],l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=0,B=e.html.Entities.decode,j,F;M=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),_=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,D={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},m=n.getShortEndedElements(),O=n.getSelfClosingElements(),g=n.getBoolAttrs(),b=t.validate,v=t.remove_internals,j=t.fix_self_closing,F=e.isIE,T=/^:/;while(s=M.exec(r)){o<s.index&&i.text(B(r.substr(o,s.index-o)));if(u=s[6])u=u.toLowerCase(),F&&T.test(u)&&(u=u.substr(1)),I(u);else if(u=s[7]){u=u.toLowerCase(),F&&T.test(u)&&(u=u.substr(1)),y=u in m,j&&O[u]&&f.length>0&&f[f.length-1].name===u&&I(u);if(!b||(w=n.getElementRule(u))){E=!0,b&&(N=w.attributes,C=w.attributePatterns),(x=s[8])?(d=x.indexOf("data-mce-type")!==-1,d&&v&&(E=!1),l=[],l.map={},x.replace(_,function(e,t,n,r,i){var s,o;t=t.toLowerCase(),n=t in g?t:B(n||r||i||"");if(b&&!d&&t.indexOf("data-")!==0){s=N[t];if(!s&&C){o=C.length;while(o--){s=C[o];if(s.pattern.test(t))break}o===-1&&(s=null)}if(!s)return;if(s.validValues&&!(n in s.validValues))return}l.map[t]=n,l.push({name:t,value:n})})):(l=[],l.map={});if(b&&!d){k=w.attributesRequired,L=w.attributesDefault,A=w.attributesForced;if(A){c=A.length;while(c--)S=A[c],p=S.name,P=S.value,P==="{$uid}"&&(P="mce_"+H++),l.map[p]=P,l.push({name:p,value:P})}if(L){c=L.length;while(c--)S=L[c],p=S.name,p in l.map||(P=S.value,P==="{$uid}"&&(P="mce_"+H++),l.map[p]=P,l.push({name:p,value:P}))}if(k){c=k.length;while(c--)if(k[c]in l.map)break;c===-1&&(E=!1)}l.map["data-mce-bogus"]&&(E=!1)}E&&i.start(u,l,y)}else E=!1;if(a=D[u]){a.lastIndex=o=s.index+s[0].length,(s=a.exec(r))?(E&&(h=r.substr(o,s.index-o)),o=s.index+s[0].length):(h=r.substr(o),o=r.length),E&&h.length>0&&i.text(h,!0),E&&i.end(u),M.lastIndex=o;continue}y||(!x||x.indexOf("/")!=x.length-1?f.push({name:u,valid:E}):E&&i.end(u))}else(u=s[1])?i.comment(u):(u=s[2])?i.cdata(u):(u=s[3])?i.doctype(u):(u=s[4])&&i.pi(u,s[5]);o=s.index+s[0].length}o<r.length&&i.text(B(r.substr(o)));for(c=f.length-1;c>=0;c--)u=f[c],u.valid&&i.end(u.name)}}}(tinymce),function(e){function r(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){r=e[o];if(r)return r;for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r)return r}}}function i(e,t){this.name=e,this.type=t,t===1&&(this.attributes=[],this.attributes.map={})}var t=/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(i.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if(typeof e!="string"){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(t===null){if(e in r.map){delete r.map[e],i=r.length;while(i--)if(r[i].name===e)return r=r.splice(i,1),n}return n}if(e in r.map){i=r.length;while(i--)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,t=new i(e.name,e.type),n,r,s,o,u;if(s=e.attributes){u=[],u.map={};for(n=0,r=s.length;n<r;n++)o=s[n],o.name!=="id"&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);t.attributes=u}return t.value=e.value,t.shortEnded=e.shortEnded,t},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(e){var t=this,n,i=[];for(n=t.firstChild;n;n=r(n,t))n.name===e&&i.push(n);return i},empty:function(){var e=this,t,n,i;if(e.firstChild){t=[];for(i=e.firstChild;i;i=r(i,e))t.push(i);n=t.length;while(n--)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(e){var n=this,i=n.firstChild
,s,o;if(i)do{if(i.type===1){if(i.attributes.map["data-mce-bogus"])continue;if(e[i.name])return!1;s=i.attributes.length;while(s--){o=i.attributes[s].name;if(o==="name"||o.indexOf("data-")===0)return!1}}if(i.type===3&&!t.test(i.value))return!1}while(i=r(i,n));return!0},walk:function(e){return r(this,null,e)}}),e.extend(i,{create:function(e,t){var r,s;r=new i(e,n[e]||1);if(t)for(s in t)r.attr(s,t[s]);return r}}),e.html.Node=i}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,r){function f(n){var s,o,u,a,f,l,c,h,p,d,v,m,g,y;m=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),v=r.getNonEmptyElements();for(s=0;s<n.length;s++){o=n[s];if(!o.parent)continue;a=[o];for(u=o.parent;u&&!r.isValidChild(u.name,o.name)&&!m[u.name];u=u.parent)a.push(u);if(u&&a.length>1){a.reverse(),f=l=i.filterNode(a[0].clone());for(p=0;p<a.length-1;p++){r.isValidChild(l.name,a[p].name)?(c=i.filterNode(a[p].clone()),l.append(c)):c=l;for(h=a[p].firstChild;h&&h!=a[p+1];)y=h.next,c.append(h),h=y;l=c}f.isEmpty(v)?u.insert(o,a[0],!0):(u.insert(f,a[0],!0),u.insert(o,f)),u=a[0],(u.isEmpty(v)||u.firstChild===u.lastChild&&u.firstChild.name==="br")&&u.empty().remove()}else if(o.parent){if(o.name==="li"){g=o.prev;if(!g||g.name!=="ul"&&g.name!=="ul"){g=o.next;if(!g||g.name!=="ul"&&g.name!=="ul"){o.wrap(i.filterNode(new t("ul",1)));continue}g.insert(o,g.firstChild,!0);continue}g.append(o);continue}r.isValidChild(o.parent.name,"div")&&r.isValidChild("div",o.name)?o.wrap(i.filterNode(new t("div",1))):o.name==="style"||o.name==="script"?o.empty().remove():o.unwrap()}}}var i=this,s={},o=[],u={},a={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",i.schema=r=r||new e.html.Schema,i.filterNode=function(e){var t,n,r;n in s&&(r=u[n],r?r.push(e):u[n]=[e]),t=o.length;while(t--)n=o[t].name,n in e.attributes.map&&(r=a[n],r?r.push(e):a[n]=[e]);return e},i.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=s[e];t||(s[e]=t=[]),t.push(n)})},i.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<o.length;t++)if(o[t].name===e){o[t].callbacks.push(n);return}o.push({name:e,callbacks:[n]})})},i.parse=function(i,l){function M(){var e=h.firstChild,t,n;while(e)t=e.next,e.type==3||e.type==1&&e.name!=="p"&&!S[e.name]&&!e.attr("data-mce-type")?n?n.append(e):(n=_(O,1),h.insert(n,e),n.append(e)):n=null,e=t}function _(e,n){var r=new t(e,n),i;return e in s&&(i=u[e],i?i.push(r):u[e]=[r]),r}function D(e){var t,n,r;for(t=e.prev;t&&t.type===3;)n=t.value.replace(N,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}var c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N,C,k,L,A,O;l=l||{},u={},a={},S=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),r.getBlockElements()),A=r.getNonEmptyElements(),L=r.children,E=n.validate,O="forced_root_block"in l?l.forced_root_block:n.forced_root_block,k=r.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,C=/[ \t\r\n]+/g,c=new e.html.SaxParser({validate:E,fix_self_closing:!E,cdata:function(e){p.append(_("#cdata",4)).value=e},text:function(e,t){var n;k[p.name]||(e=e.replace(C," "),p.lastChild&&S[p.lastChild.name]&&(e=e.replace(x,""))),e.length!==0&&(n=_("#text",3),n.raw=!!t,p.append(n).value=e)},comment:function(e){p.append(_("#comment",8)).value=e},pi:function(e,t){p.append(_(e,7)).value=t,D(p)},doctype:function(e){var t;t=p.append(_("#doctype",10)),t.value=e,D(p)},start:function(e,t,n){var i,s,u,f,l,c,h,d;u=E?r.getElementRule(e):{};if(u){i=_(u.outputName||e,1),i.attributes=t,i.shortEnded=n,p.append(i),d=L[p.name],d&&L[i.name]&&!d[i.name]&&T.push(i),s=o.length;while(s--)l=o[s].name,l in t.map&&(b=a[l],b?b.push(i):a[l]=[i]);S[e]&&D(i),n||(p=i)}},end:function(e){var n,i,s,o,u;i=E?r.getElementRule(e):{};if(i){if(S[e]){if(!k[p.name]){for(n=p.firstChild;n&&n.type===3;)s=n.value.replace(x,""),s.length>0?(n.value=s,n=n.next):(o=n.next,n.remove(),n=o);for(n=p.lastChild;n&&n.type===3;)s=n.value.replace(N,""),s.length>0?(n.value=s,n=n.prev):(o=n.prev,n.remove(),n=o)}n=p.prev,n&&n.type===3&&(s=n.value.replace(x,""),s.length>0?n.value=s:n.remove())}if(i.removeEmpty||i.paddEmpty)if(p.isEmpty(A))if(i.paddEmpty)p.empty().append(new t("#text","3")).value=" ";else if(!p.attributes.map.name){u=p.parent,p.empty().remove(),p=u;return}p=p.parent}}},r),h=p=new t(l.context||n.root_name,11),c.parse(i),E&&T.length&&(l.context?l.invalid=!0:f(T)),O&&h.name=="body"&&M();if(!l.invalid){for(w in u){b=s[w],d=u[w],g=d.length;while(g--)d[g].parent||d.splice(g,1);for(v=0,m=b.length;v<m;v++)b[v](d,w,l)}for(v=0,m=o.length;v<m;v++){b=o[v];if(b.name in a){d=a[b.name],g=d.length;while(g--)d[g].parent||d.splice(g,1);for(g=0,y=b.callbacks.length;g<y;g++)b.callbacks[g](d,b.name,l)}}}return h},n.remove_trailing_brs&&i.addNodeFilter("br",function(t,n){var i,s=t.length,o,u=r.getBlockElements(),a=r.getNonEmptyElements(),f,l,c;u.body=1;for(i=0;i<s;i++){o=t[i],f=o.parent;if(u[o.parent.name]&&o===f.lastChild){l=o.prev;while(l){c=l.name;if(c!=="span"||l.attr("data-mce-type")!=="bookmark"){if(c!=="br")break;if(c==="br"){o=null;break}}l=l.prev}o&&(o.remove(),f.isEmpty(a)&&(elementRule=r.getElementRule(f.name),elementRule&&(elementRule.removeEmpty?f.remove():elementRule.paddEmpty&&(f.empty().append(new e.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(e){var t=[],n,r,i,s,o;return e=e||{},n=e.indent,r=tinymce.makeMap(e.indent_before||""),i=tinymce.makeMap(e.indent_after||""),s=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),o=e.element_format=="html",{start:function(e,u,a){var f,l,c,h;n&&r[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&h!=="\n"&&t.push("\n")),t.push("<",e);if(u)for(f=0,l=u.length;f<l;f++)c=u[f],t.push(" ",c.name,'="',s(c.value,!0),'"');!a||o?t[t.length]=">":t[t.length]=" />",a&&n&&i[e]&&t.length>0&&(h=t[t.length-1],h.length>0&&h!=="\n"&&t.push("\n"))},end:function(e){var r;t.push("</",e,">"),n&&i[e]&&t.length>0&&(r=t[t.length-1],r.length>0&&r!=="\n"&&t.push("\n"))},text:function(e,n){e.length>0&&(t[t.length]=n?e:s(e))},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("<!--",e,"-->")},pi:function(e,r){r?t.push("<?",e," ",r,"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var r=this,i=new e.html.Writer(t);t=t||{},t.validate="validate"in t?t.validate:!0,r.schema=n=n||new e.html.Schema,r.writer=i,r.serialize=function(e){function o(e){var t=r[e.type],u,a,f,l,c,h,p,d,v;if(!t){u=e.name,a=e.shortEnded,f=e.attributes;if(s&&f&&f.length>1){h=[],h.map={},v=n.getElementRule(e.name);for(p=0,d=v.attributesOrder.length;p<d;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;p<d;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}i.start(e.name,f,a);if(!a){if(e=e.firstChild)do o(e);while(e=e.next);i.end(u)}}else t(e)}var r,s;return s=t.validate,r={3:function(e,t){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do o(e);while(e=e.next)}},i.reset(),e.type==1&&!t.inner?o(e):r[11](e),i.getContent()}}}(tinymce),function(e){var t=e.each,n=e.is,r=e.isWebKit,i=e.isIE,s=e.html.Entities,o=/^([a-z0-9],?)+$/i,u=e.html.Schema.blockElementsMap,a=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var r=this,s,o;r.doc=t,r.win=window,r.files={},r.cssFlicker=!1,r.counter=0,r.stdMode=!e.isIE||t.documentMode>=8,r.boxModel=!e.isIE||t.compatMode=="CSS1Compat"||r.stdMode,r.hasOuterHTML="outerHTML"in t.createElement("a"),r.settings=n=e.extend({keep_values:!1,hex_colors:1},n),r.schema=n.schema,r.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(u){r.cssFlicker=!0}if(i&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)});for(o in n.schema.getCustomElements())t.createElement(o)}e.addUnload(r.destroy,r)},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n=this,r;return e=n.get(e),t=n.getPos(e),r=n.getSize(e),{x:t.x,y:t.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),n.indexOf("px")===-1&&(n=0),r.indexOf("px")===-1&&(r=0),{w:parseInt(n)||e.offsetWidth||e.clientWidth,h:parseInt(r)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,r,i){var s=this,o,u=s.settings,a=[];e=s.get(e),i=i===undefined,u.strict_root&&(r=r||s.getRoot()),n(t,"string")&&(o=t,t==="*"?t=function(e){return e.nodeType==1}:t=function(e){return s.is(e,o)});while(e){if(e==r||!e.nodeType||e.nodeType===9)break;if(!t||t(e)){if(!i)return e;a.push(e)}e=e.parentNode}return i?a:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e,e=this.doc.getElementById(e);if(e&&e.id!==t)return this.doc.getElementsByName(t)[1]}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e.dom.Sizzle(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(t,n){var r;if(t.length===undefined){if(n==="*")return t.nodeType==1;if(o.test(n)){n=n.toLowerCase().split(/,/),t=t.nodeName.toLowerCase();for(r=n.length-1;r>=0;r--)if(n[r]==t)return!0;return!1}}return e.dom.Sizzle.matches(n,t.nodeType?[t]:t).length>0},add:function(e,t,r,i,s){var o=this;return this.run(e,function(e){var u,a;return u=n(t,"string")?o.doc.createElement(t):t,o.setAttribs(u,r),i&&(i.nodeType?u.appendChild(i):o.setHTML(u,i)),s?u:e.appendChild(u)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i=this,s;r+="<"+e;for(s in t)t.hasOwnProperty(s)&&(r+=" "+s+'="'+i.encode(t[s])+'"');return typeof n!="undefined"?r+">"+n+"</"+e+">":r+" />"},remove:function(t,n){return this.run(t,function(t){var r,i=t.parentNode;if(!i)return null;if(n)while(r=t.firstChild)!e.isIE||r.nodeType!==3||r.nodeValue?i.insertBefore(r,t):t.removeChild(r);return i.removeChild(t)})},setStyle:function(t,n,r){var s=this;return s.run(t,function(o){var u,a;u=o.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),s.pixelStyles.test(n)&&(e.is(r,"number")||/^[\-0-9\.]+$/.test(r))&&(r+="px");switch(n){case"opacity":if(i){u.filter=r===""?"":"alpha(opacity="+r*100+")";if(!t.currentStyle||!t.currentStyle.hasLayout)u.display="inline-block"}u[n]=u["-moz-opacity"]=u["-khtml-opacity"]=r||"";break;case"float":i?u.styleFloat=r:u.cssFloat=r;break;default:u[n]=r||""}s.settings.update_styles&&s.setAttrib(o,"data-mce-style")})},getStyle:function(e,t,n){e=this.get(e);if(!e)return;if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(r){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),t=="float"&&(t=i?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:undefined},setStyles:function(e,n){var r=this,i=r.settings,s;s=i.update_styles,i.update_styles=0,t(n,function(t,n){r.setStyle(e,n,t)}),i.update_styles=s,i.update_styles&&r.setAttrib(e,i.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,r,i){var s=this;if(!e||!r)return;return s.settings.strict&&(r=r.toLowerCase()),this.run(e,function(e){var o=s.settings;if(i!==null)switch(r){case"style":if(!n(i,"string")){t(i,function(t,n){s.setStyle(e,n,t)});return}o.keep_values&&(i&&!s._isRes(i)?e.setAttribute("data-mce-style",i,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":o.keep_values&&(o.url_converter&&(i=o.url_converter.call(o.url_converter_scope||s,i,r,e)),s.setAttrib(e,"data-mce-"+r,i,2));break;case"shape":e.setAttribute("data-mce-style",i)}n(i)&&i!==null&&i.length!==0?e.setAttribute(r,""+i,2):e.removeAttribute(r,2)})},setAttribs:function(e,n){var r=this;return this.run(e,function(e){t(n,function(t,n){r.setAttrib(e,n,t)})})},getAttrib:function(t,s,o){var u,a=this,f;t=a.get(t);if(!t||t.nodeType!==1)return o===f?!1:o;n(o)||(o="");if(/^(src|href|style|coords|shape)$/.test(s)){u=t.getAttribute("data-mce-"+s);if(u)return u}i&&a.props[s]&&(u=t[a.props[s]],u=u&&u.nodeValue?u.nodeValue:u),u||(u=t.getAttribute(s,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s))return t[a.props[s]]===!0&&u===""?s:u?s:"";if(t.nodeName==="FORM"&&t.getAttributeNode(s))return t.getAttributeNode(s).nodeValue;s==="style"&&(u=u||t.style.cssText,u&&(u=a.serializeStyle(a.parseStyle(u),t.nodeName),a.settings.keep_values&&!a._isRes(u)&&t.setAttribute("data-mce-style",u))),r&&s==="class"&&u&&(u=u.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(i)switch(s){case"rowspan":case"colspan":u===1&&(u="");break;case"size":if(u==="+0"||u===20||u===0)u="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":u===0&&(u="");break;case"hspace":u===-1&&(u="");break;case"maxlength":case"tabindex":if(u===32768||u===2147483647||u==="32768")u="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(u===65535)return s;return o;case"shape":u=u.toLowerCase();break;default:s.indexOf("on")===0&&u&&(u=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+u))}return u!==f&&u!==null&&u!==""?""+u:o},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;e=n.get(e),t=t||o.body;if(e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),s=n.boxModel?o.documentElement:o.body,r=e.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-s.clientTop,i=e.top+(o.documentElement.scrollTop||o.body.scrollTop)-s.clientLeft,{x:r,y:i};u=e;while(u&&u!=t&&u.nodeType)r+=u.offsetLeft||0,i+=u.offsetTop||0,u=u.offsetParent;u=e.parentNode;while(u&&u!=t&&u.nodeType)r-=u.scrollLeft||0,i-=u.scrollTop||0,u=u.parentNode}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},loadCSS:function(n){var r=this,s=r.doc,o;n||(n=""),o=r.select("head")[0],t(n.split(","),function(t){var n;if(r.files[t])return;r.files[t]=!0,n=r.create("link",{rel:"stylesheet",href:e._addVer(t)}),i&&s.documentMode&&s.recalc&&(n.onload=function(){s.recalc&&s.recalc(),n.onload=null}),o.appendChild(n)})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(n!=""?n+" ":"")+t):0})},removeClass:function(t,n){var r=this,i;return r.run(t,function(t){var s;return r.hasClass(t,n)?(i||(i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),s=t.className.replace(i," "),s=e.trim(s!=" "?s:""),t.className=s,s||(t.removeAttribute("class"),t.removeAttribute("className")),s):t.className})},hasClass:function(e,t){return e=this.get(e),!e||!t?!1:(" "+e.className+" ").indexOf(" "+t+" ")!==-1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||e.style.display=="none"||this.getStyle(e,"display")=="none"},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,n){var r=this;return r.run(e,function(e){if(i){while(e.firstChild)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+n,e.removeChild(e.firstChild)}catch(s){e=r.create("div"),e.innerHTML="<br />"+n,t(e.childNodes,function(t,n){n&&e.appendChild(t)})}}else e.innerHTML=n;return n})},getOuterHTML:function(e){var t,n=this;return e=n.get(e),e?e.nodeType===1&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function s(e,t,n){var i,s;s=n.createElement("body"),s.innerHTML=t,i=s.lastChild;while(i)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}var r=this;return this.run(e,function(e){e=r.get(e);if(e.nodeType==1){n=n||e.ownerDocument||r.doc;if(i)try{i&&e.nodeType==1?e.outerHTML=t:s(e,t,n)}catch(o){s(e,t,n)}else s(e,t,n)}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},isBlock:function(e){var t=e.nodeType;return t?t===1&&!!u[e.nodeName]:!!u[e]},replace:function(r,i,s){var o=this;return n(i,"array")&&(r=r.cloneNode(!0)),o.run(i,function(n){return s&&t(e.grep(n.childNodes),function(e){r.appendChild(e)}),n.parentNode.replaceChild(r,n)})},rename:function(e,n){var r=this,i;return e.nodeName!=n.toUpperCase()&&(i=r.create(n),t(r.getAttribs(e),function(t){r.setAttrib(i,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(i,e,1)),i||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!=r)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){function n(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}var t=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return t?(e="#"+n(t[1])+n(t[2])+n(t[3]),e):e},getClasses:function(){function a(n){t(n.imports,function(e){a(e)}),t(n.cssRules||n.rules,function(n){switch(n.type||1){case 1:n.selectorText&&t(n.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(t)||!/\.[\w\-]+$/.test(t))return;u=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t);if(o&&!(t=o(t,u)))return;s[t]||(r.push({"class":t}),s[t]=1)});break;case 3:a(n.styleSheet)}})}var n=this,r=[],i,s={},o=n.settings.class_filter,u;if(n.classes)return n.classes;try{t(n.doc.styleSheets,a)}catch(f){}return r.length>0&&(n.classes=r),r},run:function(e,n,r){var i=this,s;return i.doc&&typeof e=="string"&&(e=i.get(e)),e?(r=r||this,!e.nodeType&&(e.length||e.length===0)?(s=[],t(e,function(e,t){e&&(typeof e=="string"&&(e=i.doc.getElementById(e)),s.push(n.call(r,e,t)))}),s):n.call(r,e)):!1},getAttribs:function(e){var t;return e=this.get(e),e?i?(t=[],e.nodeName=="OBJECT"?e.attributes:(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var r=this,i,s,o,u,f,l;t=t.firstChild;if(t){u=new e.dom.TreeWalker(t),n=n||r.schema?r.schema.getNonEmptyElements():null;do{o=t.nodeType;if(o===1){if(t.getAttribute("data-mce-bogus"))continue;f=t.nodeName.toLowerCase();if(n&&n[f]){l=t.parentNode;if(f==="br"&&r.isBlock(l)&&l.firstChild===t&&l.lastChild===t)continue;return!1}s=r.getAttribs(t),i=t.attributes.length;while(i--){f=t.attributes[i].nodeName;if(f==="name"||f==="data-mce-bookmark")return!1}}if(o===3&&!a.test(t.nodeValue))return!1}while(t=u.next())}return!0},destroy:function(t){var n=this;n.events&&n.events.destroy(),n.win=n.doc=n.root=n.events=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e)for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling){s=e.nodeType;if(t&&s==3)if(s==r||!e.nodeValue.length)continue;n++,r=s}return n},split:function(t,n,r){function f(t){var n,r=t.childNodes,s=t.nodeType;if(s==1&&t.getAttribute("data-mce-type")=="bookmark")return;for(n=r.length-1;n>=0;n--)f(r[n]);if(s!=9){if(s==3&&t.nodeValue.length>0){if(!i.isBlock(t.parentNode)||e.trim(t.nodeValue).length>0)return}else if(s==1){r=t.childNodes,r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")=="bookmark"&&t.parentNode.insertBefore(r[0],t);if(r.length||/^(br|hr|input|img)$/i.test(t.nodeName))return}i.remove(t)}return t}var i=this,s=i.createRng(),o,u,a;if(t&&n)return s.setStart(t.parentNode,i.nodeIndex(t)),s.setEnd(n.parentNode,i.nodeIndex(n)),o=s.extractContents(),s=i.createRng(),s.setStart(n.parentNode,i.nodeIndex(n)+1),s.setEnd(t.parentNode,i.nodeIndex(t)+1),u=s.extractContents(),a=t.parentNode,a.insertBefore(f(o),t),r?a.replaceChild(r,n):a.insertBefore(n,t),a.insertBefore(f(u),t),i.remove(t),r||n},bind:function(t,n,r,i){var s=this;return s.events||(s.events=new e.dom.EventUtils),s.events.add(t,n,r,i||this)},unbind:function(t,n,r){var i=this;return i.events||(i.events=new e.dom.EventUtils),i.events.remove(t,n,r)},_findSib:function(e,t,r){var i=this,s=t;if(e){n(s,"string")&&(s=function(e){return i.is(e,t)});for(e=e[r];e;e=e[r])if(s(e))return e}return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function v(e,t){P(u,e,t)}function m(e,t){P(a,e,t)}function g(e){v(e.parentNode,d(e))}function y(e){v(e.parentNode,d(e)+1)}function b(e){m(e.parentNode,d(e))}function w(e){m(e.parentNode,d(e)+1)}function E(e){e?(n[c]=n[l],n[h]=n[f]):(n[l]=n[c],n[f]=n[h]),n.collapsed=u}function S(e){g(e),w(e)}function x(e){v(e,0),m(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function T(e,t){var r=n[l],i=n[f],s=n[c],o=n[h],u=t.startContainer,a=t.startOffset,p=t.endContainer,d=t.endOffset;if(e===0)return D(r,i,u,a);if(e===1)return D(s,o,u,a);if(e===2)return D(s,o,p,d);if(e===3)return D(r,i,p,d)}function N(){H(o)}function C(){return H(i)}function k(){return H(s)}function L(t){var n=this[l],r=this[f],i,s;n.nodeType!==3&&n.nodeType!==4||!n.nodeValue?(n.childNodes.length>0&&(s=n.childNodes[r]),s?n.insertBefore(t,s):n.appendChild(t)):r?r>=n.nodeValue.length?e.insertAfter(t,n):(i=n.splitText(r),n.parentNode.insertBefore(t,i)):n.parentNode.insertBefore(t,n)}function A(e){var t=n.extractContents();n.insertNode(e),e.appendChild(t),n.selectNode(e)}function O(){return p(new t(e),{startContainer:n[l],startOffset:n[f],endContainer:n[c],endOffset:n[h],collapsed:n.collapsed,commonAncestorContainer:n.commonAncestorContainer})}function M(e,t){var n;if(e.nodeType==3)return e;if(t<0)return e;n=e.firstChild;while(n&&t>0)--t,n=n.nextSibling;return n?n:e}function _(){return n[l]==n[c]&&n[f]==n[h]}function D(t,n,r,i){var s,o,u,a,f,l;if(t==r)return n==i?0:n<i?-1:1;s=r;while(s&&s.parentNode!=t)s=s.parentNode;if(s){o=0,u=t.firstChild;while(u!=s&&o<n)o++,u=u.nextSibling;return n<=o?-1:1}s=t;while(s&&s.parentNode!=r)s=s.parentNode;if(s){o=0,u=r.firstChild;while(u!=s&&o<i)o++,u=u.nextSibling;return o<i?-1:1}a=e.findCommonAncestor(t,r),f=t;while(f&&f.parentNode!=a)f=f.parentNode;f||(f=a),l=r;while(l&&l.parentNode!=a)l=l.parentNode;l||(l=a);if(f==l)return 0;u=a.firstChild;while(u){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function P(t,r,i){var s,o;t?(n[l]=r,n[f]=i):(n[c]=r,n[h]=i),s=n[c];while(s.parentNode)s=s.parentNode;o=n[l];while(o.parentNode)o=o.parentNode;o==s?D(n[l],n[f],n[c],n[h])>0&&n.collapse(t):n.collapse(t),n.collapsed=_(),n.commonAncestorContainer=e.findCommonAncestor(n[l],n[c])}function H(e){var t,r=0,i=0,s,o,u,a,f,h;if(n[l]==n[c])return B(e);for(t=n[c],s=t.parentNode;s;t=s,s=s.parentNode){if(s==n[l])return j(t,e);++r}for(t=n[l],s=t.parentNode;s;t=s,s=s.parentNode){if(s==n[c])return F(t,e);++i}o=i-r,u=n[l];while(o>0)u=u.parentNode,o--;a=n[c];while(o<0)a=a.parentNode,o++;for(f=u.parentNode,h=a.parentNode;f!=h;f=f.parentNode,h=h.parentNode)u=f,a=h;return I(u,a,e)}function B(e){var t,i,a,c,p,d,v;e!=o&&(t=r.createDocumentFragment());if(n[f]==n[h])return t;if(n[l].nodeType==3){i=n[l].nodeValue,a=i.substring(n[f],n[h]),e!=s&&(n[l].deleteData(n[f],n[h]-n[f]),n.collapse(u));if(e==o)return;return t.appendChild(r.createTextNode(a)),t}c=M(n[l],n[f]),p=n[h]-n[f];while(p>0)d=c.nextSibling,v=z(c,e),t&&t.appendChild(v),--p,c=d;return e!=s&&n.collapse(u),t}function j(e,t){var i,u,l,c,h,p;t!=o&&(i=r.createDocumentFragment()),u=q(e,t),i&&i.appendChild(u),l=d(e),c=l-n[f];if(c<=0)return t!=s&&(n.setEndBefore(e),n.collapse(a)),i;u=e.previousSibling;while(c>0)h=u.previousSibling,p=z(u,t),i&&i.insertBefore(p,i.firstChild),--c,u=h;return t!=s&&(n.setEndBefore(e),n.collapse(a)),i}function F(e,t){var i,a,f,l,c,p;t!=o&&(i=r.createDocumentFragment()),f=R(e,t),i&&i.appendChild(f),a=d(e),++a,l=n[h]-a,f=e.nextSibling;while(l>0)c=f.nextSibling,p=z(f,t),i&&i.appendChild(p),--l,f=c;return t!=s&&(n.setStartAfter(e),n.collapse(u)),i}function I(e,t,i){var a,f,l,c,h,p,v,m;i!=o&&(f=r.createDocumentFragment()),a=R(e,i),f&&f.appendChild(a),l=e.parentNode,c=d(e),h=d(t),++c,p=h-c,v=e.nextSibling;while(p>0)m=v.nextSibling,a=z(v,i),f&&f.appendChild(a),v=m,--p;return a=q(t,i),f&&f.appendChild(a),i!=s&&(n.setStartAfter(e),n.collapse(u)),f}function q(e,t){var r=M(n[c],n[h]-1),i,s,f,l,p,d=r!=n[c];if(r==e)return U(r,d,a,t);i=r.parentNode,s=U(i,a,a,t);while(i){while(r)f=r.previousSibling,l=U(r,d,a,t),t!=o&&s.insertBefore(l,s.firstChild),d=u,r=f;if(i==e)return s;r=i.previousSibling,i=i.parentNode,p=U(i,a,a,t),t!=o&&p.appendChild(s),s=p}}function R(e,t){var r=M(n[l],n[f]),i=r!=n[l],s,c,h,p,d;if(r==e)return U(r,i,u,t);s=r.parentNode,c=U(s,a,u,t);while(s){while(r)h=r.nextSibling,p=U(r,i,u,t),t!=o&&c.appendChild(p),i=u,r=h;if(s==e)return c;r=s.nextSibling,s=s.parentNode,d=U(s,a,u,t),t!=o&&d.appendChild(c),c=d}}function U(e,t,r,i){var u,l,c,p,d;if(t)return z(e,i);if(e.nodeType==3){u=e.nodeValue,r?(p=n[f],l=u.substring(p),c=u.substring(0,p)):(p=n[h],l=u.substring(0,p),c=u.substring(p)),i!=s&&(e.nodeValue=c);if(i==o)return;return d=e.cloneNode(a),d.nodeValue=l,d}if(i==o)return;return e.cloneNode(a)}function z(e,t){if(t!=o)return t==s?e.cloneNode(u):e;e.parentNode.removeChild(e)}var n=this,r=e.doc,i=0,s=1,o=2,u=!0,a=!1,f="startOffset",l="startContainer",c="endContainer",h="endOffset",p=tinymce.extend,d=e.nodeIndex;p(n,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:u,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:v,setEnd:m,setStartBefore:g,setStartAfter:y,setEndBefore:b,setEndAfter:w,collapse:E,selectNode:S,selectNodeContents:x,compareBoundaryPoints:T,deleteContents:N,extractContents:C,cloneContents:k,insertNode:L,surroundContents:A,cloneRange:O})}e.Range=t}(tinymce.dom),function(){function e(e){function s(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;r=t.duplicate(),r.collapse(n),h=r.parentElement();if(h.ownerDocument!==e.dom.doc)return;while(h.contentEditable==="false")h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};u=h.children,s=u.length-1;while(i<=s){l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t);if(c>0)s=l-1;else{if(!(c<0))return{node:a};i=l+1}}if(c<0){a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),r.setEndPoint(n?"EndToStart":"EndToEnd",t);if(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)>0){r=t.duplicate(),r.collapse(n),f=-1;while(h==r.parentElement()){if(r.move("character",-1)==0)break;f++}}f=f||r.text.replace("\r\n"," ").length}else r.collapse(!0),r.setEndPoint(n?"StartToStart":"StartToEnd",t),f=r.text.replace("\r\n"," ").length;return{node:a,position:c,offset:f,inside:o}}function o(){function h(e){var t=s(r,e),n,o,u=0,a,f,l;n=t.node,o=t.offset;if(t.inside&&!n.hasChildNodes()){i[e?"setStart":"setEnd"](n,0);return}if(o===f){i[e?"setStartBefore":"setEndAfter"](n);return}if(t.position<0){a=t.inside?n.firstChild:n.nextSibling;if(!a){i[e?"setStartAfter":"setEndAfter"](n);return}if(!o){a.nodeType==3?i[e?"setStart":"setEnd"](a,0):i[e?"setStartBefore":"setEndBefore"](a);return}while(a){l=a.nodeValue,u+=l.length;if(u>=o){n=a,u-=o,u=l.length-u;break}a=a.nextSibling}}else{a=n.previousSibling;if(!a)return i[e?"setStartBefore":"setEndBefore"](n);if(!o){n.nodeType==3?i[e?"setStart":"setEnd"](a,n.nodeValue.length):i[e?"setStartAfter":"setEndAfter"](a);return}while(a){u+=a.nodeValue.length;if(u>=o){n=a,u-=o;break}a=a.previousSibling}}i[e?"setStart":"setEnd"](n,u)}var r=e.getRng(),i=n.createRng(),o,u,a,f,l,c;o=r.item?r.item(0):r.parentElement();if(o.ownerDocument!=n.doc)return i;u=e.isCollapsed();if(r.item)return i.setStart(o.parentNode,n.nodeIndex(o)),i.setEnd(i.startContainer,i.startOffset+1),i;try{h(!0),u||h()}catch(p){if(p.number!=-2147024809)throw p;l=t.getBookmark(2),a=r.duplicate(),a.collapse(!0),o=a.parentElement(),u||(a=r.duplicate(),a.collapse(!1),f=a.parentElement(),f.innerHTML=f.innerHTML),o.innerHTML=o.innerHTML,t.moveToBookmark(l),r=e.getRng(),h(!0),u||h()}return i}var t=this,n=e.dom,r=!0,i=!1;this.getBookmark=function(t){function a(e){var e,t,r,i,s,o=[];t=e.parentNode,r=n.getRoot().parentNode;while(t!=r&&t.nodeType!==9){i=t.children,s=i.length;while(s--)if(e===i[s]){o.push(s);break}e=t,t=t.parentNode}return o}function f(e){var t;t=s(r,e);if(t)return{position:t.position,offset:t.offset,indexes:a(t.node),inside:t.inside}}var r=e.getRng(),i,o,u={};return t===2&&(r.item?u.start={ctrl:!0,indexes:a(r.item(0))}:(u.start=f(!0),e.isCollapsed()||(u.end=f()))),u},this.moveToBookmark=function(e){function i(e){var t,r,i,s;t=n.getRoot();for(r=e.length-1;r>=0;r--)s=t.children,i=e[r],i<=s.length-1&&(t=s[i]);return t}function s(n){var s=e[n?"start":"end"],o,u,a;s&&(o=s.position>0,u=r.createTextRange(),u.moveToElementText(i(s.indexes)),offset=s.offset,offset!==a?(u.collapse(s.inside||o),u.moveStart("character",o?-offset:offset)):u.collapse(n),t.setEndPoint(n?"StartToStart":"EndToStart",u),n&&t.collapse(!0))}var t,r=n.doc.body;e.start&&(e.start.ctrl?(t=r.createControlRange(),t.addElement(i(e.start.indexes)),t.select()):(t=r.createTextRange(),s(!0),s(),t.select()))},this.addRange=function(t){function h(e){var t,s,h,p,d;h=n.create("a"),t=e?o:a,s=e?u:f,p=i.duplicate();if(t==l||t==l.documentElement)t=c,s=0;t.nodeType==3?(t.parentNode.insertBefore(h,t),p.moveToElementText(h),p.moveStart("character",s),n.remove(h),i.setEndPoint(e?"StartToStart":"EndToEnd",p)):(d=t.childNodes,d.length?(s>=d.length?n.insertAfter(h,d[d.length-1]):t.insertBefore(h,d[s]),p.moveToElementText(h)):(h=l.createTextNode("﻿"),t.appendChild(h),p.moveToElementText(h.parentNode),p.collapse(r)),i.setEndPoint(e?"StartToStart":"EndToEnd",p),n.remove(h))}var i,s,o,u,a,f,l=e.dom.doc,c=l.body;o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset,i=c.createTextRange();if(o==a&&o.nodeType==1&&u==f-1&&u==f-1)try{s=c.createControlRange(),s.addElement(o.childNodes[u]),s.select();return}catch(p){}h(!0),h(),i.select()},this.getRangeAt=o}tinymce.dom.TridentSelection=e}(),function(){function p(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var a=r[o];if(a){a=a[e];var f=!1;while(a){if(a.sizcache===n){f=r[a.sizset];break}a.nodeType===1&&!s&&(a.sizcache=n,a.sizset=o);if(a.nodeName.toLowerCase()===t){f=a;break}a=a[e]}r[o]=f}}}function d(e,t,n,r,i,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){f=f[e];var l=!1;while(f){if(f.sizcache===n){l=r[f.sizset];break}if(f.nodeType===1){o||(f.sizcache=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(s.filter(t,[f]).length>0){l=f;break}}f=f[e]}r[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,t=0,n=Object.prototype.toString,r=!1,i=!0;[0,0].sort(function(){return i=!1,0});var s=function(t,r,i,a){i=i||[],r=r||document;var f=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var c=[],h,p,d,m,g=!0,y=s.isXML(r),b=t,w,E,S,x;do{e.exec(""),h=e.exec(b);if(h){b=h[3],c.push(h[1]);if(h[2]){m=h[3];break}}}while(h);if(c.length>1&&u.exec(t))if(c.length===2&&o.relative[c[0]])p=v(c[0]+c[1],r);else{p=o.relative[c[0]]?[r]:s(c.shift(),r);while(c.length)t=c.shift(),o.relative[t]&&(t+=c.shift()),p=v(t,p)}else{!a&&c.length>1&&r.nodeType===9&&!y&&o.match.ID.test(c[0])&&!o.match.ID.test(c[c.length-1])&&(w=s.find(c.shift(),r,y),r=w.expr?s.filter(w.expr,w.set)[0]:w.set[0]);if(r){w=a?{expr:c.pop(),set:l(a)}:s.find(c.pop(),c.length!==1||
c[0]!=="~"&&c[0]!=="+"||!r.parentNode?r:r.parentNode,y),p=w.expr?s.filter(w.expr,w.set):w.set,c.length>0?d=l(p):g=!1;while(c.length)E=c.pop(),S=E,o.relative[E]?S=c.pop():E="",S==null&&(S=r),o.relative[E](d,S,y)}else d=c=[]}d||(d=p),d||s.error(E||t);if(n.call(d)==="[object Array]")if(!g)i.push.apply(i,d);else if(r&&r.nodeType===1)for(x=0;d[x]!=null;x++)d[x]&&(d[x]===!0||d[x].nodeType===1&&s.contains(r,d[x]))&&i.push(p[x]);else for(x=0;d[x]!=null;x++)d[x]&&d[x].nodeType===1&&i.push(p[x]);else l(d,i);return m&&(s(m,f,i,a),s.uniqueSort(i)),i};s.uniqueSort=function(e){if(h){r=i,e.sort(h);if(r)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},s.matches=function(e,t){return s(e,null,null,t)},s.find=function(e,t,n){var r;if(!e)return[];for(var i=0,s=o.order.length;i<s;i++){var u=o.order[i],a;if(a=o.leftMatch[u].exec(e)){var f=a[1];a.splice(1,1);if(f.substr(f.length-1)!=="\\"){a[1]=(a[1]||"").replace(/\\/g,""),r=o.find[u](a,t,n);if(r!=null){e=e.replace(o.match[u],"");break}}}}return r||(r=t.getElementsByTagName("*")),{set:r,expr:e}},s.filter=function(e,t,n,r){var i=e,u=[],a=t,f,l,c=t&&t[0]&&s.isXML(t[0]);while(e&&t.length){for(var h in o.filter)if((f=o.leftMatch[h].exec(e))!=null&&f[2]){var p=o.filter[h],d,v,m=f[1];l=!1,f.splice(1,1);if(m.substr(m.length-1)==="\\")continue;a===u&&(u=[]);if(o.preFilter[h]){f=o.preFilter[h](f,a,n,u,r,c);if(!f)l=d=!0;else if(f===!0)continue}if(f)for(var g=0;(v=a[g])!=null;g++)if(v){d=p(v,f,g,a);var y=r^!!d;n&&d!=null?y?l=!0:a[g]=!1:y&&(u.push(v),l=!0)}if(d!==undefined){n||(a=u),e=e.replace(o.match[h],"");if(!l)return[];break}}if(e===i){if(l!=null)break;s.error(e)}i=e}return a},s.error=function(e){throw"Syntax error, unrecognized expression: "+e};var o=s.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!/\W/.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var o=0,u=e.length,a;o<u;o++)if(a=e[o]){while((a=a.previousSibling)&&a.nodeType!==1);e[o]=i||a&&a.nodeName.toLowerCase()===t?a||!1:a===t}i&&s.filter(t,e,!0)},">":function(e,t){var n=typeof t=="string",r,i=0,o=e.length;if(n&&!/\W/.test(t)){t=t.toLowerCase();for(;i<o;i++){r=e[i];if(r){var u=r.parentNode;e[i]=u.nodeName.toLowerCase()===t?u:!1}}}else{for(;i<o;i++)r=e[i],r&&(e[i]=n?r.parentNode:r.parentNode===t);n&&s.filter(t,e,!0)}},"":function(e,n,r){var i=t++,s=d,o;typeof n=="string"&&!/\W/.test(n)&&(n=n.toLowerCase(),o=n,s=p),s("parentNode",n,i,e,o,r)},"~":function(e,n,r){var i=t++,s=d,o;typeof n=="string"&&!/\W/.test(n)&&(n=n.toLowerCase(),o=n,s=p),s("previousSibling",n,i,e,o,r)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(/\\/g,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){return e[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var n=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=n[1]+(n[2]||1)-0,e[3]=n[3]-0}return e[0]=t++,e},ATTR:function(e,t,n,r,i,s){var u=e[1].replace(/\\/g,"");return!s&&o.attrMap[u]&&(e[1]=o.attrMap[u]),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,u){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var a=s.filter(t[3],n,r,!0^u);return r||i.push.apply(i,a),!1}t[3]=s(t[3],null,null,n)}else if(o.match.POS.test(t[0])||o.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!s(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],u=o.filters[i];if(u)return u(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||s.getText([e])||"").indexOf(t[3])>=0;if(i==="not"){var a=t[3];for(var f=0,l=a.length;f<l;f++)if(a[f]===e)return!1;return!0}s.error("Syntax error, unrecognized expression: "+i)},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":while(r=r.previousSibling)if(r.nodeType===1)return!1;if(n==="first")return!0;r=e;case"last":while(r=r.nextSibling)if(r.nodeType===1)return!1;return!0;case"nth":var i=t[2],s=t[3];if(i===1&&s===0)return!0;var o=t[0],u=e.parentNode;if(u&&(u.sizcache!==o||!e.nodeIndex)){var a=0;for(r=u.firstChild;r;r=r.nextSibling)r.nodeType===1&&(r.nodeIndex=++a);u.sizcache=o}var f=e.nodeIndex-s;return i===0?f===0:f%i===0&&f/i>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=o.attrHandle[n]?o.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],u=t[4];return r==null?s==="!=":s==="="?i===u:s==="*="?i.indexOf(u)>=0:s==="~="?(" "+i+" ").indexOf(u)>=0:u?s==="!="?i!==u:s==="^="?i.indexOf(u)===0:s==="$="?i.substr(i.length-u.length)===u:s==="|="?i===u||i.substr(0,u.length+1)===u+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=o.setFilters[i];if(s)return s(e,n,t,r)}}},u=o.match.POS,a=function(e,t){return"\\"+(t-0+1)};for(var f in o.match)o.match[f]=new RegExp(o.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[f].source.replace(/\\(\d+)/g,a));var l=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(c){l=function(e,t){var r=t||[],i=0;if(n.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var s=e.length;i<s;i++)r.push(e[i]);else for(;e[i];i++)r.push(e[i]);return r}}var h;document.documentElement.compareDocumentPosition?h=function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition)return e==t&&(r=!0),e.compareDocumentPosition?-1:1;var n=e.compareDocumentPosition(t)&4?-1:e===t?0:1;return n===0&&(r=!0),n}:"sourceIndex"in document.documentElement?h=function(e,t){if(!e.sourceIndex||!t.sourceIndex)return e==t&&(r=!0),e.sourceIndex?-1:1;var n=e.sourceIndex-t.sourceIndex;return n===0&&(r=!0),n}:document.createRange&&(h=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(r=!0),e.ownerDocument?-1:1;var n=e.ownerDocument.createRange(),i=t.ownerDocument.createRange();n.setStart(e,0),n.setEnd(e,0),i.setStart(t,0),i.setEnd(t,0);var s=n.compareBoundaryPoints(Range.START_TO_END,i);return s===0&&(r=!0),s}),s.getText=function(e){var t="",n;for(var r=0;e[r];r++)n=e[r],n.nodeType===3||n.nodeType===4?t+=n.nodeValue:n.nodeType!==8&&(t+=s.getText(n.childNodes));return t},function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name='"+t+"'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(o.find.ID=function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?r.id===e[1]||typeof r.getAttributeNode!="undefined"&&r.getAttributeNode("id").nodeValue===e[1]?[r]:undefined:[]}},o.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(o.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=s,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;s=function(t,n,r,i){n=n||document;if(!i&&n.nodeType===9&&!s.isXML(n))try{return l(n.querySelectorAll(t),r)}catch(o){}return e(t,n,r,i)};for(var n in e)s[n]=e[n];t=null}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),s.contains=document.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},s.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var v=function(e,t){var n=[],r="",i,u=t.nodeType?[t]:t;while(i=o.match.PSEUDO.exec(e))r+=i[0],e=e.replace(o.match.PSEUDO,"");e=o.relative[e]?e+"*":e;for(var a=0,f=u.length;a<f;a++)s(e,u[a],n);return s.filter(r,n)};window.tinymce.dom.Sizzle=s}(),function(e){var t=e.each,n=e.DOM,r=e.isIE,i=e.isWebKit,s;e.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(i,s,o,u){var a,f=this,l=f.events,c;if(s instanceof Array)return c=[],t(s,function(e){c.push(f.add(i,e,o,u))}),c;if(i&&i.hasOwnProperty&&i instanceof Array)return c=[],t(i,function(e){e=n.get(e),c.push(f.add(e,s,o,u))}),c;i=n.get(i);if(!i)return;return a=function(t){if(f.disabled)return;return t=t||window.event,t&&r&&(t.target||(t.target=t.srcElement),e.extend(t,f._stoppers)),u?o.call(u,t):o(t)},s=="unload"?(e.unloads.unshift({func:a}),a):s=="init"?(f.domLoaded?a():f.inits.push(a),a):(l.push({obj:i,name:s,func:o,cfunc:a,scope:u}),f._add(i,s,a),o)},remove:function(e,r,i){var s=this,o=s.events,u=!1,a;return e&&e.hasOwnProperty&&e instanceof Array?(a=[],t(e,function(e){e=n.get(e),a.push(s.remove(e,r,i))}),a):(e=n.get(e),t(o,function(t,n){if(t.obj==e&&t.name==r&&(!i||t.func==i||t.cfunc==i))return o.splice(n,1),s._remove(e,r,t.cfunc),u=!0,!1}),u)},clear:function(e){var t=this,r=t.events,i,s;if(e){e=n.get(e);for(i=r.length-1;i>=0;i--)s=r[i],s.obj===e&&(t._remove(s.obj,s.name,s.cfunc),s.obj=s.cfunc=null,r.splice(i,1))}},cancel:function(e){return e?(this.stop(e),this.prevent(e)):!1},stop:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},prevent:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},destroy:function(){var e=this;t(e.events,function(t,n){e._remove(t.obj,t.name,t.cfunc),t.obj=t.cfunc=null}),e.events=[],e=null},_add:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!1):e["on"+t]=n},_remove:function(e,t,n){if(e)try{e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!1):e["on"+t]=null}catch(r){}},_pageInit:function(e){var n=this;if(n.domLoaded)return;n.domLoaded=!0,t(n.inits,function(e){e()}),n.inits=[]},_wait:function(e){var t=this,n=e.document;if(e.tinyMCE_GZ&&tinyMCE_GZ.loaded){t.domLoaded=1;return}n.attachEvent?(n.attachEvent("onreadystatechange",function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",arguments.callee),t._pageInit(e))}),n.documentElement.doScroll&&e==e.top&&function(){if(t.domLoaded)return;try{n.documentElement.doScroll("left")}catch(r){setTimeout(arguments.callee,0);return}t._pageInit(e)}()):n.addEventListener&&t._add(e,"DOMContentLoaded",function(){t._pageInit(e)}),t._add(e,"load",function(){t._pageInit(e)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),s=e.dom.Event=new e.dom.EventUtils,s._wait(window),e.addUnload(function(){s.destroy()})}(tinymce),function(e){e.dom.Element=function(t,n){var r=this,i,s;r.settings=n=n||{},r.id=t,r.dom=i=n.dom||e.DOM,e.isIE||(s=i.get(r.id)),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){r[e]=function(){var n=[t],s;for(s=0;s<arguments.length;s++)n.push(arguments[s]);return n=i[e].apply(i,n),r.update(e),n}}),e.extend(r,{on:function(t,n,i){return e.dom.Event.add(r.id,t,n,i)},getXY:function(){return{x:parseInt(r.getStyle("left")),y:parseInt(r.getStyle("top"))}},getSize:function(){var e=i.get(r.id);return{w:parseInt(r.getStyle("width")||e.clientWidth),h:parseInt(r.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){r.setStyles({left:e,top:t})},moveBy:function(e,t){var n=r.getXY();r.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){r.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=r.getSize();r.resizeTo(n.w+e,n.h+t)},update:function(t){var s;if(e.isIE6&&n.blocker){t=t||"";if(t.indexOf("get")===0||t.indexOf("has")===0||t.indexOf("is")===0)return;if(t=="remove"){i.remove(r.blocker);return}r.blocker?s=i.get(r.blocker):(r.blocker=i.uniqueId(),s=i.add(n.container||i.getRoot(),"iframe",{id:r.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(s,"opacity",0)),i.setStyles(s,{left:r.getStyle("left",1),top:r.getStyle("top",1),width:r.getStyle("width",1),height:r.getStyle("height",1),display:r.getStyle("display",1),zIndex:parseInt(r.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){function t(e){return e.replace(/[\n\r]+/g,"")}var n=e.is,r=e.isIE,i=e.each;e.create("tinymce.dom.Selection",{Selection:function(t,n,r){var s=this;s.dom=t,s.win=n,s.serializer=r,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){s[t]=new e.util.Dispatcher(s)}),s.win.getSelection||(s.tridentSel=new e.dom.TridentSelection(s)),e.isIE&&t.boxModel&&this._fixIESelection(),e.addUnload(s.destroy,s)},setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var t=this,r=t.getRng(),i=t.dom.create("body"),s=t.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",t.onBeforeGetContent.dispatch(t,e),e.format=="text"?t.isCollapsed()?"":r.text||(s.toString?s.toString():""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):n(r.item)||n(r.htmlText)?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=t.isCollapsed()?"":o+t.serializer.serialize(i,e)+u,t.onGetContent.dispatch(t,e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||n.onBeforeSetContent.dispatch(n,t),e=t.content;if(r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),s.body.childNodes.length==0?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.onSetContent.dispatch(n,t)},getStart:function(){var e=this.getRng(),t,n,r,i;if(e.duplicate||e.item){if(e.item)return e.item(0);r=e.duplicate(),r.collapse(1),t=r.parentElement(),n=i=e.parentElement();while(i=i.parentNode)if(i==t){t=n;break}return t}return t=e.startContainer,t.nodeType==1&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,e.startOffset)]),t&&t.nodeType==3?t.parentNode:t},getEnd:function(){var e=this,t=e.getRng(),n,r;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n&&n.nodeName=="BODY"?n.lastChild||n:n):(n=t.endContainer,r=t.endOffset,n.nodeType==1&&n.hasChildNodes()&&(n=n.childNodes[r>0?r-1:r]),n&&n.nodeType==3?n.parentNode:n)},getBookmark:function(e,t){function d(e,t){var n=0;return i(r.select(e),function(e,r){e==t&&(n=r)}),n}var n=this,r=n.dom,s,o,u,a,f,l,c,h="﻿",p;if(e==2){function v(){function o(e,r){var s=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"],u=[],a,f,l=0;if(s.nodeType==3){if(t)for(a=s.previousSibling;a&&a.nodeType==3;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=s.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(n.dom.nodeIndex(f[o],t)+l);for(;s&&s!=i;s=s.parentNode)u.push(n.dom.nodeIndex(s,t));return u}var e=n.getRng(!0),i=r.getRoot(),s={};return s.start=o(e,!0),n.isCollapsed()||(s.end=o(e)),s}return n.tridentSel?n.tridentSel.getBookmark(e):v()}if(e)return{rng:n.getRng()};s=n.getRng(),u=r.uniqueId(),a=tinyMCE.activeEditor.selection.isCollapsed(),p="overflow:hidden;line-height:0px";if(s.duplicate||s.item){if(!!s.item)return l=s.item(0),f=l.nodeName,{name:f,index:d(f,l)};o=s.duplicate();try{s.collapse(),s.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_start" style="'+p+'">'+h+"</span>"),a||(o.collapse(!1),s.moveToElementText(o.parentElement()),s.compareEndPoints("StartToEnd",o)==0&&o.move("character",-1),o.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_end" style="'+p+'">'+h+"</span>"))}catch(m){return null}}else{l=n.getNode(),f=l.nodeName;if(f=="IMG")return{name:f,index:d(f,l)};o=s.cloneRange(),a||(o.collapse(!1),o.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_end",style:p},h))),s.collapse(!0),s.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_start",style:p},h))}return n.moveToBookmark({id:u,keep:1}),{id:u}},moveToBookmark:function(t){var n=this,s=n.dom,o,u,a,f,l,c,h,p;if(t)if(t.start){a=s.createRng(),f=s.getRoot();function d(e){var n=t[e?"start":"end"],r,i,s,o;if(n){s=n[0];for(i=f,r=n.length-1;r>=1;r--){o=i.childNodes;if(n[r]>o.length-1)return;i=o[n[r]]}i.nodeType===3&&(s=Math.min(n[0],i.nodeValue.length)),i.nodeType===1&&(s=Math.min(n[0],i.childNodes.length)),e?a.setStart(i,s):a.setEnd(i,s)}return!0}if(n.tridentSel)return n.tridentSel.moveToBookmark(t);d(!0)&&d()&&n.setRng(a)}else if(t.id){function v(n){var r=s.get(t.id+"_"+n),o,u,a,f,d=t.keep;if(r){o=r.parentNode,n=="start"?(d?(o=r.firstChild,u=1):u=s.nodeIndex(r),l=c=o,h=p=u):(d?(o=r.firstChild,u=1):u=s.nodeIndex(r),c=o,p=u);if(!d){f=r.previousSibling,a=r.nextSibling,i(e.grep(r.childNodes),function(e){e.nodeType==3&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});while(r=s.get(t.id+"_"+n))s.remove(r,1);f&&a&&f.nodeType==a.nodeType&&f.nodeType==3&&!e.isOpera&&(u=f.nodeValue.length,f.appendData(a.nodeValue),s.remove(a),n=="start"?(l=c=f,h=p=u):(c=f,p=u))}}}function m(e){return s.isBlock(e)&&!e.innerHTML&&(e.innerHTML=r?" ":'<br data-mce-bogus="1" />'),e}v("start"),v("end"),l&&(a=s.createRng(),a.setStart(m(l),h),a.setEnd(m(c),p),n.setRng(a))}else t.name?n.select(s.select(t.name)[t.index]):t.rng&&n.setRng(t.rng)},select:function(t,n){var r=this,i=r.dom,s=i.createRng(),o;if(t){o=i.nodeIndex(t),s.setStart(t.parentNode,o),s.setEnd(t.parentNode,o+1);if(n){function u(t,n){var r=new e.dom.TreeWalker(t,t);do{if(t.nodeType==3&&e.trim(t.nodeValue).length!=0){n?s.setStart(t,0):s.setEnd(t,t.nodeValue.length);return}if(t.nodeName=="BR"){n?s.setStartBefore(t):s.setEndBefore(t);return}}while(t=n?r.next():r.prev())}u(t,1),u(t)}r.setRng(s)}return t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?t.compareEndPoints("StartToEnd",t)===0:!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this,t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){var n=this,r,i,s,o=n.win.document;if(t&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{if(r=n.getSel())i=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():o.createRange()}catch(u){}return e.isIE&&i&&i.setStart&&o.selection.createRange().item&&(s=o.selection.createRange().item(0),i=o.createRange(),i.setStartBefore(s),i.setEndAfter(s)),i||(i=o.createRange?o.createRange():o.body.createTextRange()),n.selectedRange&&n.explicitRange&&(i.compareBoundaryPoints(i.START_TO_START,n.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,n.selectedRange)===0?i=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),i},setRng:function(e){var t,n=this;if(!n.tridentSel){t=n.getSel();if(t){n.explicitRange=e;try{t.removeAllRanges()}catch(r){}t.addRange(e),n.selectedRange=t.getRangeAt(0)}}else{if(e.cloneRange){n.tridentSel.addRange(e);return}try{e.select()}catch(r){}}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var e=this,t=e.getRng(),n=e.getSel(),r,i=t.startContainer,s=t.endContainer;if(!t)return e.dom.getRoot();if(t.setStart){r=t.commonAncestorContainer;if(!t.collapsed){t.startContainer==t.endContainer&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()&&(r=t.startContainer.childNodes[t.startOffset]);if(i.nodeType===3&&s.nodeType===3){function o(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0)e=t?e.nextSibling:e.previousSibling;return e||n}i.length===t.startOffset?i=o(i.nextSibling,!0):i=i.parentNode,t.endOffset===0?s=o(s.previousSibling,!1):s=s.parentNode;if(i&&i===s)return i}}return r&&r.nodeType==3?r.parentNode:r}return t.item?t.item(0):t.parentElement()},getSelectedBlocks:function(t,n){var r=this,i=r.dom,s,o,u,a=[];s=i.getParent(t||r.getStart(),i.isBlock),o=i.getParent(n||r.getEnd(),i.isBlock),s&&a.push(s);if(s&&o&&s!=o){u=s;var f=new e.dom.TreeWalker(s,i.getRoot());while((u=f.next())&&u!=o)i.isBlock(u)&&a.push(u)}return o&&s!=o&&a.push(o),a},normalize:function(){function i(i){var s,o,u,a=t.dom,f=a.getRoot(),l;s=n[(i?"start":"end")+"Container"],o=n[(i?"start":"end")+"Offset"],s.nodeType===9&&(s=s.body,o=0);if(s===f&&s.hasChildNodes()){s=s.childNodes[Math.min(!i&&o>0?o-1:o,s.childNodes.length-1)],o=0;if(s.hasChildNodes()){l=s,u=new e.dom.TreeWalker(s,f);do{if(l.nodeType===3){o=i?0:l.nodeValue.length-1,s=l;break}if(l.nodeName==="BR"){o=a.nodeIndex(l),s=l.parentNode;break}}while(l=i?u.next():u.prev());r=!0}}r&&n["set"+(i?"Start":"End")](s,o)}var t=this,n,r;if(e.isIE)return;n=t.getRng(),i(!0),n.collapsed&&i(),r&&t.setRng(n)},destroy:function(t){var n=this;n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function o(e,t){var r=n.createTextRange();try{r.moveToPoint(e,t)}catch(i){r=null}return r}function u(e){var t;e.button?(t=o(e.x,e.y),t&&(t.compareEndPoints("StartToStart",i)>0?t.setEndPoint("StartToStart",i):t.setEndPoint("EndToEnd",i),t.select())):a()}function a(){var n=t.selection.createRange();i&&!n.item&&n.compareEndPoints("StartToEnd",n)===0&&i.select(),e.unbind(t,"mouseup",a),e.unbind(t,"mousemove",u),i=r=0}var e=this.dom,t=e.doc,n=t.body,r,i,s;t.documentElement.unselectable=!0,e.bind(t,["mousedown","contextmenu"],function(n){if(n.target.nodeName==="HTML"){r&&a(),s=t.documentElement;if(s.scrollHeight>s.clientHeight)return;r=1,i=o(n.x,n.y),i&&(e.bind(t,"mouseup",a),e.bind(t,"mousemove",u),e.win.focus(),i.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,r){var i,s,o=e.isIE,u=e.each,a;return t.apply_source_formatting||(t.indent=!1),t.remove_trailing_brs=!0,n=n||e.DOM,r=r||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",i=new e.util.Dispatcher(self),s=new e.util.Dispatcher(self),a=new e.html.DomParser(t,r),a.addAttributeFilter("src,href,style",function(e,r){var i=e.length,s,o,u="data-mce-"+r,a=t.url_converter,f=t.url_converter_scope,l;while(i--)s=e[i],o=s.attributes.map[u],o!==l?(s.attr(r,o.length>0?o:null),s.attr(u,null)):(o=s.attributes.map[r],r==="style"?o=n.serializeStyle(n.parseStyle(o),s.name):a&&(o=a.call(f,o,r,s.name)),s.attr(r,o.length>0?o:null))}),a.addAttributeFilter("class",function(e,t){var n=e.length,r,i;while(n--)r=e[n],i=r.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),r.attr("class",i.length>0?i:null)}),a.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--)i=e[r],i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup&&i.remove()}),a.addNodeFilter("script,style",function(e,t){function s(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var n=e.length,r,i;while(n--)r=e[n],i=r.firstChild?r.firstChild.value:"",t==="script"?(r.attr("type",(r.attr("type")||"text/javascript").replace(/^mce\-/,"")),i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):i.length>0&&(r.firstChild.value="<!--\n"+s(i)+"\n-->")}),a.addNodeFilter("#comment",function(e,t){var n=e.length,r;while(n--)r=e[n],r.value.indexOf("[CDATA[")===0?(r.name="#cdata",r.type=4,r.value=r.value.replace(/^\[CDATA\[|\]\]$/g,"")):r.value.indexOf("mce:protected ")===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--)r=e[n],r.type===7?r.remove():r.type===1&&t==="input"&&!("type"in r.attributes.map)&&r.attr("type","text")}),t.fix_list_elements&&a.addNodeFilter("ul,ol",function(e,t){var n=e.length,r,i;while(n--)r=e[n],i=r.parent,(i.name==="ul"||i.name==="ol")&&r.prev&&r.prev.name==="li"&&r.prev.append(r)}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:i,onPostProcess:s,serialize:function(f,l){var c,h,p,d,v;return o&&n.select("script,style,select,map").length>0?(v=f.innerHTML,f=f.cloneNode(!1),n.setHTML(f,v)):f=f.cloneNode(!0),c=f.ownerDocument.implementation,c.createHTMLDocument&&(h=c.createHTMLDocument(""),u(f.nodeName=="BODY"?f.childNodes:[f],function(e){h.body.appendChild(h.importNode(e,!0))}),f.nodeName!="BODY"?f=h.body.firstChild:f=h.body,p=n.doc,n.doc=h),l=l||{},l.format=l.format||"html",l.no_events||(l.node=f,i.dispatch(self,l)),d=new e.html.Serializer(t,r),l.content=d.serialize(a.parse(l.getInner?f.innerHTML:e.trim(n.getOuterHTML(f),l),l)),l.cleanup||(l.content=l.content.replace(/\uFEFF|\u200B/g,"")),l.no_events||s.dispatch(self,l),p&&(n.doc=p),l.node=null,l.content},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)}}}}(tinymce),function(e){e.dom.ScriptLoader=function(t){function c(t,n){function f(){i.remove(a),s&&(s.onreadystatechange=s.onload=s=null),n()}function l(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+t)}var r=this,i=e.DOM,s,o,u,a;a=i.uniqueId();if(e.isIE6){o=new e.util.URI(t),u=location;if(o.host==u.hostname&&o.port==u.port&&o.protocol+":"==u.protocol&&o.protocol.toLowerCase()!="file"){e.util.XHR.send({url:e._addVer(o.getURI()),success:function(e){var t=i.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),i.remove(t),f()},error:l});return}}s=i.create("script",{id:a,type:"text/javascript",src:e._addVer(t)}),e.isIE||(s.onload=f),s.onerror=l,e.isOpera||(s.onreadystatechange=function(){var e=s.readyState;(e=="complete"||e=="loaded")&&f()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n=0,r=1,i=2,s={},o=[],u={},a=[],f=0,l;this.isDone=function(e){return s[e]==i},this.markDone=function(e){s[e]=i},this.add=this.load=function(e,t,r){var i,a=s[e];a==l&&(o.push(e),s[e]=n),t&&(u[e]||(u[e]=[]),u[e].push({func:t,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(o,e,t)},this.loadScripts=function(t,n,o){function p(t){e.each(u[t],function(e){e.func.call(e.scope)}),u[t]=l}var h;a.push({func:n,scope:o||this}),h=function(){var n=e.grep(t);t.length=0,e.each(n,function(e){if(s[e]==i){p(e);return}s[e]!=r&&(s[e]=r,f++,c(e,function(){s[e]=i,f--,p(e),h()}))}),f||(e.each(a,function(e){e.func.call(e.scope)}),a.length=0)},h()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(e,t){function r(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){s=e[r];if(s)return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode){s=o[r];if(s)return s}}}}var n=e;this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)}},function(e){e.dom.RangeUtils=function(t){var n="﻿";this.walk=function(n,r){function v(e){var t;return t=e[0],t.nodeType===3&&t===i&&s>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],u===0&&e.length>0&&t===o&&t.nodeType===3&&e.splice(e.length-1,1),e}function m(e,t,n){var r=[];for(;e&&e!=n;e=e[t])r.push(e);return r}function g(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function y(e,t,n){var i=n?"nextSibling":"previousSibling";for(c=e,h=c.parentNode;c&&c!=t;c=h)h=c.parentNode,p=m(c==e?c:c[i],i),p.length&&(n||p.reverse(),r(v(p)))}var i=n.startContainer,s=n.startOffset,o=n.endContainer,u=n.endOffset,a,f,l,c,h,p,d;d=t.select("td.mceSelected,th.mceSelected");if(d.length>0){e.each(d,function(e){r([e])});return}i.nodeType==1&&i.hasChildNodes()&&(i=i.childNodes[s]),o.nodeType==1&&o.hasChildNodes()&&(o=o.childNodes[Math.min(u-1,o.childNodes.length-1)]);if(i==o)return r(v([i]));a=t.findCommonAncestor(i,o);for(c=i;c;c=c.parentNode){if(c===o)return y(i,a,!0);if(c===a)break}for(c=o;c;c=c.parentNode){if(c===i)return y(o,a);if(c===a)break}f=g(i,a)||i,l=g(o,a)||o,y(i,f,!0),p=m(f==i?f:f.nextSibling,"nextSibling",l==o?l.nextSibling:l),p.length&&r(v(p)),y(o,l)},this.split=function(e){function s(e,t){return e.splitText(t)}var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t==r&&t.nodeType==3?n>0&&n<t.nodeValue.length&&(r=s(t,n),t=r.previousSibling,i>n?(i-=n,t=r=s(r,i).previousSibling,i=r.nodeValue.length,n=0):i=0):(t.nodeType==3&&n>0&&n<t.nodeValue.length&&(t=s(t,n),n=0),r.nodeType==3&&i>0&&i<r.nodeValue.length&&(r=s(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(r,i){var s=this,o=r.root,u=r.items,a=r.enableUpDown,f=r.enableLeftRight||!r.enableUpDown,l=r.excludeFromTabOrder,c,h,p,d,v;i=i||e.DOM,c=
function(e){v=e.target.id},h=function(e){i.setAttrib(e.target.id,"tabindex","-1")},d=function(e){var t=i.get(v);i.setAttrib(t,"tabindex","0"),t.focus()},s.focus=function(){i.get(v).focus()},s.destroy=function(){n(u,function(e){i.unbind(i.get(e.id),"focus",c),i.unbind(i.get(e.id),"blur",h)}),i.unbind(i.get(o),"focus",d),i.unbind(i.get(o),"keydown",p),u=i=o=s.focus=c=h=p=d=null,s.destroy=function(){}},s.moveFocus=function(e,o){var a=-1,f=s.controls,l;if(!v)return;n(u,function(e,t){if(e.id===v)return a=t,!1}),a+=e,a<0?a=u.length-1:a>=u.length&&(a=0),l=u[a],i.setAttrib(v,"tabindex","-1"),i.setAttrib(l.id,"tabindex","0"),i.get(l.id).focus(),r.actOnFocus&&r.onAction(l.id),o&&t.cancel(o)},p=function(e){var n=37,i=39,o=38,u=40,l=27,c=14,h=13,p=32;switch(e.keyCode){case n:f&&s.moveFocus(-1);break;case i:f&&s.moveFocus(1);break;case o:a&&s.moveFocus(-1);break;case u:a&&s.moveFocus(1);break;case l:r.onCancel&&(r.onCancel(),t.cancel(e));break;case c:case h:case p:r.onAction&&(r.onAction(v),t.cancel(e))}},n(u,function(e,t){var n;e.id||(e.id=i.uniqueId("_mce_item_")),l?(i.bind(e.id,"blur",h),n="-1"):n=t===0?"0":"-1",i.setAttrib(e.id,"tabindex",n),i.bind(i.get(e.id),"focus",c)}),u[0]&&(v=u[0].id),i.setAttrib(o,"tabindex","-1"),i.bind(i.get(o),"focus",d),i.bind(i.get(o),"keydown",p)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,r){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=r},setAriaProperty:function(e,n){var r=t.get(this.id+"_aria")||t.get(this.id);r&&t.setAttrib(r,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var r=t.get(this.id);e=this.classPrefix+e,n?t.addClass(r,e):t.removeClass(r,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e=this,t;n(e.disabled)&&(t=e.disabled,e.disabled=-1,e.setDisabled(t)),n(e.active)&&(t=e.active,e.active=-1,e.setActive(t))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var r=this;r.parent(t,n),r.items={},r.collapsed=!1,r.menuCount=0,r.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&i(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&i(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(t){return t.settings||(t=new e.ui.MenuItem(t.id||n.uniqueId(),t)),this.onAddItem.dispatch(this,t),this.items[t.id]=t},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return this.menuCount!==0},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;i(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(t){var r=new e.ui.Menu(t.id||n.uniqueId(),t);return r.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),r}})}(tinymce),function(e){var t=e.is,n=e.DOM,r=e.each,i=e.dom.Event,s=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(r,i){i=i||{},i.container=i.container||n.doc.body,i.offset_x=i.offset_x||0,i.offset_y=i.offset_y||0,i.vp_offset_x=i.vp_offset_x||0,i.vp_offset_y=i.vp_offset_y||0,t(i.icons)&&!i.icons&&(i["class"]+=" mceNoIcons"),this.parent(r,i),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var r=this,i=r.settings,s;return t.container=t.container||i.container,t.parent=r,t.constrain=t.constrain||i.constrain,t["class"]=t["class"]||i["class"],t.vp_offset_x=t.vp_offset_x||i.vp_offset_x,t.vp_offset_y=t.vp_offset_y||i.vp_offset_y,t.keyboard_focus=i.keyboard_focus,s=new e.ui.DropMenu(t.id||n.uniqueId(),t),s.onAddItem.add(r.onAddItem.dispatch,r.onAddItem),s},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e=this,t=e.settings,r=n.get("menu_"+e.id+"_tbl"),i=n.get("menu_"+e.id+"_co"),s,o;s=t.max_width?Math.min(r.clientWidth,t.max_width):r.clientWidth,o=t.max_height?Math.min(r.clientHeight,t.max_height):r.clientHeight,n.boxModel?e.element.setStyles({width:s,height:o}):e.element.setStyles({width:s+2,height:o+2}),t.max_width&&n.setStyle(i,"width",s),t.max_height&&(n.setStyle(i,"height",o),r.clientHeight<t.max_height&&n.setStyle(i,"overflow","hidden"))},showMenu:function(t,o,u){var a=this,f=a.settings,l,c=n.getViewPort(),h,p,d,v,m=2,g,y,b=a.classPrefix;a.collapse(1);if(a.isMenuVisible)return;a.rendered?l=n.get("menu_"+a.id):(l=n.add(a.settings.container,a.renderNode()),r(a.items,function(e){e.postRender()}),a.element=new s("menu_"+a.id,{blocker:1,container:f.container})),e.isOpera||n.setStyles(l,{left:-65535,top:-65535}),n.show(l),a.update(),t+=f.offset_x||0,o+=f.offset_y||0,c.w-=4,c.h-=4,f.constrain&&(h=l.clientWidth-m,p=l.clientHeight-m,d=c.x+c.w,v=c.y+c.h,t+f.vp_offset_x+h>d&&(t=u?u-h:Math.max(0,d-f.vp_offset_x-h)),o+f.vp_offset_y+p>v&&(o=Math.max(0,v-f.vp_offset_y-p))),n.setStyles(l,{left:t,top:o}),a.element.update(),a.isMenuVisible=1,a.mouseClickFunc=i.add(l,"click",function(e){var t;e=e.target;if(e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,b+"ItemSub")){t=a.items[e.id];if(t.isDisabled())return;g=a;while(g)g.hideMenu&&g.hideMenu(),g=g.settings.parent;return t.settings.onclick&&t.settings.onclick(e),i.cancel(e)}}),a.hasMenus()&&(a.mouseOverFunc=i.add(l,"mouseover",function(e){var t,r,i;e=e.target;if(e&&(e=n.getParent(e,"tr"))){t=a.items[e.id],a.lastMenu&&a.lastMenu.collapse(1);if(t.isDisabled())return;e&&n.hasClass(e,b+"ItemSub")&&(r=n.getRect(e),t.showMenu(r.x+r.w-m,r.y-m,r.x),a.lastMenu=t,n.addClass(n.get(t.id).firstChild,b+"ItemActive"))}})),i.add(l,"keydown",a._keyHandler,a),a.onShowMenu.dispatch(a),f.keyboard_focus&&a._setupKeyboardNav()},hideMenu:function(e){var t=this,r=n.get("menu_"+t.id),s;if(!t.isMenuVisible)return;t.keyboardNav&&t.keyboardNav.destroy(),i.remove(r,"mouseover",t.mouseOverFunc),i.remove(r,"click",t.mouseClickFunc),i.remove(r,"keydown",t._keyHandler),n.hide(r),t.isMenuVisible=0,e||t.collapse(1),t.element&&t.element.hide(),(s=n.get(t.id))&&n.removeClass(s.firstChild,t.classPrefix+"ItemActive"),t.onHideMenu.dispatch(t)},add:function(e){var t=this,r;return e=t.parent(e),t.isRendered&&(r=n.get("menu_"+t.id))&&t._add(n.select("tbody",r)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),i.remove(t,"mouseover",e.mouseOverFunc),i.remove(n.select("a",t),"focus",e.mouseOverFunc),i.remove(t,"click",e.mouseClickFunc),i.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e=this,t=e.settings,i,o,u,a;return a=n.create("div",{role:"listbox",id:"menu_"+e.id,"class":t["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),e.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+e.settings.parent.id),u=n.add(a,"div",{role:"presentation",id:"menu_"+e.id+"_co","class":e.classPrefix+(t["class"]?" "+t["class"]:"")}),e.element=new s("menu_"+e.id,{blocker:1,container:t.container}),t.menu_line&&n.add(u,"span",{"class":e.classPrefix+"Line"}),i=n.add(u,"table",{role:"presentation",id:"menu_"+e.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),o=n.add(i,"tbody"),r(e.items,function(t){e._add(o,t)}),e.rendered=!0,a},_setupKeyboardNav:function(){var t,r,i=this;t=n.select("#menu_"+i.id)[0],r=n.select("a[role=option]","menu_"+i.id),r.splice(0,0,t),i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:r,onCancel:function(){i.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this,n;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),i.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var r,i=t.settings,s,o,u,a=this.classPrefix,f;if(i.separator){o=n.add(e,"tr",{id:t.id,"class":a+"ItemSeparator"}),n.add(o,"td",{"class":a+"ItemSeparator"}),(r=o.previousSibling)&&n.addClass(r,"mceLast");return}r=o=n.add(e,"tr",{id:t.id,"class":a+"Item "+a+"ItemEnabled"}),r=u=n.add(r,i.titleItem?"th":"td"),r=s=n.add(r,"a",{id:t.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),i.parent&&(n.setAttrib(s,"aria-haspopup","true"),n.setAttrib(s,"aria-owns","menu_"+t.id)),n.addClass(u,i["class"]),f=n.add(r,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")}),i.icon_src&&n.add(f,"img",{src:i.icon_src}),r=n.add(r,i.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&n.setAttrib(r,"style",t.settings.style),e.childNodes.length==1&&n.addClass(o,"mceFirst"),(r=o.previousSibling)&&n.hasClass(r,a+"ItemSeparator")&&n.addClass(o,"mceFirst"),t.collapse&&n.addClass(o,a+"ItemSub"),(r=o.previousSibling)&&n.removeClass(r,"mceLast"),n.addClass(o,"mceLast")}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,n=this.settings,r,i;return i=t.encode(n.label||""),r='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+n["class"]+(i?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(n.title)+'">',n.image&&(!this.editor||!this.editor.forcedHighContrastMode)?r+='<img class="mceIcon" src="'+n.image+'" alt="'+t.encode(n.title)+'" />'+i:r+='<span class="mceIcon '+n["class"]+'"></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":""),r+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+n.title+"</span>",r+="</a>",r},postRender:function(){var t=this,n=t.settings;e.dom.Event.add(t.id,"click",function(e){if(!t.isDisabled())return n.onclick.call(n.scope,e)})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,r){var s=this;s.parent(t,n,r),s.items=[],s.onChange=new i(s),s.onPostRender=new i(s),s.onAdd=new i(s),s.onRenderMenu=new e.util.Dispatcher(this),s.classPrefix="mceListBox"},select:function(e){var t=this,n,i;if(e==undefined)return t.selectByIndex(-1);e&&e.call?i=e:i=function(t){return t==e},e!=t.selectedValue&&(r(t.items,function(e,r){if(i(e.value))return n=1,t.selectByIndex(r),!1}),n||t.selectByIndex(-1))},selectByIndex:function(e){var n=this,r,i,s;e!=n.selectedIndex&&(r=t.get(n.id+"_text"),s=t.get(n.id+"_voiceDesc"),i=n.items[e],i?(n.selectedValue=i.value,n.selectedIndex=e,t.setHTML(r,t.encode(i.title)),t.setHTML(s,n.settings.title+" - "+i.title),t.removeClass(r,"mceTitle"),t.setAttrib(n.id,"aria-valuenow",i.title)):(t.setHTML(r,t.encode(n.settings.title)),t.setHTML(s,t.encode(n.settings.title)),t.addClass(r,"mceTitle"),n.selectedValue=n.selectedIndex=null,t.setAttrib(n.id,"aria-valuenow",n.settings.title)),r=0)},add:function(t,n,r){var i=this;r=r||{},r=e.extend(r,{title:t,value:n}),i.items.push(r),i.onAdd.dispatch(i,r)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,r=n.settings,i=n.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(r["class"]?" "+r["class"]:"")+'"><tbody><tr>',e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},n.settings.title),e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>",e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",e+="</tr></tbody></table></span>",e},showMenu:function(){var i=this,s,o=t.get(this.id),u;if(i.isDisabled()||i.items.length==0)return;if(i.menu&&i.menu.isMenuVisible)return i.hideMenu();i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0),s=t.getPos(o),u=i.menu,u.settings.offset_x=s.x,u.settings.offset_y=s.y,u.settings.keyboard_focus=!e.isOpera,i.oldID&&u.items[i.oldID].setSelected(0),r(i.items,function(e){e.value===i.selectedValue&&(u.items[e.id].setSelected(1),i.oldID=e.id)}),u.showMenu(0,o.clientHeight),n.add(t.doc,"mousedown",i.hideMenu,i),t.addClass(i.id,i.classPrefix+"Selected")},hideMenu:function(e){var r=this;if(r.menu&&r.menu.isMenuVisible){t.removeClass(r.id,r.classPrefix+"Selected");if(!(!e||e.type!="mousedown"||e.target.id!=r.id+"_text"&&e.target.id!=r.id+"_open"))return;if(!e||!t.getParent(e.target,".mceMenu"))t.removeClass(r.id,r.classPrefix+"Selected"),n.remove(t.doc,"mousedown",r.hideMenu,r),r.menu.hideMenu()}},renderMenu:function(){var e=this,n;n=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":e.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),n.onHideMenu.add(function(){e.hideMenu(),e.focus()}),n.add({title:e.settings.title,"class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}),r(e.items,function(r){r.value===undefined?n.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){e.settings.onselect("")!==!1&&e.select("")}}):(r.id=t.uniqueId(),r.role="option",r.onclick=function(){e.settings.onselect(r.value)!==!1&&e.select(r.value)},n.add(r))}),e.onRenderMenu.dispatch(e,n),e.menu=n},postRender:function(){var r=this,i=r.classPrefix;n.add(r.id,"click",r.showMenu,r),n.add(r.id,"keydown",function(e){e.keyCode==32&&(r.showMenu(e),n.cancel(e))}),n.add(r.id,"focus",function(){r._focused||(r.keyDownHandler=n.add(r.id,"keydown",function(e){e.keyCode==40&&(r.showMenu(),n.cancel(e))}),r.keyPressHandler=n.add(r.id,"keypress",function(e){var t;e.keyCode==13&&(t=r.selectedValue,r.selectedValue=null,n.cancel(e),r.settings.onselect(t))})),r._focused=1}),n.add(r.id,"blur",function(){n.remove(r.id,"keydown",r.keyDownHandler),n.remove(r.id,"keypress",r.keyPressHandler),r._focused=0});if(e.isIE6||!t.boxModel)n.add(r.id,"mouseover",function(){t.hasClass(r.id,i+"Disabled")||t.addClass(r.id,i+"Hover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,i+"Disabled")||t.removeClass(r.id,i+"Hover")});r.onPostRender.dispatch(r,t.get(r.id))},destroy:function(){this.parent(),n.clear(this.id+"_text"),n.clear(this.id+"_open")}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t=this,n,i;if(e==undefined)return t.selectByIndex(-1);e&&e.call?i=e:i=function(t){return t==e},e!=t.selectedValue&&(r(t.items,function(e,r){if(i(e.value))return n=1,t.selectByIndex(r),!1}),n||t.selectByIndex(-1))},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,r){var i,s=this;r=r||{},r.value=n,s.isRendered()&&t.add(t.get(this.id),"option",r,e),i={title:e,value:n,attribs:r},s.items.push(i),s.onAdd.dispatch(s,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;return e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --"),r(n.items,function(n){e+=t.createHTML("option",{value:n.value},n.title)}),e=t.createHTML("select",{id:n.id,"class":"mceNativeListBox","aria-labelledby":n.id+"_aria"},e),e+=t.createHTML("span",{id:n.id+"_aria",style:"display: none"},n.settings.title),e},postRender:function(){function o(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var r=this,i,s=!0;r.rendered=!0,n.add(r.id,"change",o),n.add(r.id,"keydown",function(t){var u;n.remove(r.id,"change",i),s=!1,u=n.add(r.id,"blur",function(){if(s)return;s=!0,n.add(r.id,"change",o),n.remove(r.id,"blur",u)});if(!(!e.isWebKit||t.keyCode!=37&&t.keyCode!=39))return n.prevent(t);if(t.keyCode==13||t.keyCode==32)return o(t),n.cancel(t)}),r.onPostRender.dispatch(r,t.get(r.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,r,i){this.parent(n,r,i),this.onRenderMenu=new e.util.Dispatcher(this),r.menu_container=r.menu_container||t.doc.body},showMenu:function(){var e=this,r,i,s=t.get(e.id),o;if(e.isDisabled())return;e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0);if(e.isMenuVisible)return e.hideMenu();r=t.getPos(e.settings.menu_container),i=t.getPos(s),o=e.menu,o.settings.offset_x=i.x,o.settings.offset_y=i.y,o.settings.vp_offset_x=i.x,o.settings.vp_offset_y=i.y,o.settings.keyboard_focus=e._focused,o.showMenu(0,s.clientHeight),n.add(t.doc,"mousedown",e.hideMenu,e),e.setState("Selected",1),e.isMenuVisible=1},renderMenu:function(){var e=this,t;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons}),t.onHideMenu.add(function(){e.hideMenu(),e.focus()}),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(e){var r=this;if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id||e.id===r.id+"_open"}))return;if(!e||!t.getParent(e.target,".mceMenu"))r.setState("Selected",0),n.remove(t.doc,"mousedown",r.hideMenu,r),r.menu&&r.menu.hideMenu();r.isMenuVisible=0},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n=this,r=n.settings,i;return e="<tbody><tr>",r.image?i=t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]}):i=t.createHTML("span",{"class":"mceAction "+r["class"]},""),i+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},r.title),e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>",i=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},e),t.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var r=this,i=r.settings,s;i.onclick&&(s=function(e){r.isDisabled()||(i.onclick(r.value),n.cancel(e))},n.add(r.id+"_action","click",s),n.add(r.id,["click","keydown"],function(e){var t=32,i=14,o=13,u=38,a=40;if((e.keyCode===32||e.keyCode===13||e.keyCode===14)&&!e.altKey&&!e.ctrlKey&&!e.metaKey)s(),n.cancel(e);else if(e.type==="click"||e.keyCode===a)r.showMenu(),n.cancel(e)})),n.add(r.id+"_open","click",function(e){r.showMenu(),n.cancel(e)}),n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1}),n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0});if(e.isIE6||!t.boxModel)n.add(r.id,"mouseover",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.addClass(r.id,"mceSplitButtonHover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.removeClass(r.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,r){var i=this;i.parent(t,n,r),i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings),i.onShowMenu=new e.util.Dispatcher(i),i.onHideMenu=new e.util.Dispatcher(i),i.value=n.default_color},showMenu:function(){var e=this,r,i,s,o;if(e.isDisabled())return;e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0);if(e.isMenuVisible)return e.hideMenu();s=t.get(e.id),t.show(e.id+"_menu"),t.addClass(s,"mceSplitButtonSelected"),o=t.getPos(s),t.setStyles(e.id+"_menu",{left:o.x,top:o.y+s.clientHeight,zIndex:2e5}),s=0,n.add(t.doc,"mousedown",e.hideMenu,e),e.onShowMenu.dispatch(e),e._focused&&(e._keyHandler=n.add(e.id+"_menu","keydown",function(t){t.keyCode==27&&e.hideMenu()}),t.select("a",e.id+"_menu")[0].focus()),e.isMenuVisible=1},hideMenu:function(e){var r=this;if(r.isMenuVisible){if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id+"_open"}))return;if(!e||!t.getParent(e.target,".mceSplitButtonMenu"))t.removeClass(r.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",r.hideMenu,r),n.remove(r.id+"_menu","keydown",r._keyHandler),t.hide(r.id+"_menu");r.isMenuVisible=0,r.onHideMenu.dispatch()}},renderMenu:function(){var s=this,o,u=0,a=s.settings,f,l,c,h,p;return h=t.add(a.menu_container,"div",{role:"listbox",id:s.id+"_menu","class":a.menu_class+" "+a["class"],style:"position:absolute;left:0;top:-1000px;"}),o=t.add(h,"div",{"class":a["class"]+" mceSplitButtonMenu"}),t.add(o,"span",{"class":"mceMenuLine"}),f=t.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"}),l=t.add(f,"tbody"),u=0,i(r(a.colors,"array")?a.colors:a.colors.split(","),function(e){e=e.replace(/^#/,""),u--||(c=t.add(l,"tr"),u=a.grid_width-1),f=t.add(c,"td"),f=t.add(f,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+e},title:s.editor.getLang("colors."+e,e),"data-mce-color":"#"+e}),s.editor.forcedHighContrastMode&&(f=t.add(f,"canvas",{width:16,height:16,"aria-hidden":"true"}),f.getContext&&(p=f.getContext("2d"))?(p.fillStyle="#"+e,p.fillRect(0,0,16,16)):t.remove(f))}),a.more_colors_func&&(f=t.add(l,"tr"),f=t.add(f,"td",{colspan:a.grid_width,"class":"mceMoreColors"}),f=t.add(f,"a",{role:"option",id:s.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},a.more_colors_title),n.add(f,"click",function(e){return a.more_colors_func.call(a.more_colors_scope||this),n.cancel(e)})),t.addClass(o,"mceColorSplitMenu"),new e.ui.KeyboardNavigation({root:s.id+"_menu",items:t.select("a",s.id+"_menu"),onCancel:function(){s.hideMenu(),s.focus()}}),n.add(s.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(s.id+"_menu","click",function(e){var r;return e=t.getParent(e.target,"a",l),e&&e.nodeName.toLowerCase()=="a"&&(r=e.getAttribute("data-mce-color"))&&s.setColor(r),n.cancel(e)}),h},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){this.parent(),n.clear(this.id+"_menu"),n.clear(this.id+"_more"),t.remove(this.id+"_menu")}})}(tinymce),function(e){var t=e.DOM,n=e.each,r=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,r=[],i=n.controls,s=e.each,o=n.settings;return r.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),r.push("<span role='application'>"),r.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(o.name)+"</span>"),s(i,function(e){r.push(e.renderHTML())}),r.push("</span>"),r.push("</div>"),r.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var r=this,i=[];n(r.controls,function(e){n(e.controls,function(e){e.id&&i.push(e)})}),r.keyNav=new e.ui.KeyboardNavigation({root:r.id,items:i,onCancel:function(){e.isWebKit&&t.get(r.editor.id+"_ifr").focus(),r.editor.focus()},excludeFromTabOrder:!r.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),r.clear(e.id)}})}(tinymce),function(e){var t=e.DOM,n=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e=this,n="",r,i,s=e.settings,o,u,a,f;f=e.controls;for(o=0;o<f.length;o++)i=f[o],u=f[o-1],a=f[o+1],o===0&&(r="mceToolbarStart",i.Button?r+=" mceToolbarStartButton":i.SplitButton?r+=" mceToolbarStartSplitButton":i.ListBox&&(r+=" mceToolbarStartListBox"),n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->"))),u&&i.ListBox&&(u.Button||u.SplitButton)&&(n+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),t.stdMode?n+='<td style="position: relative">'+i.renderHTML()+"</td>":n+="<td>"+i.renderHTML()+"</td>",a&&i.ListBox&&(a.Button||a.SplitButton)&&(n+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return r="mceToolbarEnd",i.Button?r+=" mceToolbarEndButton":i.SplitButton?r+=" mceToolbarEndSplitButton":i.ListBox&&(r+=" mceToolbarEndListBox"),n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:e.id,"class":"mceToolbar"+(s["class"]?" "+s["class"]:""),cellpadding:"0",cellspacing:"0",align:e.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+n+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:undefined},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return typeof t=="object"?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(t,n,r,i){function u(){var o=s.dependencies(t);e.each(o,function(e){var t=s.createUrl(n,e);s.load(t.resource,t,undefined,undefined)}),r&&(i?r.call(i):r.call(e.ScriptLoader))}var s=this,o=n;if(s.urls[t])return;typeof n=="object"&&(o=n.prefix+n.resource+n.suffix),o.indexOf("/")!=0&&o.indexOf("://")==-1&&(o=e.baseURL+"/"+o),s.urls[t]=o.substring(0,o.lastIndexOf("/")),s.lookup[t]?u():e.ScriptLoader.add(o,u,i)}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t=e.each,n=e.extend,r=e.DOM,i=e.dom.Event,s=e.ThemeManager,o=e.PluginManager,u=e.explode,a=e.util.Dispatcher,f,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=(new e.util.URI(e.documentBaseURL)).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new a(e),i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new a(e),e.onRemoveEditor=new a(e),e.EditorManager=n(e,{editors:[],i18n:{},activeEditor:null,init:function(s){function d(t,n,r){var i=t[n];if(!i)return;return e.is(i,"string")&&(r=i.replace(/\.\w+$/,""),r=r?e.resolve(r):0,i=e.resolve(i)),i.apply(r||this,Array.prototype.slice.call(arguments,2))}var o=this,a,f=e.ScriptLoader,c,h=[],p;s=n({theme:"simple",language:"en"},s),o.settings=s,i.add(document,"init",function(){var n,i;d(s,"onpageload");switch(s.mode){case"exact":n=s.elements||"",n.length>0&&t(u(n),function(n){r.get(n)?(p=new e.Editor(n,s),h.push(p),p.render(1)):t(document.forms,function(i){t(i.elements,function(t){t.name===n&&(n="mce_editor_"+l++,r.setAttrib(t,"id",n),p=new e.Editor(n,s),h.push(p),p.render(1))})})});break;case"textareas":case"specific_textareas":function a(e,t){return t.constructor===RegExp?t.test(e.className):r.hasClass(e,t)}t(r.select("textarea"),function(t){if(s.editor_deselector&&a(t,s.editor_deselector))return;if(!s.editor_selector||a(t,s.editor_selector)){c=r.get(t.name),!t.id&&!c&&(t.id=t.name);if(!t.id||o.get(t.id))t.id=r.uniqueId();p=new e.Editor(t.id,s),h.push(p),p.render(1)}})}s.oninit&&(n=i=0,t(h,function(e){i++,e.initialized?n++:e.onInit.add(function(){n++,n==i&&d(s,"oninit")}),n==i&&d(s,"oninit")}))})},get:function(e){return e===f?this.editors:this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t._setActive(e),t.onAddEditor.dispatch(t,e),e},remove:function(e){var t=this,n,r=t.editors;if(!r[e.id])return null;delete r[e.id];for(n=0;n<r.length;n++)if(r[n]==e){r.splice(n,1);break}return t.activeEditor==e&&t._setActive(r[0]),e.destroy(),t.onRemoveEditor.dispatch(t,e),e},execCommand:function(t,n,r){var i=this,s=i.get(r),o;switch(t){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return i.get(r)||(new e.Editor(r,i.settings)).render(),!0;case"mceAddFrameControl":o=r.window,o.tinyMCE=tinyMCE,o.tinymce=e,e.DOM.doc=o.document,e.DOM.win=o,s=new e.Editor(r.element_id,r),s.render();if(e.isIE){function u(){s.destroy(),o.detachEvent("onunload",u),o=o.tinyMCE=o.tinymce=null}o.attachEvent("onunload",u)}return r.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":if(!s)return i.execCommand("mceAddControl",0,r),!0;return s.isHidden()?s.show():s.hide(),!0}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},execInstanceCommand:function(e,t,n,r){var i=this.get(e);return i?i.execCommand(t,n,r):!1},triggerSave:function(){t(this.editors,function(e){e.save()})},addI18n:function(n,r){var i,s=this.i18n;e.is(n,"string")?t(r,function(e,t){s[n+"."+t]=e}):t(n,function(e,n){t(e,function(e,r){t(e,function(e,t){r==="common"?s[n+"."+t]=e:s[n+"."+r+"."+t]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.extend,i=e.util.Dispatcher,s=e.each,o=e.isGecko,u=e.isIE,a=e.isWebKit,f=e.is,l=e.ThemeManager,c=e.PluginManager,h=e.inArray,p=e.grep,d=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var o=this;o.id=o.editorId=t,o.execCommands={},o.queryStateCommands={},o.queryValueCommands={},o.isNotDirty=!1,o.plugins={},s(["onPreInit"
,"onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(e){o[e]=new i(o)}),o.settings=n=r({id:t,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o,ie7_compat:!0},n),o.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),o.baseURI=e.baseURI,o.contentCSS=[],o.execCallback("setup",o)},render:function(r){function f(){o.language&&o.language_load!==!1&&a.add(e.baseURL+"/langs/"+o.language+".js"),o.theme&&o.theme.charAt(0)!="-"&&!l.urls[o.theme]&&l.load(o.theme,"themes/"+o.theme+"/editor_template"+e.suffix+".js"),s(d(o.plugins),function(t){if(t&&!c.urls[t])if(t.charAt(0)=="-"){t=t.substr(1,t.length);var n=c.dependencies(t);s(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"},t=c.createUrl(n,t);c.load(t.resource,t)})}else{if(t=="safari")return;c.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),a.loadQueue(function(){i.removed||i.init()})}var i=this,o=i.settings,u=i.id,a=e.ScriptLoader;if(!n.domLoaded){n.add(document,"init",function(){i.render()});return}tinyMCE.settings=o;if(!i.getElement())return;if(e.isIDevice&&!e.isIOS5)return;!/TEXTAREA|INPUT/i.test(i.getElement().nodeName)&&o.hidden_input&&t.getParent(u,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:u}),u),e.WindowManager&&(i.windowManager=new e.WindowManager(i)),o.encoding=="xml"&&i.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),o.add_form_submit_trigger&&i.onSubmit.addToTop(function(){i.initialized&&(i.save(),i.isNotDirty=1)}),o.add_unload_trigger&&(i._beforeUnload=tinyMCE.onBeforeUnload.add(function(){i.initialized&&!i.destroyed&&!i.isHidden()&&i.save({format:"raw",no_events:!0})})),e.addUnload(i.destroy,i),o.submit_patch&&i.onBeforeRenderUI.add(function(){var t=i.getElement().form;if(!t)return;if(t._mceOldSubmit)return;!t.submit.nodeType&&!t.submit.length&&(i.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),i.isNotDirty=1,i.formElement._mceOldSubmit(i.formElement)}),t=null}),f()},init:function(){function S(t){var n=c.get(t),i=c.urls[t]||e.documentBaseURL.replace(/\/$/,""),o;n&&e.inArray(E,t)===-1&&(s(c.dependencies(t),function(e){S(e)}),o=new n(r,i),r.plugins[t]=o,o.init&&(o.init(r,i),E.push(t)))}var n,r=this,i=r.settings,a,f,h=r.getElement(),p,v,m,g,y,b,w,E=[];e.add(r),i.aria_label=i.aria_label||t.getAttrib(h,"aria-label",r.getLang("aria.rich_text_area")),i.theme&&(i.theme=i.theme.replace(/-/,""),p=l.get(i.theme),r.theme=new p,r.theme.init&&i.init_theme&&r.theme.init(r,l.urls[i.theme]||e.documentBaseURL.replace(/\/$/,""))),s(d(i.plugins.replace(/\-/g,"")),S),i.popup_css!==!1&&(i.popup_css?i.popup_css=r.documentBaseURI.toAbsolute(i.popup_css):i.popup_css=r.baseURI.toAbsolute("themes/"+i.theme+"/skins/"+i.skin+"/dialog.css")),i.popup_css_add&&(i.popup_css+=","+r.documentBaseURI.toAbsolute(i.popup_css_add)),r.controlManager=new e.ControlManager(r),i.custom_undo_redo&&(r.onBeforeExecCommand.add(function(e,t,n,i,s){t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!s||!s.skip_undo)&&r.undoManager.beforeChange()}),r.onExecCommand.add(function(e,t,n,i,s){t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!s||!s.skip_undo)&&r.undoManager.add()})),r.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||r.nodeChanged()});if(o){function x(e,t){(!t||!t.initial)&&r.execCommand("mceRepaint")}r.onUndo.add(x),r.onRedo.add(x),r.onSetContent.add(x)}r.onBeforeRenderUI.dispatch(r,r.controlManager),i.render_ui&&(a=i.width||h.style.width||h.offsetWidth,f=i.height||h.style.height||h.offsetHeight,r.orgDisplay=h.style.display,b=/^[0-9\.]+(|px)$/i,b.test(""+a)&&(a=Math.max(parseInt(a)+(p.deltaWidth||0),100)),b.test(""+f)&&(f=Math.max(parseInt(f)+(p.deltaHeight||0),100)),p=r.theme.renderUI({targetNode:h,width:a,height:f,deltaWidth:i.delta_width,deltaHeight:i.delta_height}),r.editorContainer=p.editorContainer),document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),t.setStyles(p.sizeContainer||p.editorContainer,{width:a,height:f}),i.content_css&&e.each(d(i.content_css),function(e){r.contentCSS.push(r.documentBaseURI.toAbsolute(e))}),f=(p.iframeHeight||f)+(typeof f=="number"?p.deltaHeight||0:""),f<100&&(f=100),r.iframeHTML=i.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',i.document_base_url!=e.documentBaseURL&&(r.iframeHTML+='<base href="'+r.documentBaseURI.getURI()+'" />'),i.ie7_compat?r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',r.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(w=0;w<r.contentCSS.length;w++)r.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+r.contentCSS[w]+'" />';g=i.body_id||"tinymce",g.indexOf("=")!=-1&&(g=r.getParam("body_id","","hash"),g=g[r.id]||g),y=i.body_class||"",y.indexOf("=")!=-1&&(y=r.getParam("body_class","","hash"),y=y[r.id]||""),r.iframeHTML+='</head><body id="'+g+'" class="mceContentBody '+y+'"><br></body></html>',e.relaxedDomain&&(u||e.isOpera&&parseFloat(opera.version())<11)&&(m='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+r.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),n=t.add(p.iframeContainer,"iframe",{id:r.id+"_ifr",src:m||'javascript:""',frameBorder:"0",allowTransparency:"true",title:i.aria_label,style:{width:"100%",height:f,display:"block"}}),r.contentAreaContainer=p.iframeContainer,t.get(p.editorContainer).style.display=r.orgDisplay,t.get(r.id).style.display="none",t.setAttrib(r.id,"aria-hidden",!0),(!e.relaxedDomain||!m)&&r.setupIframe(),h=n=p=null},setupIframe:function(){var r=this,i=r.settings,a=t.get(r.id),f=r.getDoc(),l,c;if(!u||!e.relaxedDomain)f.open(),f.write(r.iframeHTML),f.close(),e.relaxedDomain&&(f.domain=e.relaxedDomain);c=r.getBody(),c.disabled=!0,i.readonly||(c.contentEditable=!0),c.disabled=!1,r.schema=new e.html.Schema(i),r.dom=new e.dom.DOMUtils(r.getDoc(),{keep_values:!0,url_converter:r.convertURL,url_converter_scope:r,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:r.schema}),r.parser=new e.html.DomParser(i,r.schema),r.settings.allow_html_in_named_anchor||r.parser.addAttributeFilter("name",function(e,t){var n=e.length,r,i,s,o;while(n--){o=e[n];if(o.name==="a"&&o.firstChild){s=o.parent,r=o.lastChild;do i=r.prev,s.insert(r,o),r=i;while(r)}}}),r.parser.addAttributeFilter("src,href,style",function(e,t){var n=e.length,i,s=r.dom,o,u;while(n--)i=e[n],o=i.attr(t),u="data-mce-"+t,i.attributes.map[u]||(t==="style"?i.attr(u,s.serializeStyle(s.parseStyle(o),i.name)):i.attr(u,r.convertURL(o,t,i.name)))}),r.parser.addNodeFilter("script",function(e,t){var n=e.length,r;while(n--)r=e[n],r.attr("type","mce-"+(r.attr("type")||"text/javascript"))}),r.parser.addNodeFilter("#cdata",function(e,t){var n=e.length,r;while(n--)r=e[n],r.type=8,r.name="#comment",r.value="[CDATA["+r.value+"]]"}),r.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,n){var i=t.length,s,o=r.schema.getNonEmptyElements();while(i--)s=t[i],s.isEmpty(o)&&(s.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),r.serializer=new e.dom.Serializer(i,r.dom,r.schema),r.selection=new e.dom.Selection(r.dom,r.getWin(),r.serializer),r.formatter=new e.Formatter(this),r.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e){return!0},onformat:function(e,t,n){s(n,function(t,n){r.dom.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),s("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){r.formatter.register(e,{block:e,remove:"all"})}),r.formatter.register(r.settings.formats),r.undoManager=new e.UndoManager(r),r.undoManager.onAdd.add(function(e,t){if(e.hasUndo())return r.onChange.dispatch(r,t,e)}),r.undoManager.onUndo.add(function(e,t){return r.onUndo.dispatch(r,t,e)}),r.undoManager.onRedo.add(function(e,t){return r.onRedo.dispatch(r,t,e)}),r.forceBlocks=new e.ForceBlocks(r,{forced_root_block:i.forced_root_block}),r.editorCommands=new e.EditorCommands(r),r.serializer.onPreProcess.add(function(e,t){return r.onPreProcess.dispatch(r,t,e)}),r.serializer.onPostProcess.add(function(e,t){return r.onPostProcess.dispatch(r,t,e)}),r.onPreInit.dispatch(r),i.gecko_spellcheck||(r.getBody().spellcheck=0),i.readonly||r._addEvents(),r.controlManager.onPostRender.dispatch(r,r.controlManager),r.onPostRender.dispatch(r),r.quirks=new e.util.Quirks(this),i.directionality&&(r.getBody().dir=i.directionality),i.nowrap&&(r.getBody().style.whiteSpace="nowrap"),i.handle_node_change_callback&&r.onNodeChange.add(function(e,t,n){r.execCallback("handle_node_change_callback",r.id,n,-1,-1,!0,r.selection.isCollapsed())}),i.save_callback&&r.onSaveContent.add(function(e,t){var n=r.execCallback("save_callback",r.id,t.content,r.getBody());n&&(t.content=n)}),i.onchange_callback&&r.onChange.add(function(e,t){r.execCallback("onchange_callback",r,t)}),i.protect&&r.onBeforeSetContent.add(function(e,t){i.protect&&s(i.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),i.convert_newlines_to_brs&&r.onBeforeSetContent.add(function(e,t){t.initial&&(t.content=t.content.replace(/\r?\n/g,"<br />"))}),i.preformatted&&r.onPostProcess.add(function(e,t){t.content=t.content.replace(/^\s*<pre.*?>/,""),t.content=t.content.replace(/<\/pre>\s*$/,""),t.set&&(t.content='<pre class="mceItemHidden">'+t.content+"</pre>")}),i.verify_css_classes&&(r.serializer.attribValueFilter=function(e,t){var n,i;return e=="class"?(r.classesRE||(i=r.dom.getClasses(),i.length>0&&(n="",s(i,function(e){n+=(n?"|":"")+e["class"]}),r.classesRE=new RegExp("("+n+")","gi"))),!r.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(t)||r.classesRE.test(t)?t:""):t}),i.cleanup_callback&&(r.onBeforeSetContent.add(function(e,t){t.content=r.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),r.onPreProcess.add(function(e,t){t.set&&r.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&r.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),r.onPostProcess.add(function(e,t){t.set&&(t.content=r.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=r.execCallback("cleanup_callback","get_from_editor",t.content,t))})),i.save_callback&&r.onGetContent.add(function(e,t){t.save&&(t.content=r.execCallback("save_callback",r.id,t.content,r.getBody()))}),i.handle_event_callback&&r.onEvent.add(function(e,t,i){r.execCallback("handle_event_callback",t,e,i)===!1&&n.cancel(t)}),r.onSetContent.add(function(){r.addVisual(r.getBody())}),i.padd_empty_editor&&r.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(o){function h(e,t){s(e.dom.select("a"),function(t){var n=t.parentNode;e.dom.isBlock(n)&&n.lastChild===t&&e.dom.add(n,"br",{"data-mce-bogus":1})})}r.onExecCommand.add(function(e,t){t==="CreateLink"&&h(e)}),r.onSetContent.add(r.selection.onSetContent.add(h))}r.load({initial:!0,format:"html"}),r.startContent=r.getContent({format:"raw"}),r.undoManager.add(),r.initialized=!0,r.onInit.dispatch(r),r.execCallback("setupcontent_callback",r.id,r.getBody(),r.getDoc()),r.execCallback("init_instance_callback",r),r.focus(!0),r.nodeChanged({initial:1}),s(r.contentCSS,function(e){r.dom.loadCSS(e)}),i.auto_focus&&setTimeout(function(){var t=e.get(i.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),a=null},focus:function(t){var n,r=this,i=r.selection,s=r.settings.content_editable,o,u,a=r.getDoc();t||(o=i.getRng(),o.item&&(u=o.item(0)),r._refreshContentEditable(),i.normalize(),s||r.getWin().focus(),e.isGecko&&r.getBody().focus(),u&&u.ownerDocument==a&&(o=a.body.createControlRange(),o.addElement(u),o.select())),e.activeEditor!=r&&((n=e.activeEditor)!=null&&n.onDeactivate.dispatch(n,r),r.onActivate.dispatch(r,n)),e._setActive(r)},execCallback:function(t){var n=this,r=n.settings[t],i;if(!r)return;return n.callbackLookup&&(i=n.callbackLookup[t])&&(r=i.func,i=i.scope),f(r,"string")&&(i=r.replace(/\.\w+$/,""),i=i?e.resolve(i):0,r=e.resolve(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[t]={func:r,scope:i}),r.apply(i||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",r=e.i18n;return t?r[n+"."+t]||t.replace(/{\#([^}]+)\}/g,function(e,t){return r[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(f(n)?n:"{#"+t+"}")},getParam:function(t,n,r){var i=e.trim,o=f(this.settings[t])?this.settings[t]:n,u;return r==="hash"?(u={},f(o,"string")?s(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),e.length>1?u[i(e[0])]=i(e[1]):u[i(e[0])]=i(e)}):u=o,u):o},nodeChanged:function(e){var t=this,n=t.selection,r=n.getStart()||t.getBody();t.initialized&&(e=e||{},r=u&&r.ownerDocument!=t.getDoc()?t.getBody():r,e.parents=[],t.dom.getParent(r,function(t){if(t.nodeName=="BODY")return!0;e.parents.push(t)}),t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,r,n.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){var i=this,o;return i.settings.custom_shortcuts?(i.shortcuts=i.shortcuts||{},f(n,"string")&&(o=n,n=function(){i.execCommand(o,!1,null)}),f(n,"object")&&(o=n,n=function(){i.execCommand(o[0],o[1],o[2])}),s(d(e),function(e){var o={func:n,scope:r||this,desc:t,alt:!1,ctrl:!1,shift:!1};s(d(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":o[e]=!0;break;default:o.charCode=e.charCodeAt(0),o.keyCode=e.toUpperCase().charCodeAt(0)}}),i.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o}),!0):!1},execCommand:function(e,t,n,r){var i=this,o=0,u,a;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)&&(!r||!r.skip_focus)&&i.focus(),u={},i.onBeforeExecCommand.dispatch(i,e,t,n,u);if(u.terminate)return!1;if(i.execCallback("execcommand_callback",i.id,i.selection.getNode(),e,t,n))return i.onExecCommand.dispatch(i,e,t,n,r),!0;if(u=i.execCommands[e]){a=u.func.call(u.scope,t,n);if(a!==!0)return i.onExecCommand.dispatch(i,e,t,n,r),a}s(i.plugins,function(s){if(s.execCommand&&s.execCommand(e,t,n))return i.onExecCommand.dispatch(i,e,t,n,r),o=1,!1});if(o)return!0;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n))return i.onExecCommand.dispatch(i,e,t,n,r),!0;if(i.editorCommands.execCommand(e,t,n))return i.onExecCommand.dispatch(i,e,t,n,r),!0;i.getDoc().execCommand(e,t,n),i.onExecCommand.dispatch(i,e,t,n,r)},queryCommandState:function(e){var t=this,n,r;if(t._isHidden())return;if(n=t.queryStateCommands[e]){r=n.func.call(n.scope);if(r!==!0)return r}n=t.editorCommands.queryCommandState(e);if(n!==-1)return n;try{return this.getDoc().queryCommandState(e)}catch(i){}},queryCommandValue:function(e){var t=this,n,r;if(t._isHidden())return;if(n=t.queryValueCommands[e]){r=n.func.call(n.scope);if(r!==!0)return r}n=t.editorCommands.queryCommandValue(e);if(f(n))return n;try{return this.getDoc().queryCommandValue(e)}catch(i){}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();u&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t=this,n=t.getElement(),r;if(n)return e=e||{},e.load=!0,r=t.setContent(f(n.value)?n.value:n.innerHTML,e),e.element=n,e.no_events||t.onLoadContent.dispatch(t,e),e.element=n=null,r},save:function(e){var n=this,r=n.getElement(),i,o;if(!r||!n.initialized)return;return e=e||{},e.save=!0,e.no_events||(n.undoManager.typing=!1,n.undoManager.add()),e.element=r,i=e.content=n.getContent(e),e.no_events||n.onSaveContent.dispatch(n,e),i=e.content,/TEXTAREA|INPUT/i.test(r.nodeName)?r.value=i:(r.innerHTML=i,(o=t.getParent(n.id,"form"))&&s(o.elements,function(e){if(e.name==n.id)return e.value=i,!1})),e.element=r=null,i},setContent:function(t,n){var r=this,i,s=r.getBody(),o;n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||r.onBeforeSetContent.dispatch(r,n),t=n.content;if(!e.isIE&&(t.length===0||/^\s+$/.test(t))){o=r.settings.forced_root_block,o?t="<"+o+'><br data-mce-bogus="1"></'+o+">":t='<br data-mce-bogus="1">',s.innerHTML=t,r.selection.select(s,!0),r.selection.collapse(!0);return}return n.format!=="raw"&&(t=(new e.html.Serializer({},r.schema)).serialize(r.parser.parse(t))),n.content=e.trim(t),r.dom.setHTML(s,n.content),n.no_events||r.onSetContent.dispatch(r,n),r.selection.normalize(),n.content},getContent:function(t){var n=this,r;return t=t||{},t.format=t.format||"html",t.get=!0,t.no_events||n.onBeforeGetContent.dispatch(n,t),t.format=="raw"?r=n.getBody().innerHTML:r=n.serializer.serialize(n.getBody(),t),t.content=e.trim(r),t.no_events||n.onGetContent.dispatch(n,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e=this,n;return e.contentWindow||(n=t.get(e.id+"_ifr"),n&&(e.contentWindow=n.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0?e:i.relative_urls?r.documentBaseURI.toRelative(e):(e=r.documentBaseURI.toAbsolute(e,i.remove_script_host),e)},addVisual:function(e){var t=this,n=t.settings;e=e||t.getBody(),f(t.hasVisual)||(t.hasVisual=n.visual),s(t.dom.select("table,a",e),function(e){var r;switch(e.nodeName){case"TABLE":r=t.dom.getAttrib(e,"border");if(!r||r=="0")t.hasVisual?t.dom.addClass(e,n.visual_table_class):t.dom.removeClass(e,n.visual_table_class);return;case"A":r=t.dom.getAttrib(e,"name"),r&&(t.hasVisual?t.dom.addClass(e,"mceItemAnchor"):t.dom.removeClass(e,"mceItemAnchor"));return}}),t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var n=this,r=n.getContainer();n.removed=1,n.hide(),n.execCallback("remove_instance_callback",n),n.onRemove.dispatch(n),n.onExecCommand.listeners=[],e.remove(n),t.remove(r)},destroy:function(t){var r=this;if(r.destroyed)return;t||(e.removeUnload(r.destroy),tinyMCE.onBeforeUnload.remove(r._beforeUnload),r.theme&&r.theme.destroy&&r.theme.destroy(),r.controlManager.destroy(),r.selection.destroy(),r.dom.destroy(),r.settings.content_editable||(n.clear(r.getWin()),n.clear(r.getDoc())),n.clear(r.getBody()),n.clear(r.formElement)),r.formElement&&(r.formElement.submit=r.formElement._mceOldSubmit,r.formElement._mceOldSubmit=null),r.contentAreaContainer=r.formElement=r.container=r.settings.content_element=r.bodyElement=r.contentDocument=r.contentWindow=null,r.selection&&(r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null),r.destroyed=1},_addEvents:function(){function l(e,t){var n=e.type;if(r.removed)return;r.onEvent.dispatch(r,e,t)!==!1&&r[f[e.fakeType||e.type]].dispatch(r,e,t)}var r=this,i,u=r.settings,a=r.dom,f={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};s(f,function(e,n){switch(n){case"contextmenu":a.bind(r.getDoc(),n,l);break;case"paste":a.bind(r.getBody(),n,function(e){l(e)});break;case"submit":case"reset":a.bind(r.getElement().form||t.getParent(r.id,"form"),n,l);break;default:a.bind(u.content_editable?r.getBody():r.getDoc(),n,l)}}),a.bind(u.content_editable?r.getBody():o?r.getDoc():r.getWin(),"focus",function(e){r.focus(!0)}),e.isGecko&&a.bind(r.getDoc(),"DOMNodeInserted",function(e){var t;e=e.target,e.nodeType===1&&e.nodeName==="IMG"&&(t=e.getAttribute("data-mce-src"))&&(e.src=r.documentBaseURI.toAbsolute(t))});if(o){function c(){var e=this,t=e.getDoc(),n=e.settings;if(o&&!n.readonly){e._refreshContentEditable();try{t.execCommand("styleWithCSS",0,!1)}catch(r){if(!e._isHidden())try{t.execCommand("useCSS",0,!0)}catch(r){}}if(!n.table_inline_editing)try{t.execCommand("enableInlineTableEditing",!1,!1)}catch(r){}if(!n.object_resizing)try{t.execCommand("enableObjectResizing",!1,!1)}catch(r){}}}r.onBeforeExecCommand.add(c),r.onMouseDown.add(c)}r.onMouseUp.add(r.nodeChanged),r.onKeyUp.add(function(t,n){var i=n.keyCode;(i>=33&&i<=36||i>=37&&i<=40||i==13||i==45||i==46||i==8||e.isMac&&(i==91||i==93)||n.ctrlKey)&&r.nodeChanged()}),r.onKeyDown.add(function(e,t){if(t.keyCode!=8)return;var n=e.selection.getRng().startContainer,r=e.selection.getRng().startOffset;while(n&&n.nodeType&&n.nodeType!=1&&n.parentNode)n=n.parentNode;if(n&&n.parentNode&&n.parentNode.tagName==="BLOCKQUOTE"&&n.parentNode.firstChild==n&&r==0){e.formatter.toggle("blockquote",null,n.parentNode);var i=e.selection.getRng();i.setStart(n,0),i.setEnd(n,0),e.selection.setRng(i),e.selection.collapse(!1)}}),r.onReset.add(function(){r.setContent(r.startContent,{format:"raw"})});if(u.custom_shortcuts){u.custom_undo_redo_keyboard_shortcuts&&(r.addShortcut("ctrl+z",r.getLang("undo_desc"),"Undo"),r.addShortcut("ctrl+y",r.getLang("redo_desc"),"Redo")),r.addShortcut("ctrl+b",r.getLang("bold_desc"),"Bold"),r.addShortcut("ctrl+i",r.getLang("italic_desc"),"Italic"),r.addShortcut("ctrl+u",r.getLang("underline_desc"),"Underline");for(i=1;i<=6;i++)r.addShortcut("ctrl+"+i,"",["FormatBlock",!1,"h"+i]);r.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),r.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),r.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function h(t){var n=null;return!t.altKey&&!t.ctrlKey&&!t.metaKey?n:(s(r.shortcuts,function(r){if(e.isMac&&r.ctrl!=t.metaKey)return;if(!e.isMac&&r.ctrl!=t.ctrlKey)return;if(r.alt!=t.altKey)return;if(r.shift!=t.shiftKey)return;if(t.keyCode==r.keyCode||t.charCode&&t.charCode==r.charCode)return n=r,!1}),n)}r.onKeyUp.add(function(e,t){var r=h(t);if(r)return n.cancel(t)}),r.onKeyPress.add(function(e,t){var r=h(t);if(r)return n.cancel(t)}),r.onKeyDown.add(function(e,t){var r=h(t);if(r)return r.func.call(r.scope),n.cancel(t)})}e.isIE&&a.bind(r.getDoc(),"controlselect",function(e){var t=r.resizeInfo,i;e=e.target;if(e.nodeName!=="IMG")return;t&&a.unbind(t.node,t.ev,t.cb),a.hasClass(e,"mceItemNoResize")?(ev="resizestart",i=a.bind(e,"resizestart",n.cancel,n)):(ev="resizeend",i=a.bind(e,ev,function(e){var t;e=e.target;if(t=a.getStyle(e,"width"))a.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),a.setStyle(e,"width","");if(t=a.getStyle(e,"height"))a.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),a.setStyle(e,"height","")})),t=r.resizeInfo={node:e,ev:ev,cb:i}}),e.isOpera&&r.onClick.add(function(e,t){n.prevent(t)});if(u.custom_undo_redo){function p(){r.undoManager.typing=!1,r.undoManager.add()}a.bind(r.getDoc(),"focusout",function(e){!r.removed&&r.undoManager.typing&&p()}),r.dom.bind(r.dom.getRoot(),"dragend",function(e){p()}),r.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&n<=36||n>=37&&n<=40||n==13||n==45||t.ctrlKey)&&p()}),r.onKeyDown.add(function(t,i){var s=i.keyCode,o;if(s==8){o=r.getDoc().selection;if(o&&o.createRange&&o.createRange().item)return r.undoManager.beforeChange(),t.dom.remove(o.createRange().item(0)),p(),n.cancel(i)}if(s>=33&&s<=36||s>=37&&s<=40||s==13||s==45){e.isIE&&s==13&&r.undoManager.beforeChange(),r.undoManager.typing&&p();return}(s<16||s>20)&&s!=224&&s!=91&&!r.undoManager.typing&&(r.undoManager.beforeChange(),r.undoManager.typing=!0,r.undoManager.add())}),r.onMouseDown.add(function(){r.undoManager.typing&&p()})}if(e.isGecko){function d(){var e=r.dom.getAttribs(r.selection.getStart().cloneNode(!1));return function(){var t=r.selection.getStart();t!==r.getBody()&&(r.dom.setAttrib(t,"style",null),s(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function v(){var e=r.selection;return!e.isCollapsed()&&e.getStart()!=e.getEnd()}r.onKeyPress.add(function(e,t){var i;if((t.keyCode==8||t.keyCode==46)&&v())return i=d(),r.getDoc().execCommand("delete",!1,null),i(),n.cancel(t)}),r.dom.bind(r.getDoc(),"cut",function(e){var t;v()&&(t=d(),r.onKeyUp.addToTop(n.cancel,n),setTimeout(function(){t(),r.onKeyUp.remove(n.cancel,n)},0))})}},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return o?(e=this.selection.getSel(),!e||!e.rangeCount||e.rangeCount==0):0}})}(tinymce),function(e){var t=e.each,n,r=!0,i=!1;e.EditorCommands=function(s){function h(e,t,n){var s;return e=e.toLowerCase(),(s=a.exec[e])?(s(e,t,n),r):i}function p(e){var t;return e=e.toLowerCase(),(t=a.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=a.value[e])?t(e):i}function v(e,n){n=n||"exec",t(e,function(e,r){t(r.toLowerCase().split(","),function(t){a[n][t]=e})})}function m(e,t,r){return t===n&&(t=i),r===n&&(r=null),s.getDoc().execCommand(e,t,r)}function g(e){return l.match(e)}function y(e,t){l.toggle(e,t?{value:t}:n)}function b(e){c=u.getBookmark(e)}function w(){u.moveToBookmark(c)}var o=s.dom,u=s.selection,a={state:{},exec:{},value:{}},f=s.settings,l=s.formatter,c;e.extend(this,{execCommand:h,queryCommandState:p,queryCommandValue:d,addCommands:v}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(t){var n=s.getDoc(),i;try{m(t)}catch(o){i=r}if(i||!n.queryCommandSupported(t))e.isGecko?s.windowManager.confirm(s.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):s.windowManager.alert(s.getLang("clipboard_no_support"))},unlink:function(e){u.isCollapsed()&&u.select(u.getNode()),m(e),u.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n=e.substring(7);t("left,center,right,full".split(","),function(e){n!=e&&l.remove("align"+e)}),y("align"+n),h("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;m(e),t=o.getParent(u.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),o.split(n,t),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(t,n,r){var i,s;r>=1&&r<=7&&(s=e.explode(f.font_size_style_values),i=e.explode(f.font_size_classes),i?r=i[r-1]||r:r=s[r-1]||r),y(t,r)},RemoveFormat:function(e){l.remove(e)},mceBlockQuote:function(e){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=u.getBookmark();s.setContent(s.getContent({cleanup:r}),{cleanup:r}),u.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||u.getNode();i!=s.getBody()&&(b(),s.dom.remove(i,r),w())},mceSelectNodeDepth:function(e,t,n){var r=0;o.getParent(u.getNode(),function(e){if(e.nodeType==1&&r++==n)return u.select(e),i},s.getBody())},mceSelectNode:function(e,t,n){u.select(n)},mceInsertContent:function(t,n,r){var i,a,f,l,c,h,p,d,v,m,g,y,b,w;i=s.parser,a=new e.html.Serializer({},s.schema),b='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',h={content:r,format:"html"},u.onBeforeSetContent.dispatch(u,h),r=h.content,r.indexOf("{$caret}")==-1&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,b),u.isCollapsed()||s.getDoc().execCommand("Delete",!1,null),f=u.getNode(),h={context:f.nodeName.toLowerCase()},c=i.parse(r,h),g=c.lastChild;if(g.attr("id")=="mce_marker"){p=g;for(g=g.prev;g;g=g.walk(!0))if(g.type==3||!o.isBlock(g.name)){g.parent.insert(p,g,g.name==="br");break}}if(!h.invalid)r=a.serialize(c),g=f.firstChild,y=f.lastChild,!g||g===y&&g.nodeName==="BR"?o.setHTML(f,r):u.setContent(r);else{u.setContent(b),f=s.selection.getNode(),l=s.getBody(),f.nodeType==9?f=g=l:g=f;while(g!==l)f=g,g=g.parentNode;r=f==l?l.innerHTML:o.getOuterHTML(f),r=a.serialize(i.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)}))),f==l?o.setHTML(l,r):o.setOuterHTML(f,r)}p=o.get("mce_marker"),d=o.getRect(p),v=o.getViewPort(s.getWin());if(d.y+d.h>v.y+v.h||d.y<v.y||d.x>v.x+v.w||d.x<v.x)w=e.isIE?s.getDoc().documentElement:s.getBody(),w.scrollLeft=d.x,w.scrollTop=d.y-v.h+25;m=o.createRng(),g=p.previousSibling,g&&g.nodeType==3?m.setStart(g,g.nodeValue.length):(m.setStartBefore(p),m.setEndBefore(p)),o.remove(p),u.setRng(m),u.onSetContent.dispatch(u,h),s.addVisual()},mceInsertRawHTML:function(e,t,n){u.setContent("tiny_mce_marker"),s.setContent(s.getContent().replace(/tiny_mce_marker/g,
function(){return n}))},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var n,r,i;n=f.indentation,r=/[a-z%]+$/i.exec(n),n=parseInt(n),!p("InsertUnorderedList")&&!p("InsertOrderedList")?t(u.getSelectedBlocks(),function(t){e=="outdent"?(i=Math.max(0,parseInt(t.style.paddingLeft||0)-n),o.setStyle(t,"paddingLeft",i?i+r:"")):o.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+r)}):m(e)},mceRepaint:function(){var t;if(e.isGecko)try{b(r),u.getSel()&&u.getSel().selectAllChildren(s.getBody()),u.collapse(r),w()}catch(n){}},mceToggleFormat:function(e,t,n){l.toggle(n)},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual,s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,u.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;typeof n=="string"&&(n={href:n}),r=o.getParent(u.getNode(),"a"),n.href=n.href.replace(" ","%20"),(!r||!n.href)&&l.remove("link"),n.href&&l.apply("link",n,r)},selectAll:function(){var e=o.getRoot(),t=o.createRng();t.setStart(e,0),t.setEnd(e,e.childNodes.length),s.selection.setRng(t)}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){return g("align"+e.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(f.inline_styles){if((e=o.getParent(u.getStart(),o.isBlock))&&parseInt(e.style.paddingLeft)>0)return r;if((e=o.getParent(u.getEnd(),o.isBlock))&&parseInt(e.style.paddingLeft)>0)return r}return p("InsertUnorderedList")||p("InsertOrderedList")||!f.inline_styles&&!!o.getParent(u.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){return o.getParent(u.getNode(),e=="insertunorderedlist"?"UL":"OL")}},"state"),v({"FontSize,FontName":function(e){var t=0,n;if(n=o.getParent(u.getNode(),"span"))e=="fontsize"?t=n.style.fontSize:t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return t}},"value"),f.custom_undo_redo&&v({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function u(){return e.trim(n.getContent({format:"raw",no_events:1}))}var r,i=0,s=[],o;return r={typing:!1,onAdd:new t(r),onUndo:new t(r),onRedo:new t(r),beforeChange:function(){o=n.selection.getBookmark(2,!0)},add:function(e){var t,a=n.settings,f;e=e||{},e.content=u(),f=s[i];if(f&&f.content==e.content)return null;s[i]&&(s[i].beforeBookmark=o);if(a.custom_undo_redo_levels&&s.length>a.custom_undo_redo_levels){for(t=0;t<s.length-1;t++)s[t]=s[t+1];s.length--,i=s.length}return e.bookmark=n.selection.getBookmark(2,!0),i<s.length-1&&(s.length=i+1),s.push(e),i=s.length-1,r.onAdd.dispatch(r,e),n.isNotDirty=0,e},undo:function(){var e,t;return r.typing&&(r.add(),r.typing=!1),i>0&&(e=s[--i],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),r.onUndo.dispatch(r,e)),e},redo:function(){var e;return i<s.length-1&&(e=s[++i],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),r.onRedo.dispatch(r,e)),e},clear:function(){s=[],i=0,r.typing=!1},hasUndo:function(){return i>0||this.typing},hasRedo:function(){return i<s.length-1&&!this.typing}}}}(tinymce),function(e){function f(e){var t,n,r;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(t?(n=e.cloneNode(!1),n.appendChild(t),t=n):t=r=e.cloneNode(!1),t.removeAttribute("id"));while(e=e.parentNode);if(t)return{wrapper:t,inner:r}}function l(e,t){var n=t.ownerDocument.createRange();return n.setStart(e.endContainer,e.endOffset),n.setEndAfter(t),n.cloneContents().textContent.length==0}function c(e,t,n){var r,i;return t.isEmpty(n)?(r=t.getParent(n,"ul,ol"),t.getParent(r.parentNode,"ul,ol")||(t.split(r,n),i=t.create("p",0,'<br data-mce-bogus="1" />'),t.replace(i,n),e.select(i,1)),a):u}var t=e.dom.Event,n=e.isIE,r=e.isGecko,i=e.isOpera,s=e.each,o=e.extend,u=!0,a=!1;e.create("tinymce.ForceBlocks",{ForceBlocks:function(e){var t=this,n=e.settings,r;t.editor=e,t.dom=e.dom,r=(n.forced_root_block||"p").toLowerCase(),n.element=r.toUpperCase(),e.onPreInit.add(t.setup,t)},setup:function(){var i=this,s=i.editor,o=s.settings,a=s.dom,l=s.selection,c=s.schema.getBlockElements();if(o.forced_root_block){function h(){var e=l.getStart(),t=s.getBody(),n,r,i,u,f,h,p,d=-16777215;if(!e||e.nodeType!==1)return;while(e!=t){if(c[e.nodeName])return;e=e.parentNode}n=l.getRng(),n.setStart?(r=n.startContainer,i=n.startOffset,u=n.endContainer,f=n.endOffset):(n.item&&(n=s.getDoc().body.createTextRange(),n.moveToElementText(n.item(0))),tmpRng=n.duplicate(),tmpRng.collapse(!0),i=tmpRng.move("character",d)*-1,tmpRng.collapsed||(tmpRng=n.duplicate(),tmpRng.collapse(!1),f=tmpRng.move("character",d)*-1-i));for(e=t.firstChild;e;e)e.nodeType===3||e.nodeType==1&&!c[e.nodeName]?(h||(h=a.create(o.forced_root_block),e.parentNode.insertBefore(h,e)),p=e,e=e.nextSibling,h.appendChild(p)):(h=null,e=e.nextSibling);if(n.setStart)n.setStart(r,i),n.setEnd(u,f),l.setRng(n);else try{n=s.getDoc().body.createTextRange(),n.moveToElementText(t),n.collapse(!0),n.moveStart("character",i),f>0&&n.moveEnd("character",f),n.select()}catch(v){}s.nodeChanged()}s.onKeyUp.add(h),s.onClick.add(h)}o.force_br_newlines&&n&&s.onKeyPress.add(function(e,n){var r;if(n.keyCode==13&&l.getNode().nodeName!="LI")return l.setContent('<br id="__" /> ',{format:"raw"}),r=a.get("__"),r.removeAttribute("id"),l.select(r),l.collapse(),t.cancel(n)}),o.force_p_newlines&&(n?(e.addUnload(function(){i._previousFormats=0}),s.onKeyPress.add(function(e,t){i._previousFormats=0,t.keyCode==13&&!t.shiftKey&&e.selection.isCollapsed()&&o.keep_styles&&(i._previousFormats=f(e.selection.getStart()))}),s.onKeyUp.add(function(e,t){if(t.keyCode==13&&!t.shiftKey){var n=e.selection.getStart(),r=i._previousFormats;!n.hasChildNodes()&&r&&(n=a.getParent(n,a.isBlock),n&&n.nodeName!="LI"&&(n.innerHTML="",i._previousFormats?(n.appendChild(r.wrapper),r.inner.innerHTML="﻿"):n.innerHTML="﻿",l.select(n,1),l.collapse(!0),e.getDoc().execCommand("Delete",!1,null),i._previousFormats=0))}})):s.onKeyPress.add(function(e,n){n.keyCode==13&&!n.shiftKey&&!i.insertPara(n)&&t.cancel(n)}),r&&s.onKeyDown.add(function(e,t){(t.keyCode==8||t.keyCode==46)&&!t.shiftKey&&i.backspaceDelete(t,t.keyCode==8)}));if(e.isWebKit){function p(e){var t=l.getRng(),n,r=a.create("div",null," "),i,s=a.getViewPort(e.getWin()).h;t.insertNode(n=a.create("br")),t.setStartAfter(n),t.setEndAfter(n),l.setRng(t),l.getSel().focusNode==n.previousSibling&&(l.select(a.insertAfter(a.doc.createTextNode(" "),n)),l.collapse(u)),a.insertAfter(r,n),i=a.getPos(r).y,a.remove(r),i>s&&e.getWin().scrollTo(0,i)}s.onKeyPress.add(function(e,n){n.keyCode==13&&(n.shiftKey||o.force_br_newlines&&!a.getParent(l.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(p(e),t.cancel(n))})}n&&o.element!="P"&&(s.onKeyPress.add(function(e,t){i.lastElm=l.getNode().nodeName}),s.onKeyUp.add(function(e,t){var n,r=l.getNode(),s=e.getBody();s.childNodes.length===1&&r.nodeName=="P"?(r=a.rename(r,o.element),l.select(r),l.collapse(),e.nodeChanged()):t.keyCode==13&&!t.shiftKey&&i.lastElm!="P"&&(n=a.getParent(r,"p"),n&&(a.rename(n,o.element),e.nodeChanged()))}))},getParentBlock:function(e){var t=this.dom;return t.getParent(e,t.isBlock)},insertPara:function(e){function P(e,t){var n=[],s,u,f;e.innerHTML="";if(o.keep_styles){u=t;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(u.nodeName)&&(s=u.cloneNode(a),r.setAttrib(s,"id",""),n.push(s));while(u=u.parentNode)}if(n.length>0){for(f=n.length-1,s=e;f>=0;f--)s=s.appendChild(n[f]);return n[0].innerHTML=i?" ":"<br />",n[0]}e.innerHTML=i?" ":"<br />"}var t=this,n=t.editor,r=n.dom,s=n.getDoc(),o=n.settings,f=n.selection.getSel(),h=f.getRangeAt(0),p=s.body,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A=r.getViewPort(n.getWin()),O,M,_;n.undoManager.beforeChange(),d=s.createRange(),d.setStart(f.anchorNode,f.anchorOffset),d.collapse(u),v=s.createRange(),v.setStart(f.focusNode,f.focusOffset),v.collapse(u),m=d.compareBoundaryPoints(d.START_TO_END,v)<0,g=m?f.anchorNode:f.focusNode,y=m?f.anchorOffset:f.focusOffset,b=m?f.focusNode:f.anchorNode,w=m?f.focusOffset:f.anchorOffset;if(g===b&&/^(TD|TH)$/.test(g.nodeName))return g.firstChild.nodeName=="BR"&&r.remove(g.firstChild),g.childNodes.length==0?(n.dom.add(g,o.element,null,"<br />"),N=n.dom.add(g,o.element,null,"<br />")):(L=g.innerHTML,g.innerHTML="",n.dom.add(g,o.element,null,L),N=n.dom.add(g,o.element,null,"<br />")),h=s.createRange(),h.selectNodeContents(N),h.collapse(1),n.selection.setRng(h),a;g==p&&b==p&&p.firstChild&&n.dom.isBlock(p.firstChild)&&(g=b=g.firstChild,y=w=0,d=s.createRange(),d.setStart(g,0),v=s.createRange(),v.setStart(b,0)),s.body.hasChildNodes()||s.body.appendChild(r.create("br")),g=g.nodeName=="HTML"?s.body:g,g=g.nodeName=="BODY"?g.firstChild:g,b=b.nodeName=="HTML"?s.body:b,b=b.nodeName=="BODY"?b.firstChild:b,E=t.getParentBlock(g),S=t.getParentBlock(b),x=E?E.nodeName:o.element;if(L=t.dom.getParent(E,"li,pre"))return L.nodeName=="LI"?c(n.selection,t.dom,L):u;E&&(E.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(r.getStyle(E,"position",1)))&&(x=o.element,E=null),S&&(S.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(r.getStyle(E,"position",1)))&&(x=o.element,S=null);if(/(TD|TABLE|TH|CAPTION)/.test(x)||E&&x=="DIV"&&/left|right/gi.test(r.getStyle(E,"float",1)))x=o.element,E=S=null;T=E&&E.nodeName==x?E.cloneNode(0):n.dom.create(x),N=S&&S.nodeName==x?S.cloneNode(0):n.dom.create(x),N.removeAttribute("id"),/^(H[1-6])$/.test(x)&&l(h,E)&&(N=n.dom.create(o.element)),L=C=g;do{if(L==p||L.nodeType==9||t.dom.isBlock(L)||/(TD|TABLE|TH|CAPTION)/.test(L.nodeName))break;C=L}while(L=L.previousSibling?L.previousSibling:L.parentNode);L=k=b;do{if(L==p||L.nodeType==9||t.dom.isBlock(L)||/(TD|TABLE|TH|CAPTION)/.test(L.nodeName))break;k=L}while(L=L.nextSibling?L.nextSibling:L.parentNode);C.nodeName==x?d.setStart(C,0):d.setStartBefore(C),d.setEnd(g,y),T.appendChild(d.cloneContents()||s.createTextNode(""));try{v.setEndAfter(k)}catch(D){}return v.setStart(b,w),N.appendChild(v.cloneContents()||s.createTextNode("")),h=s.createRange(),!C.previousSibling&&C.parentNode.nodeName==x?h.setStartBefore(C.parentNode):d.startContainer.nodeName==x&&d.startOffset==0?h.setStartBefore(d.startContainer):h.setStart(d.startContainer,d.startOffset),!k.nextSibling&&k.parentNode.nodeName==x?h.setEndAfter(k.parentNode):h.setEnd(v.endContainer,v.endOffset),h.deleteContents(),i&&n.getWin().scrollTo(0,A.y),T.firstChild&&T.firstChild.nodeName==x&&(T.innerHTML=T.firstChild.innerHTML),N.firstChild&&N.firstChild.nodeName==x&&(N.innerHTML=N.firstChild.innerHTML),r.isEmpty(T)&&P(T,g),r.isEmpty(N)&&(_=P(N,b)),i&&parseFloat(opera.version())<9.5?(h.insertNode(T),h.insertNode(N)):(h.insertNode(N),h.insertNode(T)),N.normalize(),T.normalize(),n.selection.select(N,!0),n.selection.collapse(!0),O=n.dom.getPos(N).y,(O<A.y||O+25>A.y+A.h)&&n.getWin().scrollTo(0,O<A.y?O:O-A.h+25),n.undoManager.add(),a},backspaceDelete:function(n,r){var i=this,s=i.editor,o=s.getBody(),u=s.dom,f,l=s.selection,c=l.getRng(),h=c.startContainer,f,p,d,v;if(!r&&c.collapsed&&h.nodeType==1&&c.startOffset==h.childNodes.length){v=new e.dom.TreeWalker(h.lastChild,h);for(f=h.lastChild;f;f=v.prev())if(f.nodeType==3){c.setStart(f,f.nodeValue.length),c.collapse(!0),l.setRng(c);return}}if(h&&s.dom.isBlock(h)&&!/^(TD|TH)$/.test(h.nodeName)&&r)if(h.childNodes.length==0||h.childNodes.length==1&&h.firstChild.nodeName=="BR"){f=h;while((f=f.previousSibling)&&!s.dom.isBlock(f));if(f){if(h!=o.firstChild){p=s.dom.doc.createTreeWalker(f,NodeFilter.SHOW_TEXT,null,a);while(d=p.nextNode())f=d;c=s.getDoc().createRange(),c.setStart(f,f.nodeValue?f.nodeValue.length:0),c.setEnd(f,f.nodeValue?f.nodeValue.length:0),l.setRng(c),s.dom.remove(h)}return t.cancel(n)}}}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,n){var i=this,s;n=n||{},i.editor=t,i.controls={},i.onAdd=new e.util.Dispatcher(i),i.onPostRender=new e.util.Dispatcher(i),i.prefix=n.prefix||t.id+"_",i._cls={},i.onPostRender.add(function(){r(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,n=this,i=n.editor;r(i.plugins,function(r){if(r.createControl){t=r.createControl(e,n);if(t)return!1}});switch(e){case"|":case"separator":return n.createSeparator()}return!t&&i.buttons&&(t=i.buttons[e])?n.createButton(e,t):n.add(t)},createDropMenu:function(t,n,r){var s=this,o=s.editor,u,a,f,l;n=i({"class":"mceDropDown",constrain:o.settings.constrain_menus},n),n["class"]=n["class"]+" "+o.getParam("skin")+"Skin";if(f=o.getParam("skin_variant"))n["class"]+=" "+o.getParam("skin")+"Skin"+f.substring(0,1).toUpperCase()+f.substring(1);return t=s.prefix+t,l=r||s._cls.dropmenu||e.ui.DropMenu,u=s.controls[t]=new l(t,n),u.onAddItem.add(function(e,t){var n=t.settings;n.title=o.getLang(n.title,n.title),n.onclick||(n.onclick=function(e){n.cmd&&o.execCommand(n.cmd,n.ui||!1,n.value)})}),o.onRemove.add(function(){u.destroy()}),e.isIE&&(u.onShowMenu.add(function(){o.focus(),a=o.selection.getBookmark(1)}),u.onHideMenu.add(function(){a&&(o.selection.moveToBookmark(a),a=0)})),s.add(u)},createListBox:function(t,r,s){function c(t){return t.settings.use_accessible_selects&&!e.isGecko}var o=this,u=o.editor,a,f,l;return o.get(t)?null:(r.title=u.translate(r.title),r.scope=r.scope||u,r.onselect||(r.onselect=function(e){u.execCommand(r.cmd,r.ui||!1,e||r.value)}),r=i({title:r.title,"class":"mce_"+t,scope:r.scope,control_manager:o},r),t=o.prefix+t,u.settings.use_native_selects||c(u)?f=new e.ui.NativeListBox(t,r):(l=s||o._cls.listbox||e.ui.ListBox,f=new l(t,r,u)),o.controls[t]=f,e.isWebKit&&f.onPostRender.add(function(e,t){n.add(t,"mousedown",function(){u.bookmark=u.selection.getBookmark(1)}),n.add(t,"focus",function(){u.selection.moveToBookmark(u.bookmark),u.bookmark=null})}),f.hideMenu&&u.onMouseDown.add(f.hideMenu,f),o.add(f))},createButton:function(t,n,r){var s=this,o=s.editor,u,a,f;return s.get(t)?null:(n.title=o.translate(n.title),n.label=o.translate(n.label),n.scope=n.scope||o,!n.onclick&&!n.menu_button&&(n.onclick=function(){o.execCommand(n.cmd,n.ui||!1,n.value)}),n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:o.getLang("unavailable",""),scope:n.scope,control_manager:s},n),t=s.prefix+t,n.menu_button?(f=r||s._cls.menubutton||e.ui.MenuButton,a=new f(t,n,o),o.onMouseDown.add(a.hideMenu,a)):(f=s._cls.button||e.ui.Button,a=new f(t,n,o)),s.add(a))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f;return s.get(t)?null:(n.title=o.translate(n.title),n.scope=n.scope||o,n.onclick||(n.onclick=function(e){o.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){o.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n),t=s.prefix+t,f=r||s._cls.splitbutton||e.ui.SplitButton,a=s.add(new f(t,n,o)),o.onMouseDown.add(a.hideMenu,a),a)},createColorSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f,l;return s.get(t)?null:(n.title=o.translate(n.title),n.scope=n.scope||o,n.onclick||(n.onclick=function(t){e.isIE&&(l=o.selection.getBookmark(1)),o.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){o.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=i({title:n.title,"class":"mce_"+t,menu_class:o.getParam("skin")+"Skin",scope:n.scope,more_colors_title:o.getLang("more_colors")},n),t=s.prefix+t,f=r||s._cls.colorsplitbutton||e.ui.ColorSplitButton,a=new f(t,n,o),o.onMouseDown.add(a.hideMenu,a),o.onRemove.add(function(){a.destroy()}),e.isIE&&(a.onShowMenu.add(function(){o.focus(),l=o.selection.getBookmark(1)}),a.onHideMenu.add(function(){l&&(o.selection.moveToBookmark(l),l=0)})),s.add(a))},createToolbar:function(t,n,r){var i,s=this,o;return t=s.prefix+t,o=r||s._cls.toolbar||e.ui.Toolbar,i=new o(t,n,s.editor),s.get(t)?null:s.add(i)},createToolbarGroup:function(t,n,r){var i,s=this,o;return t=s.prefix+t,o=r||this._cls.toolbarGroup||e.ui.ToolbarGroup,i=new o(t,n,s.editor),s.get(t)?null:s.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){r(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,r=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,s){var o=this,u="",a,f,l=o.editor.settings.dialog_type=="modal",c,h,p,d=e.DOM.getViewPort(),v;t=t||{},s=s||{},h=i?d.w:screen.width,p=i?d.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(h/2)-t.width/2,t.top=t.top||parseInt(p/2)-t.height/2,s.inline=!1,s.mce_width=t.width,s.mce_height=t.height,s.mce_auto_focus=t.auto_focus,l&&r&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(r&&l?u+=(u?";":"")+n+":"+t:u+=(u?",":"")+n+"="+t)}),o.features=t,o.params=s,o.onOpen.dispatch(o,t,s),v=t.url||t.file,v=e._addVer(v);try{r&&l?(c=1,window.showModalDialog(v,window,u)):c=window.open(v,t.name,u)}catch(m){}c||alert(o.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,r,i,s,o){var u=e.resolve(t);return new u(n,r,i,s,o)},confirm:function(e,t,n,r){r=r||window,t.call(n||this,r.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,r){var i=this;r=r||window,r.alert(i._decode(i.editor.getLang(e,e))),t&&t.call(n||i)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function g(e){return e instanceof Array}function y(e,t){return i.getParents(e,t,i.getRoot())}function b(e){return e.nodeType===1&&(e.face==="mceinline"||e.style.fontFamily==="mceinline")}function w(e){return e?n[e]:n}function E(e,t){e&&(typeof e!="string"?r(e,function(e,t){E(t,e)}):(t=t.length?t:[t],r(t,function(e){e.deep===m&&(e.deep=!e.selector),e.split===m&&(e.split=!e.selector||e.inline),e.remove===m&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),typeof e.classes=="string"&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))}function T(n,l,c){function S(e){var t=e.startContainer,n=e.startOffset,r,i;if(t.nodeType==1||t.nodeValue===""){t=t.nodeType==1?t.childNodes[n]:t;if(t){r=new o(t,t.parentNode);for(i=r.current();i;i=r.next())if(i.nodeType==3&&!H(i)){e.setStart(i,0);break}}}return e}function T(e,t){t=t||p,e&&(t.onformat&&t.onformat(e,t,l,c),r(t.styles,function(t,n){i.setStyle(e,n,P(t,l))}),r(t.attributes,function(t,n){i.setAttrib(e,n,P(t,l))}),r(t.classes,function(t){t=P(t,l),i.hasClass(e,t)||i.addClass(e,t)}))}function N(){function e(e,t){var n=new o(t);for(c=n.current();c;c=n.prev())if(c.childNodes.length>1||c==e)return c}var n=t.selection.getRng(),r=n.startContainer,i=n.endContainer;if(r!=i&&n.endOffset==0){var s=e(r,i),u=s.nodeType==3?s.length:s.childNodes.length;n.setEnd(s,u)}return n}function C(t,n,s,o,u){var a=[],f=-1,l,c=-1,h=-1,p;return r(t.childNodes,function(e,t){if(e.nodeName==="UL"||e.nodeName==="OL")return f=t,l=e,!1}),r(t.childNodes,function(e,t){e.nodeName==="SPAN"&&i.getAttrib(e,"data-mce-type")=="bookmark"&&(e.id==n.id+"_start"?c=t:e.id==n.id+"_end"&&(h=t))}),f<=0||c<f&&h>f?(r(e.grep(t.childNodes),u),0):(p=s.cloneNode(d),r(e.grep(t.childNodes),function(e,t){if(c<f&&t<f||c>f&&t>f)a.push(e),e.parentNode.removeChild(e)}),c<f?t.insertBefore(p,l):c>f&&t.insertBefore(p,l.nextSibling),o.push(p),r(a,function(e){p.appendChild(e)}),p)}function L(t,s,o){var c=[],m,g;m=p.inline||p.block,g=i.create(m),T(g),u.walk(t,function(t){function f(t){var v=t.nodeName.toLowerCase(),y=t.parentNode.nodeName.toLowerCase(),w;if(_(v,"br")){u=0,p.block&&i.remove(t);return}if(p.wrapper&&k(t,n,l)){u=0;return}if(p.block&&!p.wrapper&&z(v)){t=i.rename(t,m),T(t),c.push(t),u=0;return}if(p.selector){r(h,function(e){if("collapsed"in e&&e.collapsed!==E)return;i.is(t,e.selector)&&!b(t)&&(T(t,e),w=!0)});if(!p.inline||w){u=0;return}}!a(m,v)||!a(y,m)||!o&&t.nodeType===3&&t.nodeValue.length===1&&t.nodeValue.charCodeAt(0)===65279||t.id==="_mce_caret"?v=="li"&&s?u=C(t,s,g,c,f):(u=0,r(e.grep(t.childNodes),f),u=0):(u||(u=g.cloneNode(d),t.parentNode.insertBefore(u,t),c.push(u)),u.appendChild(t))}var u;r(t,f)}),p.wrap_links===!1&&r(c,function(t){function n(t){var i,s,o;if(t.nodeName==="A"){s=g.cloneNode(d),c.push(s),o=e.grep(t.childNodes);for(i=0;i<o.length;i++)s.appendChild(o[i]);t.appendChild(s)}r(e.grep(t.childNodes),n)}n(t)}),r(c,function(e){function s(e){var t=0;return r(e.childNodes,function(e){!H(e)&&!R(e)&&t++}),t}function o(e){var t,n;return r(e.childNodes,function(e){if(e.nodeType==1&&!R(e)&&!b(e))return t=e,d}),t&&M(t,p)&&(n=t.cloneNode(d),T(n),i.replace(n,e,v),i.remove(t,1)),n||e}var t;t=s(e);if((c.length>1||!f(e))&&t===0){i.remove(e,1);return}if(p.inline||p.wrapper){!p.exact&&t===1&&(e=o(e)),r(h,function(t){r(i.select(t.inline,e),function(e){var n;if(t.wrap_links===!1){n=e.parentNode;do if(n.nodeName==="A")return;while(n=n.parentNode)}F(t,l,e,t.exact?e:null)})});if(k(e.parentNode,n,l))return i.remove(e,1),e=0,v;p.merge_with_parents&&i.getParent(e.parentNode,function(t){if(k(t,n,l))return i.remove(e,1),e=0,v}),e&&p.merge_siblings!==!1&&(e=U(q(e),e),e=U(e,q(e,v)))}})}var h=w(n),p=h[0],m,g,y,E=s.isCollapsed();if(p)if(c)c.nodeType?(g=i.createRng(),g.setStartBefore(c),g.setEndAfter(c),L(j(g,h),null,!0)):L(c,null,!0);else if(!E||!p.inline||i.select("td.mceSelected,th.mceSelected").length){var A=t.selection.getNode();t.selection.setRng(N()),m=s.getBookmark(),L(j(s.getRng(v),h),m),p.styles&&(p.styles.color||p.styles.textDecoration)&&(e.walk(A,x,"childNodes"),x(A)),s.moveToBookmark(m),s.setRng(S(s.getRng(v))),t.nodeChanged()}else X("apply",n,l)}function N(n,a,l){function x(e){var t=e.startContainer,n=e.startOffset,r,u,a,f;t.nodeType==3&&n>=t.nodeValue.length-1&&(t=t.parentNode,n=c(t)+1);if(t.nodeType==1){a=t.childNodes,t=a[Math.min(n,a.length-1)],r=new o(t),n>a.length-1&&r.next();for(u=r.current();u;u=r.next())if(u.nodeType==3&&!H(u)){f=i.create("a",null,h),u.parentNode.insertBefore(f,u),e.setStart(u,0),s.setRng(e),i.remove(f);return}}}function T(t){var n,r,i;n=e.grep(t.childNodes);for(r=0,i=p.length;r<i;r++)if(F(p[r],a,t,t))break;if(m.deep)for(r=0,i=n.length;r<i;r++)T(n[r])}function N(e){var t;return r(y(e.parentNode).reverse(),function(e){var r;!t&&e.id!="_start"&&e.id!="_end"&&(r=k(e,n,a),r&&r.split!==!1&&(t=e))}),t}function C(e,t,n,r){var s,o,u,l,c,h;if(e){h=e.parentNode;for(s=t.parentNode;s&&s!=h;s=s.parentNode){o=s.cloneNode(d);for(c=0;c<p.length;c++)if(F(p[c],a,o,o)){o=0;break}o&&(u&&o.appendChild(u),l||(l=o),u=o)}r&&(!m.mixed||!f(e))&&(t=i.split(e,t)),u&&(n.parentNode.insertBefore(u,n),l.appendChild(n))}return t}function A(e){return C(N(e),e,e,!0)}function O(e){var t=i.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return R(n)&&(n=n[e?"firstChild":"lastChild"]),i.remove(t,!0),n}function M(e){var n,i;e=j(e,p,v),m.split&&(n=W(e,v),i=W(e),n!=i?(n=B(n,"span",{id:"_start","data-mce-type":"bookmark"}),i=B(i,"span",{id:"_end","data-mce-type":"bookmark"}),A(n),A(i),n=O(v),i=O()):n=i=A(n),e.startContainer=n.parentNode,e.startOffset=c(n),e.endContainer=i.parentNode,e.endOffset=c(i)+1),u.walk(e,function(e){r(e,function(e){T(e),e.nodeType===1&&t.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&S(e.parentNode)==="underline"&&F({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var p=w(n),m=p[0],g,b,E;if(l){l.nodeType?(E=i.createRng(),E.setStartBefore(l),E.setEndAfter(l),M(E)):M(l);return}!s.isCollapsed()||!m.inline||i.select("td.mceSelected,th.mceSelected").length?(g=s.getBookmark(),M(s.getRng(v)),s.moveToBookmark(g),m.inline&&L(n,a,s.getStart())&&x(s.getRng(!0)),t.nodeChanged()):X("remove",n,a),e.isWebKit&&t.execCommand("mceCleanup")}function C(e,t,n){var r=w(e);!L(e,t,n)||"toggle"in r[0]&&!r[0].toggle?T(e,t,n):N(e,t,n)}function k(e,t,n,r){function f(e,t,s){var o,u,a=t[s],f;if(t.onmatch)return t.onmatch(e,t,s);if(a)if(a.length===m){for(o in a)if(a.hasOwnProperty(o)){s==="attributes"?u=i.getAttrib(e,o):u=D(e,o);if(r&&!u&&!t.exact)return;if((!r||t.exact)&&!_(u,P(a[o],n)))return}}else for(f=0;f<a.length;f++)if(s==="attributes"?i.getAttrib(e,a[f]):D(e,a[f]))return t;return t}var s=w(t),o,u,a;if(s&&e)for(u=0;u<s.length;u++){o=s[u];if(M(e,o)&&f(e,o,"attributes")&&f(e,o,"styles")){if(a=o.classes)for(u=0;u<a.length;u++)if(!i.hasClass(e,a[u]))return;return o}}}function L(e,t,n){function o(n){return n=i.getParent(n,function(n){return!!k(n,e,t,!0)}),k(n,e,t)}var r;return n?o(n):(n=s.getNode(),o(n)?v:(r=s.getStart(),r!=n&&o(r)?v:d))}function A(e,t){var n,r=[],o={},u,a,f;return n=s.getStart(),i.getParent(n,function(n){var i,s;for(i=0;i<e.length;i++)s=e[i],!o[s]&&k(n,s,t)&&(o[s]=!0,r.push(s))}),r}function O(e){var t=w(e),n,r,o,u,a;if(t){n=s.getStart(),r=y(n);for(u=t.length-1;u>=0;u--){a=t[u].selector;if(!a)return v;for(o=r.length-1;o>=0;o--)if(i.is(r[o],a))return v}}return d}function M(e,t){if(_(e,t.inline))return v;if(_(e,t.block))return v;if(t.selector)return i.is(e,t.selector)}function _(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function D(e,t){var n=i.getStyle(e,t);if(t=="color"||t=="backgroundColor")n=i.toHex(n);return t=="fontWeight"&&n==700&&(n="bold"),""+n}function P(e,t){return typeof e!="string"?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function H(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function B(e,t,n){var r=i.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function j(e,n,r){function b(e){var t,r,o,c,h;t=r=e?s:a,h=e?"previousSibling":"nextSibling",root=i.getRoot();if(t.nodeType==3&&!H(t))if(e?u>0:l<t.nodeValue.length)return t;for(;;){if(r==root||!n[0].block_expand&&f(r))return r;for(c=r[h];c;c=c[h])if(!R(c)&&!H(c))return r;r=r.parentNode}return t}function w(e,t){t===m&&(t=e.nodeType===3?e.length:e.childNodes.length);while(e&&e.hasChildNodes())e=e.childNodes[t],e&&(t=e.nodeType===3?e.length:e.childNodes.length);return{node:e,offset:t}}var s=e.startContainer,u=e.startOffset,a=e.endContainer,l=e.endOffset,h,p,v,g;s.nodeType==1&&s.hasChildNodes()&&(p=s.childNodes.length-1,s=s.childNodes[u>p?p:u],s.nodeType==3&&(u=0)),a.nodeType==1&&a.hasChildNodes()&&(p=a.childNodes.length-1,a=a.childNodes[l>p?p:l-1],a.nodeType==3&&(l=a.nodeValue.length));if(R(s.parentNode)||R(s))s=R(s)?s:s.parentNode,s=s.nextSibling||s,s.nodeType==3&&(u=0);if(R(a.parentNode)||R(a))a=R(a)?a:a.parentNode,a=a.previousSibling||a,a.nodeType==3&&(l=a.length);if(n[0].inline){if(e.collapsed){function E(e,n,s){function h(e,t){var n,i,o=e.nodeValue;return typeof t=="undefined"&&(t=s?o.length:0),s?(n=o.lastIndexOf(" ",t),i=o.lastIndexOf(" ",t),n=n>i?n:i,n!==-1&&!r&&n++):(n=o.indexOf(" ",t),i=o.indexOf(" ",t),n=n!==-1&&(i===-1||n<i)?n:i),n}var u,a,l,c;if(e.nodeType===3){l=h(e,n);if(l!==-1)return{container:e,offset:l};c=e}u=new o(e,i.getParent(e,f)||t.getBody());while(a=u[s?"prev":"next"]())if(a.nodeType===3){c=a,l=h(a);if(l!==-1)return{container:a,offset:l}}else if(f(a))break;if(c)return s?n=0:n=c.length,{container:c,offset:n}}g=E(s,u,!0),g&&(s=g.container,u=g.offset),g=E(a,l),g&&(a=g.container,l=g.offset)}v=w(a,l);if(v.node){while(v.node&&v.offset===0&&v.node.previousSibling)v=w(v.node.previousSibling);v.node&&v.offset>0&&v.node.nodeType===3&&v.node.nodeValue.charAt(v.offset-1)===" "&&(v.offset>1?(a=v.node,a.splitText(v.offset-1)):v.node.previousSibling)}}if(n[0].inline||n[0].block_expand){if(!n[0].inline||s.nodeType!=3||u===0)s=b(!0);if(!n[0].inline||a.nodeType!=3||l===a.nodeValue.length)a=b()}if(n[0].selector&&n[0].expand!==d&&!n[0].inline){function S(t,r){var s,o,u,a;t.nodeType==3&&t.nodeValue.length==0&&t[r]&&(t=t[r]),s=y(t);for(o=0;o<s.length;o++)for(u=0;u<n.length;u++){a=n[u];if("collapsed"in a&&a.collapsed!==e.collapsed)continue;if(i.is(s[o],a.selector))return s[o]}return t}s=S(s,"previousSibling"),a=S(a,"nextSibling")}if(n[0].block||n[0].selector){function x(e,t,r){var s;n[0].wrapper||(s=i.getParent(e,n[0].block)),s||(s=i.getParent(e.nodeType==3?e.parentNode:e,f)),s&&n[0].wrapper&&(s=y(s,"ul,ol").reverse()[0]||s);if(!s){s=e;while(s[t]&&!f(s[t])){s=s[t];if(_(s,"br"))break}}return s||e}s=x(s,"previousSibling"),a=x(a,"nextSibling"),n[0].block&&(f(s)||(s=b(!0)),f(a)||(a=b()))}return s.nodeType==1&&(u=c(s),s=s.parentNode),a.nodeType==1&&(l=c(a)+1,a=a.parentNode),{startContainer:s,startOffset:u,endContainer:a,endOffset:l}}function F(e,t,n,s){var o,u,a;if(!M(n,e))return d;if(e.remove!="all"){r(e.styles,function(e,r){e=P(e,t),typeof r=="number"&&(r=e,s=0),(!s||_(D(s,r),e))&&i.setStyle(n,r,""),a=1}),a&&i.getAttrib(n,"style")==""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),r(e.attributes,function(e,o){var u;e=P(e,t),typeof o=="number"&&(o=e,s=0);if(!s||_(i.getAttrib(s,o),e)){if(o=="class"){e=i.getAttrib(n,o);if(e){u="",r(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(u+=(u?" ":"")+e)});if(u){i.setAttrib(n,o,u);return}}}o=="class"&&n.removeAttribute("className"),p.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),r(e.classes,function(e){e=P(e,t),(!s||i.hasClass(s,e))&&i.removeClass(n,e)}),u=i.getAttribs(n);for(o=0;o<u.length;o++)if(u[o].nodeName.indexOf("_")!==0)return d}if(e.remove!="none")return I(n,e),v}function I(t,n){var s=t.parentNode,o;if(n.block)if(!l){function u(e,t,n){return e=q(e,t,n),!e||e.nodeName=="BR"||f(e)}f(t)&&!f(s)&&(!u(t,d)&&!u(t.firstChild,v,1)&&t.insertBefore(i.create("br"),t.firstChild),!u(t,v)&&!u(t.lastChild,d,1)&&t.appendChild(i.create("br")))}else s==i.getRoot()&&(!n.list_block||!_(t,n.list_block))&&r(e.grep(t.childNodes),function(e){a(l,e.nodeName.toLowerCase())?o?o.appendChild(e):o=B(e,l):o=0});if(n.selector&&n.inline&&!_(n.inline,t))return;i.remove(t,1)}function q(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t])if(e.nodeType==1||!H(e))return e}}function R(e){return e&&e.nodeType==1&&e.getAttribute("data-mce-type")=="bookmark"}function U(t,n){function a(e,t){function n(e){var t={};return r(i.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();r.indexOf("_")!==0&&r!=="style"&&(t[r]=i.getAttrib(e,r))}),t}function s(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){n=t[r];if(n===m)return d;if(e[r]!=n)return d;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return d;return v}return e.nodeName!=t.nodeName?d:s(n(e),n(t))?s(i.parseStyle(i.getAttrib(e,"style")),i.parseStyle(i.getAttrib(t,"style")))?v:d:d}var s,o,u;if(t&&n){function f(e,t){for(o=e;o;o=o[t]){if(o.nodeType==3&&o.nodeValue.length!==0)return e;if(o.nodeType==1&&!R(o))return o}return e}t=f(t,"previousSibling"),n=f(n,"nextSibling");if(a(t,n)){for(o=t.nextSibling;o&&o!=n;)u=o,o=o.nextSibling,t.appendChild(u);return i.remove(n),r(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}}return n}function z(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function W(e,n){var r,i,s,u;return r=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],r.nodeType==1&&(s=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>s?s:i]),r.nodeType===3&&n&&i>=r.nodeValue.length&&(r=(new o(r,t.getBody())).next()||r),r.nodeType===3&&!n&&i==0&&(r=(new o(r,t.getBody())).prev()||r),r}function X(n,r,a){function p(e){var n=i.create("span",{id:l,"data-mce-bogus":!0,style:c?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(f)),n}function d(e,t){while(e){if(e.nodeType===3&&e.nodeValue!==f||e.childNodes.length>1)return!1;t&&e.nodeType===1&&t.push(e),e=e.firstChild}return!0}function v(e){while(e){if(e.id===l)return e;e=e.parentNode}}function m(e){var t;if(e){t=new o(e,e);for(e=t.current();e;e=t.next())if(e.nodeType===3)return e}}function g(e,t){var n,r;if(!e){e=v(s.getStart());if(!e)while(e=i.get(l))g(e,!1)}else r=s.getRng(!0),d(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),i.remove(e)):(n=m(e),n=n.deleteData(0,1),i.remove(e,1)),s.setRng(r)}function y(){var e,t,n,i,o,l,c;e=s.getRng(!0),i=e.startOffset,l=e.startContainer,c=l.nodeValue,t=
v(s.getStart()),t&&(n=m(t)),c&&i>0&&i<c.length&&/\w/.test(c.charAt(i))&&/\w/.test(c.charAt(i-1))?(o=s.getBookmark(),e.collapse(!0),e=j(e,w(r)),e=u.split(e),T(r,a,e),s.moveToBookmark(o)):(!t||n.nodeValue!==f?(t=p(!0),n=t.firstChild,e.insertNode(t),i=1,T(r,a,t)):T(r,a,t),s.setCursorLocation(n,i))}function b(){var e=s.getRng(!0),t,n,o,l,c,h,d=[],v,m;t=e.startContainer,n=e.startOffset,c=t;if(t.nodeType==3){if(n!=t.nodeValue.length||t.nodeValue===f)l=!0;c=c.parentNode}while(c){if(k(c,r,a)){h=c;break}c.nextSibling&&(l=!0),d.push(c),c=c.parentNode}if(!h)return;if(l)o=s.getBookmark(),e.collapse(!0),e=j(e,w(r),!0),e=u.split(e),N(r,a,e),s.moveToBookmark(o);else{m=p(),c=m;for(v=d.length-1;v>=0;v--)c.appendChild(d[v].cloneNode(!1)),c=c.firstChild;c.appendChild(i.doc.createTextNode(f)),c=c.firstChild,i.insertAfter(m,h),s.setCursorLocation(c,1)}}var f,l="_mce_caret",c=t.settings.caret_debug;f=e.isGecko?"​":h,t.onBeforeGetContent.addToTop(function(){var e=[],t;if(d(v(s.getStart()),e)){t=e.length;while(t--)i.setAttrib(e[t],"data-mce-bogus","1")}}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){g()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(n==8||n==37||n==39)&&g(v(s.getStart()))}),n=="apply"?y():b()}var n={},r=e.each,i=t.dom,s=t.selection,o=e.dom.TreeWalker,u=new e.dom.RangeUtils(i),a=t.schema.isValidChild,f=i.isBlock,l=t.settings.forced_root_block,c=i.nodeIndex,h="﻿",p=/^(src|href|style)$/,d=!1,v=!0,m,S=function(e){var n;return t.dom.getParent(e,function(e){return n=t.dom.getStyle(e,"text-decoration"),n&&n!=="none"}),n},x=function(e){var n;e.nodeType===1&&e.parentNode&&e.parentNode.nodeType===1&&(n=S(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};e.extend(this,{get:w,register:E,apply:T,remove:N,toggle:C,match:L,matchAll:A,matchNode:k,canApply:O})}}(tinymce),tinymce.onAddEditor.add(function(e,t){var n,r,i,s=t.settings;if(s.inline_styles){r=e.explode(s.font_size_legacy_values);function o(t,n){e.each(n,function(e,n){e&&i.setStyle(t,n,e)}),i.rename(t,"span")}n={font:function(e,t){o(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size)-1]})},u:function(e,t){o(t,{textDecoration:"underline"})},strike:function(e,t){o(t,{textDecoration:"line-through"})}};function u(r,o){i=r.dom,s.convert_fonts_to_spans&&e.each(i.select("font,u,strike",o.node),function(e){n[e.nodeName.toLowerCase()](t.dom,e)})}t.onPreProcess.add(u),t.onSetContent.add(u),t.onInit.add(function(){t.selection.onSetContent.add(u)})}});