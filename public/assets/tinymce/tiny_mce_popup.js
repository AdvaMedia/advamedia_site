// Uncomment and change this document.domain value if you are loading the script cross subdomains
// document.domain = 'moxiecode.com';
var tinymce=null,tinyMCEPopup,tinyMCE;tinyMCEPopup={init:function(){var e=this,t,n;t=e.getWin(),tinymce=t.tinymce,tinyMCE=t.tinyMCE,e.editor=tinymce.EditorManager.activeEditor,e.params=e.editor.windowManager.params,e.features=e.editor.windowManager.features,e.dom=e.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document),e.features.popup_css!==!1&&e.dom.loadCSS(e.features.popup_css||e.editor.settings.popup_css),e.listeners=[],e.onInit={add:function(t,n){e.listeners.push({func:t,scope:n})}},e.isWindow=!e.getWindowArg("mce_inline"),e.id=e.getWindowArg("mce_window_id"),e.editor.windowManager.onOpen.dispatch(e.editor.windowManager,window)},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(e,t){var n=this.params[e];return tinymce.is(n)?n:t},getParam:function(e,t){return this.editor.getParam(e,t)},getLang:function(e,t){return this.editor.getLang(e,t)},execCommand:function(e,t,n,r){return r=r||{},r.skip_focus=1,this.restoreSelection(),this.editor.execCommand(e,t,n,r)},resizeToInnerSize:function(){var e=this;setTimeout(function(){var t=e.dom.getViewPort(window);e.editor.windowManager.resizeBy(e.getWindowArg("mce_width")-t.w,e.getWindowArg("mce_height")-t.h,e.id||window)},10)},executeOnLoad:function(s){this.onInit.add(function(){eval(s)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var e=tinyMCEPopup;!e.isWindow&&tinymce.isIE&&e.editor.selection.moveToBookmark(e.editor.windowManager.bookmark)},requireLangPack:function(){var e=this,t=e.getWindowArg("plugin_url")||e.getWindowArg("theme_url");t&&e.editor.settings.language&&e.features.translate_i18n!==!1&&e.editor.settings.language_load!==!1&&(t+="/langs/"+e.editor.settings.language+"_dlg.js",tinymce.ScriptLoader.isDone(t)||(document.write('<script type="text/javascript" src="'+tinymce._addVer(t)+'"></script>'),tinymce.ScriptLoader.markDone(t)))},pickColor:function(e,t){this.execCommand("mceColorPicker",!0,{color:document.getElementById(t).value,func:function(e){document.getElementById(t).value=e;try{document.getElementById(t).onchange()}catch(n){}}})},openBrowser:function(e,t,n){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,t,window)},confirm:function(e,t,n){this.editor.windowManager.confirm(e,t,n,window)},alert:function(e,t,n){this.editor.windowManager.alert(e,t,n,window)},close:function(){function t(){e.editor.windowManager.close(window),tinymce=tinyMCE=e.editor=e.params=e.dom=e.dom.doc=null}var e=this;tinymce.isOpera?e.getWin().setTimeout(t,0):t()},_restoreSelection:function(){var e=window.event.srcElement;e.nodeName=="INPUT"&&(e.type=="submit"||e.type=="button")&&tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var e=tinyMCEPopup,t=document.title,n,r,i;if(e.domLoaded)return;e.domLoaded=1,e.features.translate_i18n!==!1&&(r=document.body.innerHTML,tinymce.isIE&&(r=r.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=e.editor.getParam("directionality",""),(i=e.editor.translate(r))&&i!=r&&(document.body.innerHTML=i),(i=e.editor.translate(t))&&i!=t&&(document.title=t=i)),(!e.editor.getParam("browser_preferred_colors",!1)||!e.isWindow)&&e.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.isIE&&(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),e.dom.add(e.dom.select("head")[0],"base",{target:"_self"})),e.restoreSelection(),e.resizeToInnerSize(),e.isWindow?window.focus():e.editor.windowManager.setTitle(window,t),!tinymce.isIE&&!e.isWindow&&tinymce.dom.Event._add(document,"focus",function(){e.editor.windowManager.focus(e.id)}),tinymce.each(e.dom.select("select"),function(e){e.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(e.listeners,function(t){t.func.call(t.scope,e.editor)}),e.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(t){tinymce.each(t.elements,function(t){if(e.dom.hasClass(t,"mceFocus")&&!t.disabled)return t.focus(),!1})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler},_accessHandler:function(e){e=e||window.event;if(e.keyCode==13||e.keyCode==32)return e=e.target||e.srcElement,e.onchange&&e.onchange(),tinymce.dom.Event.cancel(e)},_closeWinKeyHandler:function(e){e=e||window.event,e.keyCode==27&&tinyMCEPopup.close()},_wait:function(){document.attachEvent?(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",arguments.callee),tinyMCEPopup._onDOMLoaded())}),document.documentElement.doScroll&&window==window.top&&function(){if(tinyMCEPopup.domLoaded)return;try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}tinyMCEPopup._onDOMLoaded()}(),document.attachEvent("onload",tinyMCEPopup._onDOMLoaded)):document.addEventListener&&(window.addEventListener("DOMContentLoaded",tinyMCEPopup._onDOMLoaded,!1),window.addEventListener("load",tinyMCEPopup._onDOMLoaded,!1))}},tinyMCEPopup.init(),tinyMCEPopup._wait();